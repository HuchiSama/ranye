{"version":3,"sources":["redux/redux.js","components/form.js","components/sign.js","components/care-message.js","components/footer.js","components/signup-component.js","components/header-nav.js","components/editor.js","components/question.js","components/endComment.js","components/ansComment.js","components/postfooter.js","components/invitation.js","components/toolbar.js","components/body-container.js","pages/home.js","components/signin-component.js","pages/signin.js","components/post-container.js","components/invite.js","components/post-page.js","pages/post.js","components/edit-userInfo.js","components/user-header.js","components/user-Bar.js","components/caresList.js","components/collectList.js","components/user-container.js","pages/user.js","App.js","serviceWorker.js","index.js"],"names":["navActions","getInitial","state","action","produce","draft","key","toSign","sign","toChat","chat","navStore","createStore","type","question","invitedList","chatList","cares","signActions","formRedirect","sucessSignup","toSignin","form","captcha","protocol","buttonText","other","signStore","homeActions","postQuestion","postCount","posts","getData","toAttention","attention","postId","axios","post","qusId","createdAt","Date","now","forEach","it","qusLike","like","poorButton","poors","style","poor","deletePost","collect","collect_quesActive","collectId","id","favorite","favoriteQues","favoriteId","hoverAvatar","hover","homeStore","pageActions","writeAnswer","postAnswer","commenterInfo","pageId","attentionLength","likeComment","likes","commentId","poster","agree","userInfo","commentPoors","deleteComment","comments","collect_commActive","favoriteComment","ansCommentList","ansComments","invite","upDateInvite","inviteList","pageStore","userActions","editState","edit","editUserInfo","editEnd","updateActive","activeSwitch","active","careActive","collectActive","userStore","careAction","updateCare","len","myCares","length","i","careId","getCare","careStore","ansComAction","postComment","newList","likeAnsComment","myLikeAnsComment","ansCommentId","poorAnsComment","myPoorAnsComment","postEndComment","endCommentList","idx","endComment","getEndCommentList","likeEndComment","myLikeEndComment","endCommentId","poorEndComment","myPoorEndComment","ansComStore","Form","props","signTo","e","preventDefault","el","target","name","value","password","then","item","data","document","querySelector","click","errRef","current","innerHTML","window","location","pathname","history","push","dispatch","replace","catch","console","log","nextPassword","trim","email","accQuery","emailQuery","setTimeout","classList","remove","add","toSignUp","toSignIn","getState","createRef","className","onclick","this","children","method","onSubmit","filter","to","onClick","ref","footer","xieyi","React","Component","withRouter","Sign","useState","setState","setAccQuery","setemailQuery","useCallback","textContent","useEffect","uns","subscribe","switchCaptcha","src","accountInput","res","emailInput","placeholder","title","alt","onChange","TextArea","Input","careBloon","setCareBl","careInfo","setChat","recare","onmouseenter","childNodes","innerText","onmouseleave","get","rej","Array","from","some","userId","undefined","cookieUser","response","status","HeartOutlined","CommentOutlined","ChatWindow","targetInfo","setValue","msgList","updateMsg","ws","setWS","WebSocket","sendMsg","send","JSON","stringify","content","targetName","targetId","targetAvatar","avatar","onopen","msg","onclose","onmessage","event","parse","flat","editInput","webClose","close","scrollTop","offsetHeight","sendEnter","shiftKey","keyCode","width","innerWidth","height","innerHeight","CloseOutlined","map","moment","format","created","backgroundImage","userAvatar","rows","onKeyDown","Footer","Logup","Success","homeDis","setHome","inviteMsg","setInviteMsg","byCareList","byCareMsg","setByCareMsg","byCommentLike","byCommentMsg","setByCommentMsg","msgSum","setMsgSum","invited","setInvited","initial","invitedLen","careLen","commentLen","pullUL","clickEvent","leaveEvent","addEventListener","enterEvent","removeEventListener","invitePull","stopPropagation","useGetInvite","chatSum","setChatSum","updateChat","err","dir","chatPull","userName","useGetChat","signState","setSignState","signUns","setHomeNone","clearSignDIV","FROM_DIV","homeList","sliderNav","slider","page","documentElement","wheelDelta","top","SearchOutlined","fontSize","color","BellFilled","MessageFilled","HomeFilled","MessageItem","ChatComponent","PullDown","display","cookie","setCookie","sign_out","toEditpage","myHome","UserOutlined","FormOutlined","LogoutOutlined","setActive","MessageList","scroll","setScroll","ProjectFilled","HeartFilled","LikeFilled","InvitedItem","CareItem","CommentLikeItem","image","Empty","PRESENTED_IMAGE_SIMPLE","description","TIME","endOf","fromNow","TIME_CONTENT","parseInt","test","setCare","openChat","setOpenChat","setTargetInfo","headLabelCare","setHeadLabelCare","headLabelOther","setHeadLabelOther","careChat","strangerChat","openChatWindow","setUnread","careCount","count","otherCount","unread","CareChat","StrangerChat","notRead","Editor","setEditValue","editorEl","useRef","submit","editor","setEditor","txt","elem","E","config","onchange","newHtml","html","text","onchangeTimeout","pasteFilterStyle","uploadFileName","uploadImgServer","create","destroy","submitQus","closeQUs","EndCommentList","setEndComment","inputComment","sendComment","likeORpoor","t","toSendEndComment","targetUserId","newEndCommentList","DislikeFilled","Item","autoSize","marginRight","onInput","htmlType","author","actions","datetime","CommentAns","AnsComment","allView","setAllView","hide","setHide","updateEndCommentList","commentIcon","setCommIcon","newData","hideORview","WechatFilled","slice","newAnsCommentList","PostsFooter","ques","comment","setPost","poorActive","setPoor","setCollect","favoriteActive","setFavorite","homeUns","newPost","find","postUns","newComment","getCollect","posterId","commenterId","getFavorite","useSelectState","fold","setFold","span","querySelectorAll","getBoundingClientRect","p","foldContent","arr","includes","ansComment","setAnsComment","ansCommentflad","CaretUpFilled","CaretDownFilled","answerCount","StarFilled","DownOutlined","UpOutlined","ContainerList","PostMain","Over","Attachment","useParams","mePost","attachment","setAttachment","attachmentClick","postNormal","changeAttachment","fill","upPosts","loading","setLoading","setFooter","postContent","postIdx","time","round","setData","ToolbarHead","UserInfo","user","UserSign","Recommend","FooterBar","signOut","avatarChange","setHover","avatarCutover","FormData","append","files","headers","inputAvatar","pushUserPage","switchAvatar","clearAvatarEvent","userAvatarDiv","SyncOutlined","FileFilled","signChange","setAttribute","focus","onblur","user_sign","lastSign","signInput","EditOutlined","upData","recommendList","recommend","paragraph","HomeNavChild","Login","Update","Comment","ToolBar","AnswerDiv","CommentList","submitAnswer","a","getNewCommenter","commentNoamal","commentIdx","CommentItem","commentItem","PosterInfo","toUserPage","one","sen","commentCount","fans","outerRef","foo","onmousewheel","inviteEnd","clearInvite","body","size","InviteItem","complete","setComplete","clear","setClear","updateInvite","temp","toInvite","careName","newInvites","industry","onMouseEnter","onMouseLeave","borderColor","setInvite","result","PostNavChild","PostInfo","PostTitle","Poster","Attention","upHide","setFlod","spanHeight","setHeight","foldCutover","UserAddOutlined","FireFilled","pageview","upVoke","attenRef","fontWeight","Sex","sex","Birthday","birthday","Address","address","Industry","Introduction","introduction","Sociality","sociality","setSex","editSex","saveEdit","Group","checked","EditFilled","setSign","limit","setLimit","editSign","editSignInput","setAddress","editaddress","editAddressIput","setBirthday","editBirthday","date","setIndustry","editIndustry","editIndustryIput","summary","setSummary","editSummary","editIntroduction","setSociality","editSociality","editSocialityIput","UserHeader","flod","flodClick","shape","CameraOutlined","UserDataList","UserBaseData","MailOutlined","ManOutlined","marginLeft","WomanOutlined","UserBar","Score","isMe","careQuestion","care","attentionDynamic","collectQues","collectComment","AttentionDynamic","dynamicList","changeView","Idx","AttentionQuestion","CaresList","careList","itCaresList","recevies","enterText","leaveTXet","CheckCircleFilled","CollectList","quesIdx","coomIdx","CollectQuestion","CollectComment","likeAt","getContent","toLocaleDateString","getContentText","POST_TIME","UserMain","dynamic","flag","setFlag","reActive","getMain","left","DynamicList","commentDynamic","likeDynamic","postDynamic","dynamicArray","sortAtTime","AnswerDynamic","PostDynamic","LikeDynamic","array","sort","b","pageuns","UserNavSlider","App","exact","path","Boolean","hostname","match","locale","ReactDOM","render","StrictMode","zhCN","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.fb04a4aa.chunk.js","sourcesContent":["import { createStore } from 'redux'\nimport { produce } from 'immer'\nimport axios from 'axios'\n\n\nconst navActions = {\n  getInitial(state, action) {\n    return produce(state, draft => {\n      for (let key in action) {\n        draft[key] = action[key]\n      }\n    })\n  },\n  toSign(state, action) {\n    return produce(state, draft => {\n      draft.sign = action.sign\n    })\n  },\n  toChat(state, action) {\n    return produce(state, draft => {\n      draft.chat = action.chat\n    })\n  },\n}\n\nfunction navReducer(state, action) {\n  if (action.type in navActions) {\n    return navActions[action.type](state, action)\n  }\n  return state\n}\n\nexport const navStore = createStore(navReducer, {\n  question: false,\n  sign: true,\n  invitedList: [],\n  chat: false,\n  chatList: [],\n  cares: {}\n})\n\n\nconst signActions = {\n  formRedirect(state, action) {\n    return produce(state, (draft) => {\n      for (let key in action) {\n        draft[key] = action[key]\n      }\n    })\n  },\n  sucessSignup(state, action) {\n    return produce(state, (draft) => {\n      for (let key in action) {\n        draft[key] = action[key]\n      }\n    })\n  },\n  toSignin(state, action) {\n    return produce(state, (draft) => {\n      draft.sucessSignup = action.sucessSignup\n      draft.form = 'signin'\n      draft.captcha = true\n      draft.protocol = \"未注册手机验证后自动登录，注册即代表同意《知乎协议》《隐私保护指引》\"\n      draft.buttonText = '登录'\n      draft.other = true\n    })\n  },\n}\n\nfunction signReducer(state, action) {\n  if (action.type in signActions) {\n    return signActions[action.type](state, action)\n  }\n  return state\n}\n\nexport const signStore = createStore(signReducer, {\n  form: 'signin',\n  captcha: true,\n  protocol: \"未注册手机验证后自动登录，注册即代表同意《知乎协议》《隐私保护指引》\",\n  buttonText: '登录',\n  other: true\n})\n\n\n//homeStore\nconst homeActions = {\n  postQuestion(state, action) {\n    // debugger\n    return produce(state, draft => {\n      draft.question = action.question\n      draft.postCount = action.postCount\n      draft.posts = action.posts\n    })\n  },\n  question(state, action) {\n    return produce(state, draft => {\n      draft.question = action.question\n    })\n  },\n  getData(state, action) {\n    return produce(state, draft => {\n      for (let key in action) {\n        draft[key] = action[key]\n      }\n    })\n  },\n  toAttention(state, action) {\n    return produce(state, draft => {\n      if (draft.attention[action.postId]) {\n        axios.post('/api/attention/', {\n          qusId: action.postId,\n          createdAt: Date.now(),\n          type: 'revoke',\n        })\n        draft.posts.forEach(it => {\n          if (it.postId === action.postId) {\n            it.qusLike = action.like - 1\n          }\n        })\n        draft.attention[action.postId] = false\n      } else {\n        axios.post('/api/attention/', {\n          qusId: action.postId,\n          createdAt: Date.now(),\n          type: 'attention',\n        })\n        draft.posts.forEach(it => {\n          if (it.postId === action.postId) {\n            it.qusLike = action.like + 1\n          }\n        })\n        draft.attention[action.postId] = true\n      }\n    })\n  },\n  poorButton(state, action) {\n    // debugger\n    return produce(state, draft => {\n      if (draft.poors[action.postId]) {\n        axios.post('/api/attention/', {\n          qusId: action.postId,\n          type: 'revoke',\n          style: 'poor',\n          createdAt: Date.now()\n        })\n        draft.poors[action.postId] = false\n        draft.posts.forEach(it => {\n          if (it.postId === action.postId) {\n            it.poor = action.poor - 1\n          }\n        })\n\n      } else {\n        axios.post('/api/attention/', {\n          qusId: action.postId,\n          type: 'attention',\n          style: 'poor',\n          createdAt: Date.now()\n        })\n        draft.poors[action.postId] = true\n        draft.posts.forEach(it => {\n          if (it.postId === action.postId) {\n            it.poor = action.poor + 1\n          }\n        })\n      }\n    })\n  },\n  deletePost(state, action) {\n    return produce(state, draft => {\n      draft.postCount = action.postCount\n      draft.posts = action.posts\n    })\n  },\n  collect(state, action) {\n    return produce(state, draft => {\n      if (draft.collect_quesActive[action.collectId]) {\n        axios.post('/api/collect/', {\n          id: action.id,\n          collectId: action.collectId,\n          type: 'revoke',\n          style: 'question'\n        })\n        draft.collect_quesActive[action.collectId] = false\n      } else {\n        axios.post('/api/collect/', {\n          id: action.id,\n          collectId: action.collectId,\n          type: 'collect',\n          style: 'question'\n        })\n        draft.collect_quesActive[action.collectId] = true\n      }\n    })\n  },\n  favorite(state, action) {\n    return produce(state, draft => {\n      if (draft.favoriteQues[action.favoriteId]) {\n        axios.post('/api/favorite/', {\n          id: action.id,\n          favoriteId: action.favoriteId,\n          type: 'revoke',\n          style: 'question'\n        })\n        draft.favoriteQues[action.favoriteId] = false\n      } else {\n        axios.post('/api/favorite/', {\n          id: action.id,\n          favoriteId: action.favoriteId,\n          type: 'favorite',\n          style: 'question'\n        })\n        draft.favoriteQues[action.favoriteId] = true\n      }\n    })\n  },\n  hoverAvatar(state, action) {\n    return produce(state, draft => {\n      draft.hover = action.hover\n    })\n  },\n\n}\n\nfunction homeReducer(state, action) {\n  if (action.type in homeActions) {\n    return homeActions[action.type](state, action)\n  }\n  return state\n}\nexport const homeStore = createStore(homeReducer, {\n  question: false,\n  hover: false,\n})\n\n//post-pageStore\nconst pageActions = {\n  writeAnswer(state, action) {\n    return produce(state, draft => {\n      draft.writeAnswer = action.writeAnswer\n    })\n  },\n  getInitial(state, action) {\n    return produce(state, draft => {\n      for (let key in action) {\n        draft[key] = action[key]\n      }\n    })\n  },\n  postAnswer(state, action) {\n    // debugger\n    return produce(state, (draft) => {\n      draft.commenterInfo = action.commenterInfo\n      draft.writeAnswer = false\n    })\n  },\n  toAttention(state, action) {\n    return produce(state, (draft) => {\n      if (action.attention) {\n        axios.post('/api/attention/', {\n          qusId: action.pageId,\n          type: 'attention',\n          createdAt: Date.now()\n        })\n        draft.attention = action.attention\n        draft.attentionLength++\n      } else {\n        axios.post('/api/attention/', {\n          qusId: action.pageId,\n          type: 'revoke',\n          createdAt: Date.now()\n        })\n        draft.attention = action.attention\n        draft.attentionLength--\n      }\n    })\n  },\n  likeComment(state, action) {\n    // debugger\n    return produce(state, draft => {\n      if (draft.likes[action.commentId]) {\n        axios.post('/api/likeComment/', {\n          commentId: action.commentId,\n          type: 'revoke',\n          createdAt: Date.now()\n        })\n        draft.commenterInfo.forEach(it => {\n          if (it.commentId === action.commentId) {\n            it.like = action.like - 1\n          }\n        })\n        draft.poster ? draft.poster.agree -= 1 : draft.userInfo.agree -= 1\n        draft.likes[action.commentId] = false\n      } else {\n        axios.post('/api/likeComment/', {\n          commentId: action.commentId,\n          type: 'active',\n          createdAt: Date.now()\n        })\n        draft.commenterInfo.forEach(it => {\n          if (it.commentId === action.commentId) {\n            it.like = action.like + 1\n          }\n        })\n        draft.poster ? draft.poster.agree += 1 : draft.userInfo.agree += 1\n        draft.likes[action.commentId] = true\n      }\n    })\n  },\n  poorButton(state, action) {\n    // debugger\n    return produce(state, draft => {\n      if (draft.commentPoors[action.commentId]) {\n        axios.post('/api/likeComment/', {\n          commentId: action.commentId,\n          type: 'revoke',\n          style: 'poor',\n          createdAt: Date.now()\n        })\n        draft.commenterInfo.forEach(it => {\n          if (it.commentId === action.commentId) {\n            it.poor = action.poor - 1\n          }\n        })\n        draft.commentPoors[action.commentId] = false\n        // draft.commenterInfo[action.idx].poor = action.poor - 1\n      } else {\n        axios.post('/api/likeComment/', {\n          commentId: action.commentId,\n          type: 'active',\n          style: 'poor',\n          createdAt: Date.now()\n        })\n        draft.commenterInfo.forEach(it => {\n          if (it.commentId === action.commentId) {\n            it.poor = action.poor + 1\n          }\n        })\n        draft.commentPoors[action.commentId] = true\n        // draft.commenterInfo[action.idx].poor = action.poor + 1\n      }\n    })\n  },\n  deleteComment(state, action) {\n    return produce(state, (draft) => {\n      draft.commenterInfo = action.comments\n    })\n  },\n  collect(state, action) {\n    return produce(state, draft => {\n      if (draft.collect_commActive[action.collectId]) {\n        axios.post('/api/collect/', {\n          id: action.id,\n          collectId: action.collectId,\n          type: 'revoke',\n          style: 'comment',\n        })\n        draft.collect_commActive[action.collectId] = false\n      } else {\n        axios.post('/api/collect/', {\n          id: action.id,\n          collectId: action.collectId,\n          type: 'collect',\n          style: 'comment',\n        })\n        draft.collect_commActive[action.collectId] = true\n      }\n    })\n  },\n  favorite(state, action) {\n    return produce(state, draft => {\n      if (draft.favoriteComment[action.favoriteId]) {\n        axios.post('/api/favorite/', {\n          id: action.id,\n          favoriteId: action.favoriteId,\n          type: 'revoke',\n          style: 'comment',\n        })\n        draft.favoriteComment[action.favoriteId] = false\n      } else {\n        axios.post('/api/favorite/', {\n          id: action.id,\n          favoriteId: action.favoriteId,\n          type: 'favorite',\n          style: 'comment',\n        })\n        draft.favoriteComment[action.favoriteId] = true\n      }\n    })\n  },\n  ansCommentList(state, action) {\n    return produce(state, draft => {\n      draft.commenterInfo.forEach(it => {\n        if (it.commentId === action.id) {\n          it.ansComments++\n        }\n      })\n    })\n  },\n  invite(state, action) {\n    return produce(state, (draft) => {\n      draft.invite = action.invite\n    })\n  },\n  upDateInvite(state, action) {\n    return produce(state, (draft) => {\n      draft.inviteList = action.inviteList\n    })\n  },\n}\n\n\nfunction pageReducer(state, action) {\n  if (action.type in pageActions) {\n    return pageActions[action.type](state, action)\n  }\n  return state\n}\nexport const pageStore = createStore(pageReducer, {\n  writeAnswer: false,\n  invite: false,\n  inviteList: [],\n})\n\n//userStore\nconst userActions = {\n  getInitial(state, action) {\n    return produce(state, draft => {\n      for (let key in action) {\n        draft[key] = action[key]\n      }\n    })\n  },\n  editState(state, action) {\n    return produce(state, draft => {\n      draft.edit = action.edit\n    })\n  },\n  editUserInfo(state, action) {\n    return produce(state, draft => {\n      for (let key in action) {\n        draft.userInfo[key] = action[key]\n      }\n    })\n  },\n  editEnd(state, action) {\n    return produce(state, draft => {\n      draft.edit = action.edit\n    })\n  },\n  updateActive(state, action) {\n    return produce(state, draft => {\n      draft.attention = action.attention\n      draft.poors = action.poors\n    })\n  },\n  activeSwitch(state, action) {\n    return produce(state, draft => {\n      draft.active = action.active\n    })\n  },\n  careActive(state, action) {\n    return produce(state, draft => {\n      draft.careActive = action.careActive\n    })\n  },\n  collectActive(state, action) {\n    return produce(state, draft => {\n      draft.collectActive = action.collectActive\n    })\n  }\n}\nfunction userReducer(state, action) {\n  if (action.type in userActions) {\n    return userActions[action.type](state, action)\n  }\n  return state\n}\nexport const userStore = createStore(userReducer, {\n  writeAnswer: false,\n  edit: false,\n  question: false,\n  active: 0,\n  careActive: 0,\n  collectActive: 0,\n})\n\n/*cares-Store*/\n\nconst careAction = {\n  updateCare(state, action) {\n    return produce(state, draft => {\n      let len = draft.myCares.length\n      if (len === 0) {\n        draft.myCares[len] = { careId: action.id }\n        return\n      }\n      for (let i = 0; i < len; i++) {\n        if (draft.myCares[i].careId === action.id) {\n          draft.myCares[i].careId = null\n          break\n        }\n        if (i === len - 1) {\n          draft.myCares[len] = { careId: action.id }\n        }\n      }\n    })\n  },\n  getCare(state, action) {\n    return produce(state, draft => {\n      for (let key in action) {\n        draft[key] = action[key]\n      }\n    })\n  },\n}\nfunction careReducer(state, action) {\n  if (action.type in careAction) {\n    return careAction[action.type](state, action)\n  }\n  return state\n}\n\n\nexport const careStore = createStore(careReducer, {\n  myCares: []\n})\n\n\nconst ansComAction = {\n  getInitial(state, action) {\n    return produce(state, draft => {\n      for (let key in action) {\n        if (key === 'id' || key === 'ansCommentList') {\n          draft.ansCommentList[action.id] = action.ansCommentList\n        } else {\n          draft[key] = action[key]\n        }\n      }\n    })\n  },\n  postComment(state, action) {\n    return produce(state, draft => {\n      draft.ansCommentList[action.id] = action.newList\n    })\n  },\n  likeAnsComment(state, action) {\n    return produce(state, draft => {\n      if (draft.myLikeAnsComment[action.id]) {\n        axios.post(`/api/ansCommentLike/${action.id}`, {\n          style: 'like',\n          type: 'revoke',\n        })\n        draft.ansCommentList[action.commentId].forEach(it => {\n          if (it.ansCommentId === action.id) {\n            it.like -= 1\n          }\n        })\n        draft.myLikeAnsComment[action.id] = false\n      } else {\n        axios.post(`/api/ansCommentLike/${action.id}`, {\n          style: 'like',\n          type: 'active',\n        })\n        draft.ansCommentList[action.commentId].forEach(it => {\n          if (it.ansCommentId === action.id) {\n            it.like += 1\n          }\n        })\n        draft.myLikeAnsComment[action.id] = true\n      }\n    })\n  },\n  poorAnsComment(state, action) {\n    // debugger\n    return produce(state, draft => {\n      if (draft.myPoorAnsComment[action.id]) {\n        axios.post(`/api/ansCommentLike/${action.id}`, {\n          style: 'poor',\n          type: 'revoke',\n        })\n        draft.ansCommentList[action.commentId].forEach(it => {\n          if (it.ansCommentId === action.id) {\n            it.poor -= 1\n          }\n        })\n        draft.myPoorAnsComment[action.id] = false\n      } else {\n        axios.post(`/api/ansCommentLike/${action.id}`, {\n          style: 'poor',\n          type: 'active',\n        })\n        draft.ansCommentList[action.commentId].forEach(it => {\n          if (it.ansCommentId === action.id) {\n            it.poor += 1\n          }\n        })\n        draft.myPoorAnsComment[action.id] = true\n      }\n    })\n  },\n  postEndComment(state, action) {\n    return produce(state, draft => {\n      draft.endCommentList[action.id] = action.newList\n      draft.ansCommentList[action.commentId].forEach((it, idx) => {\n        if (it.ansCommentId === action.id) {\n          it.endComment += 1\n        }\n      })\n    })\n  },\n  getEndCommentList(state, action) {\n    return produce(state, draft => {\n      for (let key in action) {\n        if (key === 'id' || key === 'endCommentList') {\n          draft.endCommentList[action.id] = action.endCommentList\n        } else {\n          draft[key] = action[key]\n        }\n      }\n    })\n  },\n  likeEndComment(state, action) {\n    return produce(state, draft => {\n      if (draft.myLikeEndComment[action.id]) {\n        axios.post(`/api/endCommentLike/${action.id}`, {\n          style: 'like',\n          type: 'revoke',\n        })\n        draft.endCommentList[action.ansCommentId].forEach(it => {\n          if (it.endCommentId === action.id) {\n            it.like -= 1\n          }\n        })\n        draft.myLikeEndComment[action.id] = false\n      } else {\n        axios.post(`/api/endCommentLike/${action.id}`, {\n          style: 'like',\n          type: 'active',\n        })\n        draft.endCommentList[action.ansCommentId].forEach(it => {\n          if (it.endCommentId === action.id) {\n            it.like += 1\n          }\n        })\n        draft.myLikeEndComment[action.id] = true\n      }\n    })\n  },\n  poorEndComment(state, action) {\n    // debugger\n    return produce(state, draft => {\n      if (draft.myPoorEndComment[action.id]) {\n        axios.post(`/api/endCommentLike/${action.id}`, {\n          style: 'poor',\n          type: 'revoke',\n        })\n        draft.endCommentList[action.ansCommentId].forEach(it => {\n          if (it.endCommentId === action.id) {\n            it.poor -= 1\n          }\n        })\n        draft.myPoorEndComment[action.id] = false\n      } else {\n        axios.post(`/api/endCommentLike/${action.id}`, {\n          style: 'poor',\n          type: 'active',\n        })\n        draft.endCommentList[action.ansCommentId].forEach(it => {\n          if (it.endCommentId === action.id) {\n            it.poor += 1\n          }\n        })\n        draft.myPoorEndComment[action.id] = true\n      }\n    })\n  },\n}\nfunction ansComReducer(state, action) {\n  if (action.type in ansComAction) {\n    return ansComAction[action.type](state, action)\n  }\n  return state\n}\n\n\nexport const ansComStore = createStore(ansComReducer, {\n  ansCommentList: {},\n  endComment: false,\n  endCommentList: {},\n})\n","import React, { createRef } from 'react'\nimport { navStore, signStore } from '../redux/redux'\nimport axios from 'axios'\nimport { withRouter } from 'react-router-dom'\nimport { Link } from \"react-router-dom\"\n// import signStore from '../redux/redux'\nclass Form extends React.Component {\n\n  static footer(props) {\n    let other = (\n      <>\n        <hr className=\"other-hr\" />\n        <div className=\"other-Account\">\n          <span>其他账号登陆</span>\n          <span>广告位招租</span>\n          <span>广告位招租</span>\n        </div>\n      </>\n    )\n    return (\n      <>\n        {props.other && other}\n      </>\n    )\n  }\n\n  constructor(props) {\n    super()\n    this.state = signStore.getState()\n    this.props = props\n\n    this.errRef = createRef()\n  }\n\n  componentDidMount() {\n    window.onclick = () => {\n      this.errRef.current.innerHTML = \"\"\n    }\n  }\n  componentWillUnmount() {\n    window.onclick = null\n  }\n\n  signTo = (e) => {\n    e.preventDefault()\n    let el = e.target\n    if (this.props.form === 'signin') {\n      let form = {\n        name: el.name.value,\n        password: el.password.value,\n        captcha: el.captcha.value,\n      }\n      axios.post('/api/clearCookie')\n      axios.post('/api/login', form)\n        .then(item => {\n          if (item.data === 0) {\n            document.querySelector('.captcha').click()\n            this.errRef.current.innerHTML = '用户名或密码错误，请重新输入'\n          } else if (item.data === 1) {\n            if (window.location.pathname === '/sign') {\n              this.props.history.push(\"/\")\n            } else {\n              navStore.dispatch({\n                type: 'toSign',\n                sign: true,\n              })\n              window.location.replace('')\n            }\n          } else {\n            document.querySelector('.captcha').click()\n            this.errRef.current.innerHTML = '验证码错误，请重新输入'\n          }\n        }).catch(console.log)\n    } else {\n      if (el.password.value !== el.nextPassword.value) {\n        return this.errRef.current.innerHTML = '密码验证失败，请重新输入'\n      }\n      let form = {\n        name: el.name.value.trim(),\n        password: el.password.value.trim(),\n        email: el.email.value.trim(),\n      }\n      if (!form.name || !form.password || !form.email) {\n        return this.errRef.current.innerHTML = '不能输入空，请重新输入'\n      }\n      if (this.props.accQuery) {\n        return this.errRef.current.innerHTML = '用户名已被使用，请重新输入'\n      }\n      if (this.props.emailQuery) {\n        return this.errRef.current.innerHTML = '邮箱已被使用，请重新输入'\n      }\n      // console.log(form)\n      axios.post('/api/sign_up', form)\n        .then(item => {\n          if (item.data) {\n            signStore.dispatch({\n              type: 'sucessSignup',\n              sucessSignup: true\n            })\n\n            setTimeout(() => {\n              let sucess = document.querySelector('.success')\n              sucess.classList.remove('suc-transition')\n            }, 200)\n            setTimeout(() => {\n              let sucess = document.querySelector('.success img')\n              sucess.classList.add('img-cslc')\n              document.querySelector('.success label').classList.remove('label-visi')\n            }, 3000)\n          } else {\n            this.errRef.current.innerHTML = '注册失败，请再次尝试'\n          }\n        }).catch(() => {\n          this.errRef.current.innerHTML = '注册失败，请再次尝试'\n        })\n    }\n  }\n  toSignUp = (e) => {\n    e.preventDefault()\n    signStore.dispatch({\n      type: 'formRedirect',\n      form: 'signup',\n      captcha: false,\n      other: false,\n      protocol: '注册即代表同意《知乎协议》《隐私保护指引》',\n      buttonText: '注册',\n    })\n  }\n  toSignIn = (e) => {\n    e.preventDefault()\n    signStore.dispatch({\n      type: 'formRedirect',\n      form: 'signin',\n      captcha: 2,\n      other: true,\n      protocol: '未注册手机验证后自动登录，注册即代表同意《知乎协议》《隐私保护指引》',\n      buttonText: '登录',\n    })\n  }\n  render() {\n    let props = this.props\n    let children = props.children.props.children\n    return (\n      <>\n        <form action=\"/api/login\" method=\"post\" onSubmit={this.signTo}>\n          {\n            children.filter(it => it.type !== 'div')\n          }\n\n          <div className=\"redirector\">\n            {props.form === 'signin'\n              ? <>\n                <Link to=\"/sign_up\" className=\"zhuce\" onClick={this.toSignUp}>注册新用户</Link>\n                <Link to=\"/lossPas\" className=\"lossPas\">忘记密码？</Link>\n              </>\n              : <Link to=\"/sign\" className=\"zhuce\" onClick={this.toSignIn}>返回登陆界面</Link>\n            }\n          </div>\n          {\n            children.filter(it => it.type === 'div')\n          }\n          <span className={props.form === 'signin' ? \"sub-error\" : \"lossPas sub-error\"} ref={this.errRef}></span>\n          <button type=\"submit\" className=\"submit\" >{props.buttonText}</button>\n          <span className=\"xieyi\">{this.state.protocol}</span>\n        </form>\n        <Form.footer xieyi={props.xieyi} other={props.other} />\n      </>\n    )\n  }\n}\n\nexport default withRouter(Form)\n","import React, { useCallback, useEffect, useState } from 'react'\nimport { signStore } from '../redux/redux'\nimport Form from './form'\nimport axios from 'axios'\n\nexport default function Sign(props) {\n  let [state, setState] = useState(signStore.getState())\n  // let [accValue, setAccValue] = useState('')\n  // let [emailValue, setemailValue] = useState('')\n  let [accQuery, setAccQuery] = useState(false)\n  let [emailQuery, setemailQuery] = useState(false)\n  let formRedirect = useCallback(function (e) {\n    let type = e.target.textContent === '用户登录' ? 'signin' : 'signup'\n    if (type === 'signin') {\n      signStore.dispatch({\n        type: 'formRedirect',\n        form: 'signin',\n        captcha: 2,\n        other: true,\n        protocol: '未注册手机验证后自动登录，注册即代表同意《知乎协议》《隐私保护指引》',\n        buttonText: '登录',\n      })\n    } else {\n      signStore.dispatch({\n        type: 'formRedirect',\n        form: 'signup',\n        captcha: false,\n        other: false,\n        protocol: '注册即代表同意《知乎协议》《隐私保护指引》',\n        buttonText: '注册',\n      })\n    }\n  }, [])\n\n  useEffect(() => {\n    let uns = signStore.subscribe(() => setState(signStore.getState()))\n    return () => uns()\n  }, [])\n  // debugger\n  let switchCaptcha = useCallback(function (e) {\n    let el = e.target\n    el.src = `/api/captcha?t=${Date.now()}`\n  }, [])\n  let accountInput = useCallback((e) => {\n    axios.post('/api/user-query/', { name: e.target.value })\n      .then(res => {\n        if (res.data === 0) {\n          setAccQuery(true)\n        } else {\n          setAccQuery(false)\n        }\n      })\n  }, [])\n  let emailInput = useCallback((e) => {\n    axios.post('/api/email-query/', { email: e.target.value })\n      .then(res => {\n        if (res.data === 0) {\n          setemailQuery(true)\n        } else {\n          setemailQuery(false)\n        }\n      })\n  }, [])\n  return (\n    <div className=\"outer\">\n      <div className=\"form-header\">\n        <label className={state.form === \"signin\" ? 'form-action' : ''} onClick={formRedirect}>\n          用户登录\n        </label>\n        <label className={state.form === \"signup\" ? 'form-action signup-label' : 'signup-label'} onClick={formRedirect}>\n          注册账号\n        </label>\n\n      </div>\n      <hr />\n      <Form captcha={state.captcha} other={state.other} form={state.form} xieyi={state.captcha} buttonText={state.buttonText} accQuery={accQuery} emailQuery={emailQuery}>\n        {\n          state.form === 'signin'\n            ? <div>\n              < input type=\"text\" placeholder=\"请输入登录账号\" className=\"name\" name=\"name\" />\n              < input type=\"password\" placeholder='密码' className=\"password\" name=\"password\" />\n              <div name=\"captcha-div\">\n                < input type=\"text\" placeholder='请输入验证码' className=\"captcha-input\" name=\"captcha\" />\n                <img src={`/api/captcha?t=${Date.now()}`} title=\"点击换一张\" className=\"captcha\" onClick={switchCaptcha} alt=\"captcha\" />\n              </div>\n            </div>\n            : <div>\n              < input type=\"text\" placeholder=\"请输入注册账号\" className=\"name\" name=\"name\" onChange={accountInput} />\n              {accQuery && <label className=\"user-query\"></label>}\n              < input type=\"email\" placeholder='绑定电子邮箱' className=\"email\" name=\"email\" onChange={emailInput} />\n              {emailQuery && <label className=\"email-query\"></label>}\n              < input type=\"password\" placeholder=\"请输入密码\" className=\"password\" name=\"password\" />\n              < input type=\"password\" placeholder='请再次输入密码' className=\"password\" name=\"nextPassword\" />\n            </div>\n        }\n      </Form>\n    </div>\n  )\n}\n","import React, { useCallback, useEffect, useState,Fragment } from 'react'\nimport axios from 'axios'\nimport { HeartOutlined, CommentOutlined, CloseOutlined } from '@ant-design/icons';\nimport { careStore, navStore } from '../redux/redux';\nimport { Input, Button } from 'antd';\nimport moment from 'moment';\nconst { TextArea } = Input;\n\nexport default function (props) {\n  let [careBloon, setCareBl] = useState(false)\n  let { careInfo = {} } = props\n  let [chat, setChat] = useState(false)\n  let [state, setState] = useState(navStore.getState())\n  useEffect(() => {\n    let uns = navStore.subscribe(() => setState(navStore.getState()))\n    return () => uns()\n  }, [])\n  useEffect(() => {\n    if (careBloon) {\n      var recare = document.querySelector('.recare')\n      recare.onmouseenter = () => {\n        recare.childNodes[1].innerText = \"取消\"\n      }\n      recare.onmouseleave = () => {\n        recare.childNodes[1].innerText = \"已关注\"\n      }\n    }\n    return () => {\n      if (careBloon) {\n        recare.onmouseenter = null\n        recare.onmouseleave = null\n      }\n    }\n  }, [careBloon])\n  useEffect(() => {\n    axios.get('/api/care')\n      .then(res => {\n        let data = res.data\n        careStore.dispatch({\n          type: 'getCare',\n          ...data,\n        })\n      }).catch(rej => { })\n\n    let uns = careStore.subscribe(() => {\n      setCareBl(Array.from(careStore.getState().myCares).some(it => it.careId === careInfo.userId))\n    })\n    return () => uns()\n  }, [careInfo])\n  let updateCare = useCallback(() => {\n    if (state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n      return\n    }\n    careStore.dispatch({\n      type: 'updateCare',\n      id: careInfo.userId,\n    })\n\n    axios.post('/api/care', { type: careBloon ? 'reCare' : 'toCare', careId: careInfo.userId })\n      .catch(rej => {\n        if (rej.response.status === 401) {\n          navStore.dispatch({\n            type: 'toSign',\n            sign: false,\n          })\n        }\n      })\n\n  }, [careBloon, careInfo, state])\n  let toChat = useCallback(() => {\n    if (state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n      return\n    }\n    setChat(!chat)\n  }, [chat, state])\n  // useEffect(() => {\n\n  // }, [ws])\n  return (\n    <>\n      <ul className=\"poster-interactive\">\n        {careBloon\n          ? <li onClick={updateCare} className=\"recare\"><HeartOutlined /><span>已关注</span></li>\n          : <li onClick={updateCare}><HeartOutlined /><span>关注他</span></li>\n        }\n        <li onClick={toChat}><CommentOutlined />发私信</li>\n      </ul>\n      { chat && <ChatWindow targetInfo={careInfo} setChat={setChat} state={state} />}\n    </>\n  )\n}\n\n\nexport function ChatWindow({ targetInfo, setChat, state }) {\n  let [value, setValue] = useState('')\n  let [msgList, updateMsg] = useState([])\n  let [ws, setWS] = useState(null)\n\n  useEffect(() => {\n    if (ws === null) {\n      setWS(new WebSocket(`ws://47.111.233.71:8080/targetId=${targetInfo.userId}&&userId=${state.userInfo.userId}`))\n    }\n  }, [targetInfo, state, ws])\n\n  let sendMsg = useCallback(() => {\n    if (value === '') { return }\n    ws.send(JSON.stringify([{\n      content: value,\n      targetName: targetInfo.name,\n      targetId: targetInfo.userId,\n      targetAvatar: targetInfo.avatar\n    }]))\n    setValue('')\n  }, [value, targetInfo, ws])\n  useEffect(() => {\n    if (ws) {\n      ws.onopen = function (msg) {\n        console.log('WebSocket opened!');\n      }\n      ws.onclose = function () {\n        console.log('WebSocket closed!');\n      }\n      ws.onmessage = (event) => {\n        let msg = JSON.parse(event.data)\n        msg = msg.flat()\n        console.log(msg)\n        updateMsg(msg)\n      }\n    }\n  }, [ws])\n  let editInput = useCallback((e) => {\n    setValue(e.target.value)\n  }, [])\n\n  let webClose = useCallback(() => {\n    setChat(false)\n    ws.close()\n  }, [ws, setChat])\n  useEffect(() => {\n    let section = document.querySelector('.chat-section')\n    section.scrollTop = document.querySelector('.chat-section-ul').offsetHeight\n  }, [msgList])\n  let sendEnter = useCallback((e) => {\n    if (!e.shiftKey && e.keyCode === 13) {\n      e.preventDefault()\n      document.querySelector('.chat-edit-footer button').click()\n    }\n  }, [])\n  return (\n    <div className=\"chat-outer\" style={{ width: `${window.innerWidth}px`, height: `${window.innerHeight}px` }}>\n      <div className=\"chat-container\">\n        <div className=\"chat-user-head\">\n          <label onClick={webClose}><CloseOutlined /></label>\n          <h2>{targetInfo.name}</h2>\n        </div>\n        <div className=\"chat-section\">\n          <ul className=\"chat-section-ul\">\n            {msgList.map((it, idx) => {\n              if (it.targetName !== state.cookieUser) {\n                let now = moment(Date.now()).format(\"YY\")\n                let created = moment(it.createdAt * 1).format(\"YY\")\n                return (\n                  <Fragment key={it.createdAt}>\n                    <li className=\"chat-time\">\n                      {(idx === 0 || (it.createdAt - msgList[idx - 1].createdAt >= 180000)) &&\n                        <span >{now * 1 > created * 1\n                          ? moment(it.createdAt * 1).format(\"YY-MM-DD HH:mm:ss\")\n                          : moment(it.createdAt * 1).format(\"MM-DD HH:mm:ss\")\n                        }\n                        </span>\n                      }</li>\n                    <li className=\"chat-section-me\" key={it.createdAt}>\n                      <p className=\"chat-msg-content\">{it.content}</p>\n                      <i style={{ backgroundImage: `url(${it.userAvatar})` }} className=\"chat-msg-avatar\"></i>\n                    </li>\n                  </Fragment>\n                )\n              } else {\n                let now = moment(Date.now()).format(\"YY\")\n                let created = moment(it.createdAt * 1).format(\"YY\")\n                return (\n                  <Fragment key={it.createdAt}>\n                    <li className=\"chat-time\">\n                      {(idx === 0 || (it.createdAt - msgList[idx - 1].createdAt >= 180000)) &&\n                        <span >{now * 1 > created * 1\n                          ? moment(it.createdAt * 1).format(\"YY-MM-DD HH:mm:ss\")\n                          : moment(it.createdAt * 1).format(\"MM-DD HH:mm:ss\")\n                        }\n                        </span>\n                      }</li>\n                    <li className=\"chat-section-target\" key={it.createdAt}>\n                      <i style={{ backgroundImage: `url(${targetInfo.avatar})` }} className=\"chat-msg-avatar\"></i>\n                      <p className=\"chat-msg-content\">{it.content}</p>\n                    </li>\n                  </Fragment>\n                )\n              }\n            })\n            }\n          </ul>\n        </div>\n        <div className=\"chat-footer\">\n          <div className=\"chat-edit\">\n            <TextArea rows={6} value={value} onChange={editInput} onKeyDown={sendEnter} />\n          </div>\n          <div className=\"chat-edit-footer\">\n            <span>按Enter 发送</span>\n            <Button type=\"primary\" onClick={sendMsg}>发送</Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\n\nexport default function Footer(props) {\n  return (\n    <div className={props.type === 'signup' ? 'signup-footer footer' : 'footer'}>\n      <span> © 2020 知乎京 ICP 证 110745 号京 ICP 备 13052560 号 - 1京公网安备 11010802010035 号出版物经营许可证</span>\n      <br />\n      <span>侵权举报网上有害信息举报专区儿童色情信息举报专区违法和不良信息举报：010-82716601 </span>\n    </div>\n  )\n}\n","import React, { useState, useEffect, useCallback } from 'react'\n// import { Form, Input, Button, Checkbox, Space, message } from 'antd'\n// import { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport './signin-component.css'\nimport Footer from './footer'\nimport { signStore } from '../redux/redux'\nimport Sign from './sign'\nimport { Link } from \"react-router-dom\"\n\nexport default function Logup() {\n  let [state, setState] = useState({\n    form: 'signup',\n    captcha: false,\n    other: false,\n    protocol: '注册即代表同意《知乎协议》《隐私保护指引》',\n    buttonText: '注册',\n    sucessSignup: false,\n  })\n  useEffect(() => {\n    let uns = signStore.subscribe(() => setState(signStore.getState()))\n    return () => uns()\n  })\n  return (\n    <div className=\"main\">\n      {state.sucessSignup &&\n        <Success props={state} />\n      }\n      <img src=\"../images/login-top.png\" alt=\"logo\" className=\"logo\" />\n      <Sign state={state} />\n      <Footer type=\"signup\" />\n    </div>\n  )\n}\n\nexport function Success(props) {\n  let toSignin = useCallback((e) => {\n    e.preventDefault()\n    signStore.dispatch({\n      type: 'toSignin',\n      sucessSignup: false\n    })\n  }, [])\n  return (\n    <div className=\"success-bg\">\n      <div className={props.sucessSignup ? \"success\" : 'suc-transition success'}>\n        <img src=\"/images/loading.gif\" alt=\"注册成功\" />\n        <label className=\"label-visi\">\n          <span>注册成功！ </span> 点击 <Link to=\"/sign\" onClick={toSignin}>返回登陆</Link>\n        </label>\n      </div>\n    </div>\n  )\n}\n","import React, { useCallback, Fragment, useEffect, useState } from 'react'\nimport './home-page.css'\nimport { SearchOutlined, BellFilled, MessageFilled, HomeFilled, UserOutlined, FormOutlined, LogoutOutlined, ProjectFilled, HeartFilled, LikeFilled } from '@ant-design/icons'\nimport { homeStore, navStore, signStore, userStore } from '../redux/redux'\nimport axios from 'axios'\nimport { Empty } from 'antd';\nimport { withRouter } from 'react-router-dom'\nimport Sign from './sign'\nimport moment from 'moment';\nimport { ChatWindow } from './care-message'\nimport { Success } from './signup-component'\nimport { Link } from \"react-router-dom\"\n\nfunction useGetInvite() {\n  let [inviteMsg, setInviteMsg] = useState(navStore.getState().invitedList || [])\n  let [byCareMsg, setByCareMsg] = useState(navStore.getState().byCareList || [])\n  let [byCommentMsg, setByCommentMsg] = useState(navStore.getState().byCommentLike || [])\n  let [msgSum, setMsgSum] = useState(0)\n  let [invited, setInvited] = useState(false)\n  useEffect(() => {\n    axios.get('/api/invite')\n      .then(res => {\n        let initial = res.data\n        navStore.dispatch({\n          type: 'getInitial',\n          ...initial,\n        })\n      })\n  }, [])\n  useEffect(() => {\n    let invitedLen = inviteMsg.filter(it => it.status !== 'view').length\n    let careLen = byCareMsg.filter(it => it.status !== 'view').length\n    let commentLen = byCommentMsg.filter(it => it.status !== 'view').length\n    let viewLen = invitedLen + careLen + commentLen\n    setMsgSum(viewLen)\n  }, [inviteMsg, byCareMsg, byCommentMsg])\n\n  useEffect(() => {\n    let uns = navStore.subscribe(() => {\n      setInviteMsg(navStore.getState().invitedList || [])\n      setByCareMsg(navStore.getState().byCareList || [])\n      setByCommentMsg(navStore.getState().byCommentLike || [])\n    })\n\n    return () => uns()\n  }, [])\n  useEffect(() => {\n    let pullUL = document.querySelector('.nav-invited-outer')\n    let clickEvent = (e) => {\n      setInvited(false)\n    }\n    function leaveEvent() {\n      window.addEventListener('click', clickEvent)\n    }\n    function enterEvent() {\n      window.removeEventListener('click', clickEvent)\n    }\n    pullUL.addEventListener('mouseleave', leaveEvent)\n    pullUL.addEventListener('mouseenter', enterEvent)\n\n    return () => {\n      pullUL.removeEventListener('mouseleave', leaveEvent)\n      pullUL.removeEventListener('mouseenter', enterEvent)\n    }\n  }, [])\n  let invitePull = useCallback(([setChat, setHome], e) => {\n    e.stopPropagation()\n    setInvited(!invited)\n    setChat(false)\n    setHome('none')\n    axios.post('/api/clear-invited')\n    setMsgSum(0)\n  }, [invited])\n\n  return { invitePull, inviteMsg, byCareMsg, byCommentMsg, msgSum, invited, setInvited }\n}\n\nfunction useGetChat(state) {\n  let [chat, setChat] = useState(false)\n  let [chatSum, setChatSum] = useState(0)\n  let [chatList, updateChat] = useState(navStore.getState().chatList)\n  useEffect(() => {\n    axios.get('/api/chat-list')\n      .then(res => {\n        let initial = res.data\n        navStore.dispatch({\n          type: 'getInitial',\n          ...initial,\n        })\n      }).catch(err => {\n        console.dir(err)\n      })\n  }, [])\n  useEffect(() => {\n    let uns = navStore.subscribe(() => updateChat(navStore.getState().chatList))\n    return () => uns()\n  }, [])\n  let chatPull = useCallback(([setHome, setInvited], e) => {\n    e.stopPropagation()\n    setHome('none')\n    setChat(!chat)\n    setInvited(false)\n    setChatSum(0)\n  }, [chat])\n  useEffect(() => {\n    if (state.cookieUser) {\n      setChatSum(chatList.flat().filter(it => (it.status === 'normal' && it.userName !== state.cookieUser)).length)\n    }\n  }, [chatList, state])\n  useEffect(() => {\n    let pullUL = document.querySelector('.nav-chat-outer')\n    let clickEvent = (e) => {\n      setChat(false)\n    }\n    function leaveEvent() {\n      window.addEventListener('click', clickEvent)\n    }\n    function enterEvent() {\n      window.removeEventListener('click', clickEvent)\n    }\n    pullUL.addEventListener('mouseleave', leaveEvent)\n    pullUL.addEventListener('mouseenter', enterEvent)\n\n    return () => {\n      pullUL.removeEventListener('mouseleave', leaveEvent)\n      pullUL.removeEventListener('mouseenter', enterEvent)\n    }\n  }, [])\n  return { chat, setChat, chatSum, chatList, chatPull }\n}\nexport default function (props) {\n  let [homeDis, setHome] = useState('none')\n  let [state, setState] = useState(navStore.getState() || {})\n  let { invitePull, inviteMsg, byCareMsg, byCommentMsg, msgSum, invited, setInvited } = useGetInvite()\n  let { chat, chatSum, chatList, chatPull, setChat } = useGetChat(state)\n  let [signState, setSignState] = useState(signStore.getState())\n  useEffect(() => {\n    let signUns = signStore.subscribe(() => setSignState(signStore.getState() || {}))\n    let uns = navStore.subscribe(() => setState(navStore.getState() || {}))\n    return () => {\n      uns()\n      signUns()\n    }\n  }, [])\n  let postQuestion = useCallback(() => {\n    if (state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n      return\n    }\n    homeStore.dispatch({\n      type: 'question',\n      question: true,\n    })\n  }, [state])\n\n  useEffect(() => {\n    axios.get('/api/nav-data')\n      .then(res => {\n        let initial = res.data\n        navStore.dispatch({\n          type: 'getInitial',\n          ...initial,\n        })\n      })\n    let setHomeNone = () => {\n      setHome('none')\n    }\n    window.addEventListener('click', setHomeNone)\n\n    return () => window.removeEventListener('click', setHomeNone)\n  }, [homeDis])\n  useEffect(() => {\n    if (!state.sign) {\n      function clearSignDIV(e) {\n        let FROM_DIV = document.querySelector('.user-not-sign')\n        if (e.target === FROM_DIV) {\n          navStore.dispatch({\n            type: 'toSign',\n            sign: true,\n          })\n        }\n      }\n      window.addEventListener('click', clearSignDIV)\n      return () => window.removeEventListener('click', clearSignDIV)\n    }\n  }, [state])\n  let homeList = useCallback(([setChat, setInvited], e) => {\n    e.stopPropagation()\n    if (homeDis === 'none') {\n      setHome('block')\n    } else {\n      setHome('none')\n    }\n    setChat(false)\n    setInvited(false)\n  }, [homeDis])\n  useEffect(() => {\n    let sliderNav = document.querySelector('.nav-slider-outer')\n    function slider(e) {\n      if (props.page === 'post') {\n        if (document.documentElement.scrollTop < 100) {\n          return\n        }\n      }\n      if (props.page === 'user') {\n        if (document.documentElement.scrollTop < 300) {\n          return\n        }\n      }\n      if (e.wheelDelta > 0) {\n        sliderNav.style.top = '0px'\n      } else {\n        sliderNav.style.top = '-50px'\n      }\n    }\n\n    window.addEventListener('mousewheel', slider)\n    return () => window.removeEventListener('mousewheel', slider)\n  }, [props])\n  return (\n    <>\n      <nav>\n        <div className=\"nav-slider-outer\">\n          <div className=\"top-nav\">\n            <Link to=\"/\" className=\"home-logo\">\n              <img src=\"/images/icon2.jpg\" alt=\"zhi 呼\" />\n            </Link>\n            <ul className=\"home-list\">\n              <li><Link to=\"/\">首页</Link></li>\n              <li><Link to=\"/\">发现</Link></li>\n              <li><Link to=\"/\">等你来答</Link></li>\n            </ul>\n            <div className=\"search-div\">\n              <label className=\"search-label\">\n                <input type=\"search\" name=\"search\" className=\"search\" placeholder=\"功能尚未完善\" />\n                <SearchOutlined style={{ fontSize: '20px', color: '#9AA3B5' }} />\n              </label>\n              <input type=\"button\" className=\"question\" value=\"发帖\" onClick={postQuestion} />\n            </div>\n            <ul className=\"persen-list\">\n              <li >\n                <BellFilled style={{ fontSize: \"22px\" }} onClick={(e) => invitePull([setChat, setHome], e)} />\n                {msgSum !== 0 &&\n                  <label className=\"nav-message-icon\" onClick={(e) => invitePull([setChat, setHome], e)}>{msgSum}</label>\n                }\n\n              </li>\n              <li>\n                <MessageFilled style={{ fontSize: \"20px\" }} onClick={(e) => chatPull([setHome, setInvited], e)} />\n                {chatSum !== 0 &&\n                  <label className=\"nav-message-icon\" onClick={(e) => chatPull([setHome, setInvited], e)}>{chatSum}</label>\n                }\n              </li>\n              <li onClick={(e) => homeList([setChat, setInvited], e)}><HomeFilled style={{ fontSize: \"20px\" }} /></li>\n            </ul>\n          </div>\n          {props.children}\n        </div>\n      </nav>\n      <div className=\"nav-pull-container\">\n        <MessageItem inviteMsg={inviteMsg} byCareMsg={byCareMsg} byCommentMsg={byCommentMsg} className={invited ? '' : 'nav-message-hidden'} />\n        <ChatComponent className={chat ? '' : 'nav-message-hidden'} chatList={chatList} />\n        <PullDown display={homeDis} />\n        {!state.sign && <div className=\"user-not-sign\"><Sign /></div>}\n        {signState.sucessSignup &&\n          <Success props={signState} />\n        }\n      </div>\n    </>\n  )\n}\nfunction PullList(props) {\n  let [cookie, setCookie] = useState(navStore.getState().cookieUser)\n  let [state, setState] = useState(navStore.getState().userInfo || {})\n  useEffect(() => {\n    let uns = navStore.subscribe(() => {\n      setState(navStore.getState().userInfo || {})\n      setCookie(navStore.getState().cookieUser)\n    })\n\n    return () => uns()\n  }, [])\n  let sign_out = useCallback(() => {\n    axios.post('/api/clearCookie/')\n  }, [])\n\n  let toEditpage = useCallback(() => {\n    if (cookie === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n    } else {\n      props.history.push(`/user/${state.userId}`)\n      userStore.dispatch({\n        type: 'editState',\n        edit: true,\n      })\n    }\n  }, [state, cookie, props.history])\n  let myHome = useCallback(() => {\n    if (cookie === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n    } else {\n      props.history.push(`/user/${state.userId}`)\n    }\n  }, [state, cookie, props.history])\n\n  return (\n    <div className=\"pull-down\" style={{ display: props.display }}>\n      <span className=\"flag\"><i></i></span>\n      <ul className=\"home-pull\">\n        <li onClick={myHome}><UserOutlined />我的首页</li>\n        <li onClick={toEditpage}><FormOutlined />编辑资料</li>\n        <li onClick={sign_out}><Link to='/sign'><LogoutOutlined />退出登陆</Link></li>\n      </ul>\n    </div>\n  )\n}\nlet PullDown = withRouter(PullList)\n\n\nfunction MessageItem({ inviteMsg, byCareMsg, byCommentMsg, className }) {\n  let [active, setActive] = useState(0)\n  let MessageList = [inviteMsg, byCareMsg, byCommentMsg][active]\n  let [scroll, setScroll] = useState(false)\n  useEffect(() => {\n    let listUl = document.querySelector('.nav-invited-list')\n    if (listUl.offsetHeight >= 430) {\n      setScroll(true)\n    }\n  }, [active])\n  return (\n    <div className={`nav-invited-outer ${className}`}>\n      <span className=\"flag\"><i></i></span>\n      <div className=\"nav-invited-head\">\n        <ul>\n          <li onClick={() => setActive(0)}><ProjectFilled className={active === 0 ? 'active-msgList' : ''} /></li>\n          <li onClick={() => setActive(1)}><HeartFilled className={active === 1 ? 'active-msgList' : ''} /></li>\n          <li onClick={() => setActive(2)}><LikeFilled className={active === 2 ? 'active-msgList' : ''} /></li>\n        </ul>\n      </div>\n      <ul className={scroll ? \"nav-invited-list nav-invited-scroll\" : 'nav-invited-list'}>\n        {active === 1 && <div className=\"msgList-care-head\"><span>最近这些人关注了你</span></div>}\n        {MessageList.length !== 0 && MessageList.map((it, idx) => {\n          return (\n            <Fragment key={idx}>\n              {active === 0 && <InvitedItem item={it} />}\n              {active === 1 && <CareItem item={it} />}\n              {active === 2 && <CommentLikeItem item={it} />}\n            </Fragment>\n          )\n        })\n        }\n        {MessageList.length === 0 &&\n          <li className=\"nav-invited-item\">\n            <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description=\"还没有新的动态哦！\" />\n          </li>\n        }\n      </ul>\n    </div>\n  )\n}\nfunction InvitedItem({ item }) {\n  return (\n    <li className=\"nav-invited-item\" key={item.createdAt}>\n      <Link to={`/user/${item.userId}`}>{item.userName}</Link>\n      <span>&nbsp;邀请您回答问题&nbsp;</span>\n      <Link to={`/post-page/${item.postId}`}>{item.title}</Link>\n    </li>\n  )\n}\nfunction CareItem({ item }) {\n  return (\n    <li className=\"nav-cares-item\" key={item.createdAt}>\n      <Link to={`/user/${item.userId}`}>\n        <i style={{ backgroundImage: `url(${item.avatar})` }} className=\"msgList-care-avatar\"></i>\n        <div>\n          <h4>{item.name}</h4>\n          <span>{item.sign}</span>\n        </div>\n      </Link>\n    </li>\n  )\n}\n\nfunction CommentLikeItem({ item }) {\n  let TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\n  let TIME_CONTENT = parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ? moment(item.createdAt * 1).format(\"MM-DD HH:mm\") : TIME\n  return (\n    <li className=\"nav-invited-item\" key={item.createdAt}>\n      <Link to={`/user/${item.userId}`}>{item.userName}</Link>\n      <span>&nbsp;点赞了您的回答:&nbsp;<span className=\"nav-comment-item-time\">{TIME_CONTENT}</span></span>\n      <Link to={`/post-page/${item.postId}`} className=\"nav-comment-item-content\" >{item.content}</Link>\n      <Link to={`/post-page/${item.postId}`} className=\"nav-comment-item-title\" title={item.title}>{item.title}</Link>\n    </li>\n  )\n}\n\nfunction ChatComponent({ className, chatList }) {\n  let [active, setActive] = useState(0)\n  let [cares, setCare] = useState(navStore.getState().cares || {})\n  let [openChat, setOpenChat] = useState(false)\n  let [state, setState] = useState(navStore.getState())\n  let [targetInfo, setTargetInfo] = useState({})\n  let [headLabelCare, setHeadLabelCare] = useState(false)\n  let [headLabelOther, setHeadLabelOther] = useState(false)\n  useEffect(() => {\n    let uns = navStore.subscribe(() => {\n      setState(navStore.getState())\n      setCare(navStore.getState().cares)\n    })\n    return () => uns()\n  }, [])\n  let careChat = chatList.filter(it => {\n    if (it[0].userName === state.cookieUser) {\n      return cares[it[0].targetId]\n    } else {\n      return cares[it[0].userId]\n    }\n  })\n  let strangerChat = chatList.filter(it => {\n    if (it[0].userName === state.cookieUser) {\n      return !cares[it[0].targetId]\n    } else {\n      return !cares[it[0].userId]\n    }\n  })\n  let openChatWindow = useCallback((item, setUnread, targetInfo) => {\n    setOpenChat(!openChat)\n    setTargetInfo(targetInfo)\n    axios.post('/api/clear-chat', { targetName: item.name })\n    setUnread(0)\n  }, [openChat])\n  useEffect(() => {\n    if (!openChat) {\n      axios.get('/api/chat-list').then(res => {\n        let initial = res.data\n        navStore.dispatch({\n          type: 'getInitial',\n          ...initial,\n        })\n      })\n    }\n  }, [openChat])\n  useEffect(() => {\n    //可优化\n    if (!state.cookieUser) return\n    let careCount = 0\n    careChat.forEach(it => {\n      let count = it.filter(item => item.status === 'normal' && item.userName !== state.cookieUser)\n      careCount += count.length\n    })\n    if (careCount) {\n      setHeadLabelCare(true)\n    } else {\n      setHeadLabelCare(false)\n    }\n    let otherCount = 0\n    strangerChat.forEach(it => {\n      let count = it.filter(item => {\n        return item.status === 'normal' && item.userName !== state.cookieUser\n      })\n      otherCount += count.length\n    })\n    if (otherCount) {\n      setHeadLabelOther(true)\n    } else {\n      setHeadLabelOther(false)\n    }\n  }, [careChat, strangerChat, state])\n  return (\n    <div className={`nav-invited-outer ${className} nav-chat-outer`}>\n      <span className=\"flag\"><i></i></span>\n      <div className=\"nav-invited-head\">\n        <ul className=\"nav-chat-head\">\n          <li onClick={() => setActive(0)} className={active === 0 ? 'nav-chat-active' : 'nav-chat'}><span>最近联系</span>{headLabelCare && <label className=\"chat-head-label\"></label>}</li>\n          <li onClick={() => setActive(1)} className={active === 1 ? 'nav-chat-active' : 'nav-chat'}><span>陌生人私信</span>{headLabelOther && <label className=\"chat-head-label\"></label>}</li>\n        </ul>\n      </div>\n      <ul className={'nav-chat-list nav-invited-list'}>\n        {active === 0 && careChat.length !== 0 && careChat.map(it => {\n          let unread = it.filter(it => it.status === 'normal' && it.userName !== state.cookieUser).length\n          let targetId\n          // = it.filter(it => it.targetName === state.cookieUser)[0]\n          if (it[0].targetName === state.cookieUser) {\n            targetId = it[0].userId\n          } else {\n            targetId = it[0].targetId\n          }\n          return (\n            <Fragment key={it[0].createdAt} >\n              {<CareChat item={it[0]} targetId={targetId} unread={unread} onClick={openChatWindow} />}\n            </Fragment >\n          )\n        })\n        }\n        {active === 1 && strangerChat.length !== 0 && strangerChat.map(it => {\n          let unread = it.filter(it => it.status === 'normal' && it.userName !== state.cookieUser).length\n          let targetId\n          // = it.filter(it => it.targetName === state.cookieUser)[0]\n          if (it[0].targetName === state.cookieUser) {\n            targetId = it[0].userId\n          } else {\n            targetId = it[0].targetId\n          }\n          return (\n            <Fragment key={it[0].createdAt}>\n              {<StrangerChat item={it[0]} unread={unread} targetId={targetId} onClick={openChatWindow} />}\n            </Fragment >\n          )\n        })\n        }\n        {((strangerChat.length === 0 && active === 1) || (careChat.length === 0 && active === 0)) &&\n          <li className=\"nav-invited-item\">\n            <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description=\"还没有私信哦！\" />\n          </li>\n        }\n      </ul>\n      {openChat && <ChatWindow targetInfo={targetInfo} state={state} setChat={setOpenChat} />}\n    </div>\n  )\n}\n\nfunction CareChat({ item, unread, onClick, targetId }) {\n  let avatar = item.userId === targetId ? item.userAvatar : item.targetAvatar\n  let name = item.userId === targetId ? item.userName : item.targetName\n  let [notRead, setUnread] = useState(unread)\n  let [targetInfo, setTargetInfo] = useState({})\n  useEffect(() => {\n    axios.post('/api/userInfo-serach', { id: targetId })\n      .then(res => {\n        setTargetInfo(res.data.userInfo)\n      })\n  }, [targetId])\n  return (\n    <>\n      <li className=\"nav-chat-item\" key={item.createdAt} onClick={() => onClick(targetInfo, setUnread, targetInfo)}>\n        {notRead !== 0 &&\n          <label className=\"nav-message-icon chat-unred\">{notRead}</label>\n        }\n        <div>\n          <i style={{ backgroundImage: `url(${avatar})` }} className=\"msgList-care-avatar\"></i>\n          <div>\n            <h4>{name}</h4>\n            <span>{item.content}</span>\n          </div>\n        </div>\n      </li>\n\n    </>\n  )\n}\nfunction StrangerChat({ item, unread, onClick, targetId }) {\n  let avatar = item.userId === targetId ? item.userAvatar : item.targetAvatar\n  let name = item.userId === targetId ? item.userName : item.targetName\n  let [notRead, setUnread] = useState(unread)\n  let [targetInfo, setTargetInfo] = useState({})\n  useEffect(() => {\n    axios.post('/api/userInfo-serach', { id: targetId })\n      .then(res => {\n        setTargetInfo(res.data.userInfo)\n      })\n  }, [targetId])\n  return (\n    <li className=\"nav-chat-item\" key={item.createdAt} onClick={() => onClick(targetInfo, setUnread, targetInfo)}>\n      {notRead !== 0 &&\n        <label className=\"nav-message-icon chat-unred\">{notRead}</label>\n      }\n      <div>\n        <i style={{ backgroundImage: `url(${avatar})` }} className=\"msgList-care-avatar\"></i>\n        <div>\n          <h4>{name}</h4>\n          <span>{item.content}</span>\n        </div>\n      </div>\n    </li>\n  )\n}\n","import React, { Component, useState, useRef, useEffect } from 'react';\nimport E from 'wangeditor'   // 引用\n\nexport default function Editor(props) {\n  let { setEditValue } = props\n  // let [state, setState] = useState()\n  let editorEl = useRef()\n  let submit = useRef()\n  let [editor, setEditor] = useState({})\n  editor.txt = editor.txt || {}\n  useEffect(() => {\n    const elem = editorEl.current\n    const sub = submit.current\n    const editor = new E(elem)\n    setEditor(editor)\n    editor.config.placeholder = 'write something...'\n    // editor.config.focus = false //是否获取焦点\n    // editor.highlight = hljs\n    editor.config.onchange = function (newHtml) {\n      setEditValue({ html: newHtml, text: editor.txt.text() })\n      // console.log(editor.txt.text())\n      // console.log('change 之后最新的 html', newHtml)\n    }\n    editor.config.onchangeTimeout = 1000 // 修改为 500ms\n    editor.config.pasteFilterStyle = true\n    editor.config.uploadFileName = 'upImage' //置上传接口的文本流字段\n\n    editor.config.uploadImgServer = '/api/edit-Image'//服务器接口地址\n    editor.create()\n\n    return () => {\n      editor.destroy()\n    }\n  }, [])\n\n  return (\n    <div >\n      <div ref={editorEl}>\n      </div>\n      {/* <button ref={submit} onClick={postmesg}>submit</button> */}\n    </div>\n  )\n}\n","import React, { useCallback, useState } from 'react'\nimport './question.css'\nimport { homeStore, navStore } from '../redux/redux'\nimport axios from 'axios'\nimport Editor from './editor'\n\nexport default function () {\n  let [value, setValue] = useState({ html: '', text: '' })\n  let submitQus = useCallback(() => {\n    // let postContent = document.querySelector('.neirong').value\n    let postTitle = document.querySelector('#fileName').value\n    let post = {\n      title: postTitle,\n      content: JSON.stringify(value)\n    }\n    if (post.title.trim() === '' || post.content.trim() === '') {\n      return\n    }\n    axios.post('/api/home_Page/', post)\n      .then(res => {\n        homeStore.dispatch({\n          type: 'postQuestion',\n          question: false,\n          postCount: res.data.postCount,\n          posts: res.data.posts,\n        })\n      }).catch(rej => {\n        if (rej.response.status === 401) {\n          navStore.dispatch({\n            type: 'toSign',\n            sign: false,\n          })\n          homeStore.dispatch({\n            type: 'question',\n            question: false,\n          })\n        }\n      })\n\n  }, [value])\n  let closeQUs = useCallback(() => {\n    homeStore.dispatch({\n      type: 'question',\n      question: false,\n    })\n  }, [])\n  return (\n    <>\n      <label className=\"clear-qus\" onClick={closeQUs}>x</label>\n      <div id=\"questionDiv\">\n        <div className=\"question-outer\">\n          <div className=\"header\">\n            <input type=\"text\" id=\"fileName\" placeholder=\"请输入标题\" name=\"title\" />\n          </div>\n          <section>\n            <Editor setEditValue={setValue} />\n            {/* <textarea className=\"neirong\" contentEditable name=\"content\"></textarea> */}\n          </section>\n          <label className=\"qst-submit\" onClick={submitQus}>发布问题</label>\n        </div>\n      </div>\n    </>\n  )\n}\n","import React, { useCallback, useState } from 'react'\nimport moment from 'moment';\nimport axios from 'axios'\nimport { Comment, Form, Button, Input } from 'antd';\nimport { ansComStore, navStore } from '../redux/redux';\nimport { DislikeFilled, MessageFilled, LikeFilled, } from '@ant-design/icons';\nimport { Link } from \"react-router-dom\"\nconst { TextArea } = Input;\n\n\nexport default function () {\n  return (\n    <div></div>\n  )\n}\n\nexport function EndCommentList({ item, commentId, state, ansCommentId }) {\n  let { myLikeEndComment = {}, myPoorEndComment = {} } = state\n  let [value, setValue] = useState('')\n  let [endComment, setEndComment] = useState(false)\n\n  let id = item.endCommentId\n  let inputComment = useCallback((e) => {\n    setValue(e.target.value)\n  }, [])\n\n  let sendComment = useCallback(() => {\n    setEndComment(!endComment)\n  }, [endComment])\n  let likeORpoor = useCallback((t) => {\n    if (t === '赞') {\n      ansComStore.dispatch({\n        type: 'likeEndComment',\n        id: id,\n        ansCommentId: item.ansCommentId\n      })\n    } else {\n      ansComStore.dispatch({\n        type: 'poorEndComment',\n        id: id,\n        ansCommentId: item.ansCommentId\n      })\n    }\n  }, [id, item])\n  let toSendEndComment = useCallback(() => {\n    if (state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n      return\n    }\n    if (value.trim() === '') { return }\n    axios.post(`/api/endComment/${ansCommentId}`, {\n      content: value,\n      targetUserId: item.userId,\n      commentId: commentId\n    })\n      .then(res => {\n        ansComStore.dispatch({\n          type: 'postEndComment',\n          id: ansCommentId,\n          newList: res.data.newEndCommentList,\n        })\n      })\n    setValue('')\n  }, [ansCommentId, value, item, commentId, state])\n  let action = (\n    <>\n      <ul className=\"ansComment-action\">\n        <li onClick={() => likeORpoor('赞')} className={myLikeEndComment[id] ? 'activeAnsComment' : ''}><LikeFilled /> {item.like}</li>\n        <li onClick={() => likeORpoor('踩')} className={myPoorEndComment[id] ? 'activeAnsComment' : ''}><DislikeFilled /> 踩</li>\n        <li onClick={sendComment}><MessageFilled /> {endComment ? '取消回复' : '回复'}</li>\n      </ul>\n      {endComment &&\n        <Form.Item>\n          <TextArea autoSize={true} placeholder={' 回复 ' + item.name} className=\"endComment\" style={{ width: '490px', marginRight: '15px' }} onInput={inputComment} value={value} />\n          <Button htmlType=\"submit\" type=\"primary\" onClick={toSendEndComment}>\n            发送\n          </Button>\n        </Form.Item>\n      }\n    </>\n  )\n  let author = (\n    <div className=\"ansComment-header\">\n      <i style={{ backgroundImage: `url(${item.avatar})` }} className=\"endComment-avatar\"></i>\n      <Link to={`/user/${item.userId}`}>{item.name}{item.userId === commentId ? '(作者)' : ''}</Link>\n      &nbsp;&nbsp;回复&nbsp;&nbsp;\n      <Link to={`/user/${item.targetUserId}`}>{item.targetName}{item.targetUserId === commentId ? '(作者)' : ''}</Link>\n    </div>\n  )\n  let TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\n  return (\n    <Comment actions={[action]} author={[author]} datetime={\n      parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\n        moment(item.createdAt * 1).format(\"MM-DD HH:mm:ss\")\n        : TIME\n    } content={<p>{item.content}</p>}>\n    </Comment>\n  )\n}\n","import React, { Fragment, useCallback, useEffect, useState } from 'react'\nimport moment from 'moment';\nimport axios from 'axios'\nimport { Comment, Form, Button, Input } from 'antd';\nimport { ansComStore, navStore, pageStore } from '../redux/redux';\nimport { DislikeFilled, WechatFilled, MessageFilled, LikeFilled, } from '@ant-design/icons';\nimport { EndCommentList } from './endComment'\nimport { Link } from \"react-router-dom\"\nconst { TextArea } = Input;\n\n// import { useParams } from 'react-router-dom'\n\nexport default function (props) {\n  let id = props.id\n  let [state, setState] = useState({ ansCommentList: [] })\n  useEffect(() => {\n    axios.get(`/api/ansComment/${id}`)\n      .then(res => {\n        let initial = res.data\n        ansComStore.dispatch({\n          type: 'getInitial',\n          id: id,\n          ansCommentList: initial.ansCommentList,\n          myLikeAnsComment: initial.myLikeAnsComment,\n          myPoorAnsComment: initial.myPoorAnsComment,\n          cookieUser: initial.cookieUser,\n        })\n      })\n  }, [id])\n  let ansCommentList = state.ansCommentList[id] || []\n  useEffect(() => {\n    let uns = ansComStore.subscribe(() => setState(ansComStore.getState()))\n    return () => uns()\n  }, [])\n\n  return (\n    <div className=\"ansComment-outer\">\n      <div className=\"ansComment-head\" ><h4>{ansCommentList.length} 条评论</h4></div>\n      <ul className=\"ansComment-container\">\n        {ansCommentList.map((item, idx) => {\n          return (\n            <Fragment key={idx}>\n              <CommentAns item={item} state={state} />\n            </Fragment>\n          )\n        })\n        }\n      </ul>\n      <div className=\"ansComment-put\">\n        <AnsComment state={state} id={id} />\n      </div>\n    </div>\n  )\n}\n\nfunction CommentAns(props) {\n  let item = props.item\n  let id = item.ansCommentId\n  let { myLikeAnsComment = {}, myPoorAnsComment = {} } = props.state\n  let [endComment, setEndComment] = useState(false)\n  let [value, setValue] = useState('')\n  let [allView, setAllView] = useState(false)\n  let [hide, setHide] = useState(true)\n  let [endCommentList, updateEndCommentList] = useState(props.state.endCommentList[id] || [])\n  let [commentIcon, setCommIcon] = useState(false)\n  useEffect(() => {\n    if (item.endComment > 0) {\n      setCommIcon(true)\n    } else {\n      setCommIcon(false)\n    }\n  }, [item])\n  useEffect(() => {\n    let uns = ansComStore.subscribe(() => {\n      let newData = ansComStore.getState().endCommentList[id]\n      updateEndCommentList(newData)\n      return () => uns()\n    })\n  }, [id])\n\n  let inputComment = useCallback((e) => {\n    setValue(e.target.value)\n  }, [])\n  useEffect(() => {\n    axios.get(`/api/endComment/${id}`)\n      .then(res => {\n        let initial = res.data\n        ansComStore.dispatch({\n          type: 'getEndCommentList',\n          id: id,\n          endCommentList: initial.endCommentList,\n          myLikeEndComment: initial.myLikeEndComment,\n          myPoorEndComment: initial.myPoorEndComment,\n          cookieUser: initial.cookieUser,\n        })\n      })\n  }, [id])\n  let likeORpoor = useCallback((t) => {\n    if (t === '赞') {\n      ansComStore.dispatch({\n        type: 'likeAnsComment',\n        id: id,\n        commentId: item.commentId\n      })\n    } else {\n      ansComStore.dispatch({\n        type: 'poorAnsComment',\n        id: id,\n        commentId: item.commentId\n      })\n    }\n  }, [id, item])\n  let sendComment = useCallback(() => {\n    setEndComment(!endComment)\n  }, [endComment])\n  let toSendEndComment = useCallback(() => {\n    if (props.state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n      return\n    }\n    if (value.trim() === '') { return }\n    axios.post(`/api/endComment/${id}`, {\n      content: value,\n      targetUserId: item.userId,\n      commentId: item.commentId\n    })\n      .then(res => {\n        ansComStore.dispatch({\n          type: 'postEndComment',\n          id: id,\n          newList: res.data.newEndCommentList,\n          commentId: item.commentId,\n        })\n        setHide(false)\n        setAllView(true)\n      })\n\n    setValue('')\n  }, [id, value, props, item])\n  let hideORview = useCallback(() => {\n    setHide(!hide)\n    if (hide === true) {\n      setAllView(false)\n    }\n  }, [hide])\n  let action = (\n    <>\n      <ul className=\"ansComment-action\">\n        <li onClick={() => likeORpoor('赞')} className={myLikeAnsComment[id] ? 'activeAnsComment' : ''}><LikeFilled /> {item.like}</li>\n        <li onClick={() => likeORpoor('踩')} className={myPoorAnsComment[id] ? 'activeAnsComment' : ''}><DislikeFilled /> 踩</li>\n        {commentIcon &&\n          <li onClick={hideORview} ><WechatFilled />{hide ? ' 查看回复' : ' 隐藏回复'} </li>\n        }\n        <li onClick={sendComment}><MessageFilled /> {endComment ? '取消回复' : '回复'}</li>\n      </ul>\n      {endComment &&\n        <Form.Item>\n          <TextArea autoSize={true} placeholder={' 回复 ' + item.name} className=\"endComment\" style={{ width: '535px', marginRight: '15px' }} onInput={inputComment} value={value} />\n          <Button htmlType=\"submit\" type=\"primary\" onClick={toSendEndComment}>\n            发送\n          </Button>\n        </Form.Item>\n      }\n    </>\n  )\n  let author = (\n    <div className=\"ansComment-header\">\n      <i className=\"endComment-avatar\" style={{ backgroundImage: `url(${item.avatar})` }}></i>\n      <Link to={`/user/${item.userId}`}>{item.name}{item.userId === item.commentId ? '(作者)' : ''}</Link>\n    </div>\n  )\n  let TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\n\n  return (\n    <>\n      <Comment actions={[action]} author={[author]} datetime={\n        parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\n          moment(item.createdAt * 1).format(\"MM-DD HH:mm:ss\")\n          : TIME\n      } content={<p>{item.content}</p>}>\n        {!hide &&\n          <>\n            {!allView && endCommentList.slice(0, 2).map(it => {\n              return (<EndCommentList item={it} commentId={item.commentId} state={props.state} ansCommentId={id} />)\n            })}\n            {endCommentList.length > 2 && <span className=\"all-endComment\" onClick={() => setAllView(true)} style={{ display: allView ? 'none' : 'block' }}>查看全部{endCommentList.length}条回复</span>}\n            {allView &&\n              endCommentList.map(it => {\n                return (<EndCommentList item={it} commentId={item.commentId} state={props.state} ansCommentId={id} />)\n              })\n            }\n          </>\n        }\n      </Comment>\n    </>\n  )\n}\nfunction AnsComment(props) {\n  let id = props.id\n  let [value, setValue] = useState('')\n  let inputComment = useCallback((e) => {\n    setValue(e.target.value)\n  }, [])\n  let postComment = useCallback(() => {\n    if (props.state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n      return\n    }\n    if (value.trim() === '') { return }\n    axios.post(`/api/ansComment/${id}`, {\n      content: value,\n    })\n      .then(res => {\n        ansComStore.dispatch({\n          type: 'postComment',\n          id: id,\n          newList: res.data.newAnsCommentList,\n        })\n        pageStore.dispatch({\n          type: 'ansCommentList',\n          id: id,\n        })\n        setValue('')\n      })\n  }, [id, value, props])\n  return (\n    <>\n      <Form.Item>\n        <TextArea rows={2} placeholder=\"请输入评论内容\" onInput={inputComment} value={value} />\n      </Form.Item>\n      <Form.Item>\n        <Button htmlType=\"submit\" type=\"primary\" onClick={postComment}>\n          添加评论\n      </Button>\n      </Form.Item>\n    </>\n  )\n}\n\n\n\n","import React, { useCallback, useEffect, useState } from 'react'\n// import axios from 'axios'\nimport { homeStore, pageStore, navStore } from '../redux/redux'\nimport { CaretUpFilled, CaretDownFilled, DownOutlined, UpOutlined, MessageFilled, StarFilled, HeartFilled } from '@ant-design/icons'\nimport AnsCommentList from './ansComment'\n\n//首页\nfunction useSelectState(props) {\n  let ques = props.type === 'question'\n\n  let [post, setPost] = useState(props.post || props.comment)\n  let postId = ques ? post.postId : post.commentId\n  // let post = props.post\n  let [active, setActive] = useState()\n  let [poorActive, setPoor] = useState()\n  let [collectActive, setCollect] = useState()\n  let [favoriteActive, setFavorite] = useState()\n  useEffect(() => {\n    //首页\n    if (ques) {\n      setActive(props.state.attention[postId])\n      setPoor(props.state.poors[postId])\n      setCollect(props.state.collect_quesActive[postId])\n      setFavorite(props.state.favoriteQues[postId])\n      let homeUns = homeStore.subscribe(() => {\n        let newPost = homeStore.getState().posts.find(it => it.postId === postId)\n        setPost(newPost)\n      })\n      return () => homeUns()\n\n    } else {\n      //post-page\n      setActive(props.state.likes[postId])\n      setPoor(props.state.commentPoors[postId])\n      setCollect(props.state.collect_commActive[postId])\n      setFavorite(props.state.favoriteComment[postId])\n\n      let postUns = pageStore.subscribe(() => {\n        let newComment = pageStore.getState().commenterInfo.find(it => it.commentId === postId)\n        setPost(newComment || {})\n      })\n      return () => postUns()\n    }\n\n  }, [postId, ques, props])\n  //home\n  let toAttention = useCallback(() => {\n    if (props.state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n    } else {\n      homeStore.dispatch({\n        type: 'toAttention',\n        postId,\n        like: post.qusLike,\n      })\n    }\n  }, [post, postId, props])\n\n  let poorButton = useCallback(() => {\n    if (props.state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n    } else {\n      if (ques) {\n        homeStore.dispatch({\n          type: 'poorButton',\n          postId: postId,\n          poor: post.poor,\n        })\n      } else {\n        pageStore.dispatch({\n          type: 'poorButton',\n          commentId: postId,\n          poor: post.poor,\n        })\n      }\n    }\n  }, [postId, post, ques, props])\n\n  //page\n  let likeComment = useCallback(() => {\n    if (props.state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n    } else {\n      pageStore.dispatch({\n        type: 'likeComment',\n        commentId: postId,\n        like: post.like,\n      })\n    }\n  }, [post, postId, props])\n\n  let getCollect = useCallback(() => {\n    if (props.state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n    } else {\n      if (ques) {\n        homeStore.dispatch({\n          type: 'collect',\n          collectId: postId,\n          id: post.posterId\n        })\n      } else {\n        pageStore.dispatch({\n          type: 'collect',\n          collectId: postId,\n          id: post.commenterId\n        })\n      }\n    }\n  }, [ques, post, props, postId])\n  let getFavorite = useCallback(() => {\n    if (props.state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n    } else {\n      if (ques) {\n        homeStore.dispatch({\n          type: 'favorite',\n          favoriteId: postId,\n          id: post.posterId\n        })\n      } else {\n        pageStore.dispatch({\n          type: 'favorite',\n          favoriteId: postId,\n          id: post.commenterId\n        })\n      }\n    }\n  }, [ques, post, props, postId])\n\n  return { post, active, poorActive, toAttention, poorButton, likeComment, getCollect, collectActive, getFavorite, favoriteActive }\n}\n\nexport default function PostsFooter(props) {\n  let { footer } = props\n  let idx = props.idx\n  let ques = props.type === 'question'\n  let { post = {}, active, poorActive, toAttention, likeComment, poorButton, getCollect, collectActive, getFavorite, favoriteActive } = useSelectState(props)\n\n  let [fold, setFold] = useState(true)  // 收起展开\n  let [hide, setHide] = useState(false)  // 显示/隐藏按钮\n  useEffect(() => {\n    let span = document.querySelectorAll('[name=\"content\"]> p >span')\n    // if (span[idx]) console.log(span[idx].getBoundingClientRect().height)\n    if (span[idx] && span[idx].getBoundingClientRect().height > 50) {\n      let p = document.querySelectorAll('[name=\"content\"] >p')[idx]\n      p.classList.add('flodContent')\n      p.style.height = ques ? '3.2em' : '2.68em'\n      setHide(true)\n    }\n  }, [idx, ques, footer])\n\n  let foldContent = useCallback(() => {\n    let p = document.querySelectorAll('[name=\"content\"] >p')[idx]\n    let arr = Array.from(p.classList)\n    let span = document.querySelectorAll('[name=\"content\"] >p >span')\n    if (!arr.includes('flodContent')) {\n      p.classList.add('flodContent')\n      p.style.height = ques ? '3.2em' : '2.68em'\n      setFold(true)\n    } else {\n      p.classList.remove('flodContent')\n      p.style.height = span[idx].getBoundingClientRect().height + 5 + \"px\"\n      setFold(false)\n    }\n  }, [idx])\n\n  let [ansComment, setAnsComment] = useState(false)\n  let ansCommentflad = useCallback(() => {\n    setAnsComment(!ansComment)\n  }, [ansComment])\n  return (\n    <>\n      <div className=\"postsfooter\">\n        <button type=\"button\" className={active ? 'likeActive' : ''} onClick={ques ? toAttention : likeComment} ><CaretUpFilled /> {ques ? `关注 ${post.qusLike}` : `赞同 ${post.like}`} </button>\n        <button type=\"button\" className={poorActive ? 'likeActive' : ''} onClick={poorButton}><CaretDownFilled />{ques ? ` 踩 ${post.poor}` : ` 反对 ${post.poor}`}</button>\n        <ul>\n          <li onClick={ansCommentflad}><MessageFilled /> {ques ? `${props.post.answerCount} 条回答` : ansComment ? '收起评论' : `${props.comment.ansComments} 条评论`}</li>\n          <li onClick={getCollect}><StarFilled />{collectActive ? '已收藏' : ' 收藏'} </li>\n          <li onClick={getFavorite}><HeartFilled />{favoriteActive ? ' 已喜欢' : ' 喜欢'} </li>\n        </ul>\n        {hide && <>\n          {fold\n            ? <span onClick={foldContent}>全部展开 <DownOutlined /></span>\n            : <span onClick={foldContent}>收起 <UpOutlined /></span>\n          }</>\n        }\n      </div>\n      {ansComment && !ques && <AnsCommentList id={post.commentId} />}\n    </>\n  )\n}\n\n\n\n/*\nexport default function PostsFooter(props) {\n  let idx = props.idx\n  let ques = props.type === 'question'\n  let postId = ques ? props.post.postId : props.comment.commentId\n  let [postLike, setPost] = useState({})\n  let [active, setActive] = useState()\n  let [poorActive, setPoor] = useState()\n  let [fold, setFold] = useState(true)\n  let [hide, setHide] = useState(false)\n  // let [like,upLike] = useState(false)\n  useEffect(() => {\n    let span = document.querySelectorAll('[name=\"content\"] p span')\n    if (span[idx].offsetHeight > 41) {\n      setHide(true)\n    }\n    //首页\n    if (ques) {\n      setPost(homeStore.getState().posts[idx])\n      setActive(props.state.attention[postId])\n      setPoor(props.state.poors[postId])\n\n      let homeUns = homeStore.subscribe(() => setPost(homeStore.getState().posts[idx]))\n      return () => homeUns()\n\n    } else {\n      //post-page\n      setPost(pageStore.getState().commenterInfo[idx])\n      setActive(props.state.likes[postId])\n      setPoor(props.state.poors[postId])\n\n      let postUns = pageStore.subscribe(() => setPost(pageStore.getState().commenterInfo[idx]))\n      return () => postUns()\n    }\n\n  }, [idx])\n\n  let foldContent = useCallback(() => {\n    let p = document.querySelectorAll('[name=\"content\"] p')[idx]\n    let style = p.style.display\n    if (style === 'block') {\n      p.style.display = '-webkit-box'\n      setFold(true)\n    } else {\n      p.style.display = 'block'\n      setFold(false)\n    }\n  }, [idx])\n\n  let toAttention = useCallback(() => {\n    homeStore.dispatch({\n      type: 'toAttention',\n      postId,\n      like: postLike.qusLike,\n      idx,\n    })\n    setActive(homeStore.getState().attention[postId])\n  }, [postLike, idx])\n\n  let likeComment = useCallback(() => {\n    pageStore.dispatch({\n      type: 'likeComment',\n      commentId: postId,\n      like: postLike.like,\n      idx,\n    })\n    setActive(pageStore.getState().likes[postId])\n  }, [postLike, idx])\n\n  let poorButton = useCallback(() => {\n    if (ques) {\n      homeStore.dispatch({\n        type: 'poorButton',\n        postId: postId,\n        poor: postLike.poor,\n        idx,\n      })\n      setPoor(homeStore.getState().poors[postId])\n    } else {\n      pageStore.dispatch({\n        type: 'poorButton',\n        commentId: postId,\n        poor: postLike.poor,\n        idx,\n      })\n      setPoor(pageStore.getState().poors[postId])\n    }\n  }, [postLike, idx])\n  return (\n    <div className=\"postsfooter\">\n      <button type=\"button\" className={active ? 'likeActive' : ''} onClick={ques ? toAttention : likeComment} ><CaretUpFilled /> {ques ? `关注 ${postLike.qusLike}` : `赞同 ${postLike.like}`} </button>\n      <button type=\"button\" className={poorActive ? 'likeActive' : ''} onClick={poorButton}><CaretDownFilled />{ques ? ` 踩 ${postLike.poor}` : ` 反对 ${postLike.poor}`}</button>\n      <ul>\n        <li><MessageFilled /> {ques ? `${props.post.answerCount} 条回答` : `${props.comment.ansComments} 条评论`}</li>\n        <li><StarFilled /> 收藏</li>\n        <li><HeartFilled /> 喜欢</li>\n      </ul>\n      {hide && <>\n        {fold\n          ? <span onClick={foldContent}>全部展开 <DownOutlined /></span>\n          : <span onClick={foldContent}>收起 <UpOutlined /></span>\n        }</>\n      }\n    </div>\n  )\n}\n\n// function poorButton() {\n\n// }\n\n*/\n","import React, { useCallback, useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { homeStore, pageStore } from '../redux/redux'\nimport PostsFooter from './postfooter'\nimport { useParams } from 'react-router-dom'\nimport moment from 'moment';\nimport { Link } from \"react-router-dom\"\nimport { Skeleton } from 'antd';\nimport { ContainerList } from '../pages/home'\n\nexport default function () {\n  // let [state, setState] = useState(homeStore.getState())\n\n  // useEffect(() => {\n  //   let uns = homeStore.subscribe(() => setState(homeStore.getState()))\n\n  //   return () => uns()\n  // }, [])\n  // debugger\n  return (\n    <div className=\"invitation\">\n      <ContainerList />\n      <PostMain />\n      <Over />\n    </div>\n  )\n}\n\nexport function Attachment(props) {\n  let { id } = useParams()\n  let mePost = props.state.cookieUser === props.post.name\n  let postId = props.type === 'post' ? props.post.postId : props.post.commentId\n  let [attachment, setAttachment] = useState(false)\n  // let [status, UpStatus] = useState(false)\n\n  useEffect(() => {\n    let attachmentClick = () => {\n      setAttachment(false)\n    }\n    window.addEventListener('click', attachmentClick)\n    return () => window.removeEventListener('click', attachmentClick)\n  }, [attachment])\n  let deletePost = useCallback(() => {\n    if (props.type === 'post') {\n      axios.post('/api/deletePost/', { postId, type: 'post' })\n        .then(res => {\n          homeStore.dispatch({\n            type: 'deletePost',\n            postCount: res.data.postNormal.length,\n            posts: res.data.posts,\n          })\n        })\n    } else {\n\n      axios.post('/api/deletePost/', { id, postId, type: 'comment' })\n        .then(res => {\n          pageStore.dispatch({\n            type: 'deleteComment',\n            // postCount: res.data.postNormal.length,\n            comments: res.data.comments,\n          })\n        })\n    }\n\n  }, [postId, props, id])\n\n  let changeAttachment = useCallback((e) => {\n    e.stopPropagation()\n    setAttachment(!attachment)\n  }, [attachment])\n\n  return (\n    <>\n      <span className=\"deletePost\" onClick={changeAttachment}>...</span>\n      {attachment && <i className=\"deletePost-flag\"></i>\n      }\n      <div className={attachment ? 'deAttachment deAttaHeight' : 'deAttachment'}>\n        <ul>\n          <li onClick={mePost ? deletePost : () => { }} >\n            <span className={mePost ? '' : 'disableDelete'}>删除</span>\n          </li>\n          <li><span>举报</span></li>\n        </ul>\n      </div>\n    </>\n  )\n}\n\nfunction PostMain() {\n  let [state, setState] = useState(homeStore.getState())\n  let [posts, upPosts] = useState(new Array(6).fill(''))\n  let [loading, setLoading] = useState(true)\n  let [footer, setFooter] = useState(false)\n  useEffect(() => {\n    axios.get('/api/home-data').then(res => {\n      let initial = res.data\n      homeStore.dispatch({\n        ...initial,\n        type: 'getData',\n        posts: initial.posts.filter(it => it.status !== 'delete'),\n      })\n      setLoading(false)\n    })\n    let uns = homeStore.subscribe(() => {\n      setState(homeStore.getState())\n      upPosts(homeStore.getState().posts || [])\n    })\n    return () => uns()\n  }, [])\n  useEffect(() => {\n    let postContent = document.querySelectorAll('.content-div >p >span')\n    postContent.forEach((it, idx) => {\n      let post = posts[idx].content\n      it.innerHTML = post[0] === \"{\" ? JSON.parse(post).html : post\n    })\n    if (postContent.length) { setFooter(true) }\n\n  }, [loading])\n  let postIdx = -1\n  return (\n    <ul className=\"posts\">\n      {\n        posts.map(post => {\n          let time = post.createdAt * 1\n          let TIME = moment(time).endOf().fromNow(true) + '前'\n          if (post.status !== 'delete') {\n            ++postIdx\n            return (\n              <li key={post.postId}>\n                <Skeleton active round loading={loading}>\n                  <div className=\"user-date\">\n                    <Link to={`/user/${post.posterId}`}><img alt=\"\" style={{ backgroundImage: `url(${post.avatar})` }} className=\"userAvatar\" /></Link>\n                    <span className=\"post-username\"><Link to={`/user/${post.posterId}`}>{post.name}</Link>  ,<span className=\"post-time\">  发布于\n                    {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\n                        moment(time).format(\"YYYY-MM-DD HH:mm:ss\")\n                        : TIME\n                      }\n                    </span></span>\n                    <Attachment state={state} post={post} type='post' />\n                  </div>\n                  <div className=\"content-div\" name=\"content\">\n                    <Link className=\"post-title\" to={`/post-page/${post.postId}`}>{post.title}</Link>\n                    <p className=\"post-content flodContent post-defaultHeight\">\n                      <span></span>\n                    </p>\n                  </div>\n                  <PostsFooter post={post} idx={postIdx} type=\"question\" state={state} footer={footer} />\n                </Skeleton>\n              </li>\n            )\n          } else {\n            return null\n          }\n        })\n      }\n    </ul>\n  )\n}\n// withRouter(PostMain)\n\n\n\nexport function Over() {\n  return (\n    <div className=\"over\">\n      <span>没有更多内容了...</span>\n    </div>\n  )\n}\n","import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport axios from 'axios'\nimport { SyncOutlined, EditOutlined, ProjectFilled, StarFilled, HeartFilled, FileFilled, } from '@ant-design/icons'\nimport { homeStore, userStore, navStore } from '../redux/redux'\nimport { withRouter } from 'react-router-dom'\nimport { Link } from \"react-router-dom\"\nimport { Skeleton } from 'antd';\n\nexport default function () {\n  let [data, setData] = useState(homeStore.getState())\n  useEffect(() => {\n    let uns = homeStore.subscribe(() => setData(homeStore.getState()))\n    return () => uns()\n  }, [])\n  return (\n    <div className=\"toolbar\">\n      <div className=\"toolbar-user-data\">\n        <ToolbarHead data={data} />\n        <UserInfo cookieUser={data.cookieUser} user={data.user} />\n        <UserSign data={data} />\n      </div>\n      <Recommend data={data} />\n      <FooterBar />\n    </div>\n  )\n}\n\nfunction ToolbarHead(props) {\n  let cookieUser = props.data.cookieUser\n  let user = props.data.user || {}\n  let signOut = useCallback(() => {\n    axios.post('/api/clearCookie/')\n  }, [])\n  return (\n    <span>\n      {cookieUser !== undefined\n        ? <>欢迎用户 <Link to={'/user/' + user.userId} className=\"denglu-user\">{cookieUser}</Link>\n          <Link to=\"/sign\" className=\"dengchu\" onClick={signOut}>登出</Link></>\n        : <>当前处于未登录状态\n          <Link to=\"/sign\" className=\"dengchu\">登录/注册</Link></>\n      }\n    </span>\n  )\n}\n\nfunction Info(props) {\n  let user = props.user || {}\n  let [avatar, avatarChange] = useState(user.avatar)\n  //切换头像\n  let [hoverAvatar, setHover] = useState(false)\n  let avatarCutover = useCallback((e) => {\n    let data = new FormData()\n    data.append('avatar', e.target.files[0])\n    axios.post('/api/user-avatar/', data, {\n      headers: { \"Content-Type\": \"multipart/form-data\" }\n    }).then(res => {\n      avatarChange(res.data)\n    })\n  }, [])\n  let inputAvatar = useCallback(() => {\n    document.querySelector('[name=\"avatar\"]').click()\n  }, [])\n  useEffect(() => {\n    avatarChange(user.avatar)\n  }, [user])\n  let pushUserPage = useCallback((idx) => {\n    if (props.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n    } else {\n      props.history.push(`/user/${user.userId}`)\n      userStore.dispatch({\n        type: 'activeSwitch',\n        active: idx,\n      })\n    }\n\n  }, [user, props])\n  useEffect(() => {\n    function switchAvatar() {\n      homeStore.dispatch({\n        type: 'hoverAvatar',\n        hover: true,\n      })\n    }\n    function clearAvatarEvent() {\n      homeStore.dispatch({\n        type: 'hoverAvatar',\n        hover: false,\n      })\n    }\n    let userAvatarDiv = document.querySelector('.user-avatar')\n    userAvatarDiv.addEventListener('mouseenter', switchAvatar)\n    userAvatarDiv.addEventListener('mouseleave', clearAvatarEvent)\n\n    let uns = homeStore.subscribe(() => setHover(homeStore.getState().hover))\n    return () => {\n      uns()\n      userAvatarDiv.removeEventListener('mouseenter', switchAvatar)\n      userAvatarDiv.removeEventListener('mouseleave', clearAvatarEvent)\n    }\n  }, [])\n\n  return (\n    <div className=\"user-info\">\n      {props.cookieUser\n        ? <div className=\"user-avatar\" onClick={inputAvatar} style={{ backgroundImage: `url(${avatar})` }}>\n          {/* <i className=\"switch\"> </i> */}\n          <input type=\"file\" name=\"avatar\" style={{ display: 'none' }} onChange={avatarCutover} />\n          {hoverAvatar &&\n            <div className=\"avatarMouseEnter\">\n              <SyncOutlined /><span>更换头像</span>\n            </div>\n          }\n        </div>\n        : <div className=\"user-avatar\" style={{ backgroundImage: `url('/images/default.jpg')` }}>\n        </div>\n      }\n      <ul className=\"user-bar\">\n        <li onClick={() => pushUserPage(0)}><span><ProjectFilled />全部动态</span></li>\n        <li onClick={() => pushUserPage(5)}><span><StarFilled />我的收藏</span></li>\n        <li onClick={() => pushUserPage(4)}><span><HeartFilled />我的关注</span></li>\n        <li onClick={() => pushUserPage(1)}><span><FileFilled />历史回答</span></li>\n      </ul>\n    </div>\n  )\n}\n\nexport const UserInfo = withRouter(Info)\nexport function UserSign(props) {\n  let data = props.data || {}\n  // debugger\n  //更新签名\n  let user = data.user || {}\n  let signChange = useCallback((e) => {\n    e.stopPropagation()\n    if (data.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n      return\n    }\n    let sign = document.querySelector('.user-sign-text')\n    sign.setAttribute('contenteditable', true)\n    sign.focus()\n    sign.onblur = () => {\n      axios.post('/api/sign-edit/', { user_sign: sign.textContent })\n      sign.setAttribute('contenteditable', false)\n    }\n  }, [data])\n  let lastSign = useRef('')\n  let signInput = useCallback((e) => {\n    let text = e.target.textContent\n    if (text.length === 30) {\n      lastSign.current = text\n    }\n    if (text.length > 30) {\n      e.target.innerText = lastSign.current\n    }\n  }, [])\n  return (\n    <div className=\"user-sign\">\n      <i className=\"el-icon-edit\" onClick={signChange}><EditOutlined style={{ fontSize: '16px', marginRight: '8px' }} /> </i>\n      {data.cookieUser\n        ? <span className=\"user-sign-text\" onInput={signInput}>{user ? user.sign : data.poster.sign}</span>\n        : <span>当前还未登录，赶快前往登录吧！</span>\n      }\n    </div>\n  )\n}\n\n\nexport function Recommend() {\n  let [data, upData] = useState(homeStore.getState())\n  let [loading, setLoading] = useState(true)\n\n  // let [divTop, upTop] = useState(0)\n  useEffect(() => {\n    //请求数据\n    axios.get('/api/home-data').then(res => {\n      let initial = res.data\n      homeStore.dispatch({\n        type: 'getData',\n        ...initial\n      })\n      setLoading(false)\n    })\n\n    let uns = homeStore.subscribe(() => upData(homeStore.getState()))\n    return () => uns()\n  }, [])\n\n  let recommend = data.recommend || new Array(15).fill('')\n  let recommendList = recommend.filter(it => it.status !== 'delete')\n\n  return (\n    <div className=\"recommend\"  >\n      <h3>热门问题</h3>\n      <ul className=\"recommend-list\">\n        {recommendList.slice(0, 15).map(item => {\n          return (\n            <li key={item.postId}>\n              <Skeleton active round paragraph={false} loading={loading}>\n                <Link to={\"/post-page/\" + item.postId} title={item.title}>{item.title}</Link>\n              </Skeleton>\n            </li>\n          )\n        })\n        }\n      </ul>\n      {/* <FooterBar /> */}\n    </div>\n  )\n}\n\nexport function FooterBar() {\n  return (\n    <div className=\"footer-bar\">\n      <p> 陈听水 然也指南 然也协议 然也隐私保护指引 <br />应用工作申请开通然也机构号<br />侵权举报网上有害信息举报专区<br />京 ICP 证 110745 号<br />京 ICP 备 13052560 号 - 1<br />京公网安备 11010802010035 号<br />互联网药品信息服务资格证书<br />（京）- 非经营性 - 2017 - 0067违法和不良信息举报：010-82716601<br /> 儿童色情信息举报专区<br />证照中心<br />联系我们 © 2020 然也</p>\n    </div>\n  )\n}\n","import React from 'react'\nimport Invitation from './invitation'\nimport Toolbar from './toolbar'\n\nexport default function () {\n  return (\n    <div className=\"body-container\">\n      <Invitation />\n      <Toolbar />\n    </div>\n  )\n}\n","import React, { useEffect, useState, useCallback } from 'react'\nimport Nav from '../components/header-nav'\nimport Question from '../components/question'\nimport { homeStore, navStore } from '../redux/redux'\nimport Container from '../components/body-container'\nimport axios from 'axios'\nimport { SearchOutlined } from '@ant-design/icons'\nimport { Link } from \"react-router-dom\"\nexport default function () {\n  let [state, setState] = useState(homeStore.getState())\n  // debugger\n\n  useEffect(() => {\n    axios.get('/api/home-data').then(res => {\n      let initial = res.data\n      homeStore.dispatch({\n        type: 'getData',\n        ...initial,\n        posts: initial.posts.filter(it => it.status !== 'delete'),\n        // postCount: initial.postCount,\n      })\n    })\n    let uns = homeStore.subscribe(() => setState(homeStore.getState()))\n\n    return () => uns()\n  }, [])\n\n  // useEffect(() => {\n  //   let uns = homeStore.subscribe(() => setState(homeStore.getState()))\n  //   console.log('shuxinle')\n  //   return () => uns()\n  // }, [])\n  return (\n    <>\n      <Nav>\n        <HomeNavChild state={state} />\n      </Nav>\n      {state.question &&\n        <Question />\n      }\n      <Container />\n    </>\n  )\n}\n\nfunction HomeNavChild({ state }) {\n  let postQuestion = useCallback(() => {\n    if (state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n      return\n    }\n    homeStore.dispatch({\n      type: 'question',\n      question: true,\n    })\n  }, [state])\n  return (\n    <div className=\"top-nav home-slider-nav\">\n      <Link to=\"/\" className=\"home-logo\">\n        <img src=\"/images/icon2.jpg\" alt=\"zhi 呼\" />\n      </Link>\n      <ContainerList />\n      <div className=\"search-div\">\n        <label className=\"search-label\">\n          <input type=\"search\" name=\"search\" className=\"search\" placeholder=\"功能尚未完善\" />\n          <SearchOutlined style={{ fontSize: '20px', color: '#9AA3B5' }} />\n        </label>\n        <input type=\"button\" className=\"question\" value=\"发帖\" onClick={postQuestion} />\n      </div>\n    </div>\n  )\n}\n\nexport function ContainerList() {\n  return (\n    <ul className=\"home-list\">\n      <li><Link to=\"/\">推荐</Link></li>\n      <li><Link to=\"/\">关注</Link></li>\n      <li><Link to=\"/\">热榜</Link></li>\n    </ul>\n  )\n}\n","import React, { useEffect, useState } from 'react'\n// import { Form, Input, Button, Checkbox, Space, message } from 'antd'\n// import { UserOutlined, LockOutlined } from '@ant-design/icons';\n// import { Redirect } from 'react-router-dom'\nimport { signStore } from '../redux/redux.js'\nimport './signin-component.css'\nimport Footer from './footer'\nimport Sign from './sign'\nimport { Link } from \"react-router-dom\"\n\nexport default function Login() {\n  let [state, setState] = useState(signStore.getState())\n\n  useEffect(() => {\n    let uns = signStore.subscribe(() => setState(signStore.getState()))\n    return () => uns()\n  })\n  return (\n    <div className=\"main\">\n      <img src=\"../images/login-top2.png\" alt=\"logo\" className=\"logo\" />\n      {state.sucessSignup &&\n        <Success props={state} />\n      }\n      <Sign state={state} />\n      <Footer />\n    </div>\n  )\n}\nfunction Success(props) {\n\n  return (\n    <div className=\"success-bg\">\n      <div className={'suc-transition success'}>\n        <img src=\"./images/loading.gif\" alt=\"注册成功\" />\n        <label className=\"label-visi\">\n          <span>注册成功！ </span> 点击 <Link to=\"/sign\">返回登陆界面</Link>\n        </label>\n      </div>\n    </div>\n  )\n}\n\n\n\n\n\n","import React from 'react'\nimport Signin from '../components/signin-component.js'\nimport './signin.css'\nexport default () => {\n  return (\n    <div className=\"login-container\">\n      <Signin />\n    </div>\n  )\n}\n","import React, { useCallback, useEffect, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { UserInfo, FooterBar, Recommend, UserSign } from './toolbar'\n// import { HeartOutlined, CommentOutlined } from '@ant-design/icons';\nimport { pageStore, navStore, userStore } from '../redux/redux';\nimport PostsFooter from './postfooter'\nimport moment from 'moment';\nimport { Over, Attachment } from './invitation'\nimport axios from 'axios'\nimport CareMessage from './care-message'\nimport { withRouter } from 'react-router-dom'\nimport { Link } from \"react-router-dom\"\nimport { Skeleton } from 'antd';\nimport Editor from './editor'\nexport default function (props) {\n  let [data, Update] = useState(pageStore.getState())\n  useEffect(() => {\n    let uns = pageStore.subscribe(() => Update(pageStore.getState()))\n    return () => uns()\n  })\n  return (\n    <div className=\"body-container post-container\">\n      <Comment data={data} loading={props.loading} />\n      <ToolBar data={data} />\n    </div>\n  )\n}\n\n\nfunction Comment(props) {\n  let commenterInfo = props.data.commenterInfo || []\n  return (\n    <div className=\"invitation\">\n      {props.data.writeAnswer ? <AnswerDiv /> : ''}\n      <div className=\"comment-main\">\n        <ul className=\"comments-list\">\n          <CommentList commenterInfo={commenterInfo} loading={props.loading} />\n        </ul>\n      </div>\n      <Over />\n    </div>\n  )\n}\n//发评论\nfunction AnswerDiv() {\n  let { id } = useParams()\n  let [value, setValue] = useState({ html: '', text: '' })\n  let submitAnswer = useCallback(() => {\n    let postAnswer = {\n      content: JSON.stringify(value),\n      createdAt: Date.now(),\n    }\n    getNewCommenter()\n    async function getNewCommenter() {\n      await axios.post(`/api/post-page/${id}`, postAnswer)\n        .then(res => {\n          pageStore.dispatch({\n            type: 'postAnswer',\n            commenterInfo: res.data,\n          })\n        })\n        .catch(rej => {\n          if (rej.response.status === 401) {\n            navStore.dispatch({\n              type: 'toSign',\n              sign: false,\n            })\n          }\n        })\n\n    }\n  }, [id, value])\n  return (\n    <div className=\"answer-outer editing\">\n      <Editor setEditValue={setValue} />\n      <div className=\"submit-answer\" >\n        <span onClick={submitAnswer}>提交回答</span>\n      </div>\n    </div>\n  )\n}\n\nfunction CommentList(props) {\n  let [data, Update] = useState(pageStore.getState())\n\n  useEffect(() => {\n    let uns = pageStore.subscribe(() => Update(pageStore.getState()))\n    return () => uns()\n  }, [])\n  // debugger\n\n  let commenterInfo = data.commenterInfo || new Array(5).fill('')\n  let commentNoamal = commenterInfo.filter(it => it.status !== 'delete')\n\n  let commentIdx = -1\n\n\n  if (!props.loading && commentNoamal.length === 0) {\n    return <li style={{ color: '#8590A6' }}>\n      当前帖子还没有回答，赶紧去添加回答吧！\n      </li>\n  } else {\n    return (\n      commentNoamal.map((item) => {\n        commentIdx++\n        return < Skeleton loading={props.loading} >\n          <CommentItem item={item} data={data} idx={commentIdx} key={item.createdAt} />\n        </Skeleton>\n\n      })\n    )\n  }\n\n}\n\nfunction CommentItem(props) {\n  let item = props.item\n  let data = props.data\n  let idx = props.idx\n  let time = item.createdAt * 1\n  let TIME = moment(time).endOf().fromNow(true) + '前'\n  let [footer, setFooter] = useState(false)\n\n  useEffect(() => {\n    let commentItem = document.querySelectorAll(\".flodContent >span\")[idx]\n    if (commentItem) {\n      commentItem.innerHTML = item.content[0] !== '{' ? item.content : JSON.parse(item.content).html\n      setFooter(true)\n    }\n  }, [item, idx])\n  return (\n    <li key={item.createdAt}>\n      <div className=\"commenter-info\" >\n        <Link to={`/user/${item.userId}`}><i className=\"commenter-avatar\" style={{ backgroundImage: `url(${item.avatar})` }}></i></Link>\n        <div className=\"commenter-flag\">\n          <Link className=\"commenter-name\" to={`/user/${item.userId}`}>{item.name}</Link>\n          <span className=\"commenter-sign\">{item.sign}</span>\n          <Attachment state={data} post={item} type='comment' />\n        </div>\n      </div>\n      <div className=\"content-div \" name=\"content\">\n        <p className=\"flodContent\"><span></span></p>\n        <span className=\"answerAt\">\n          发布于 &nbsp;\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\n            moment(item.createdAt * 1).format(\"YYYY-MM-DD HH:mm:ss\")\n            : TIME\n          }\n        </span>\n        <div className=\"commenter-footer\">\n          <PostsFooter comment={item} idx={idx} state={data} footer={footer} />\n        </div>\n      </div>\n\n    </li>\n  )\n}\n\nfunction ToolBar(props) {\n  let data = props.data || {}\n  let poster = data.poster || {}\n  return (\n    <div className=\"toolbar\">\n      <div className=\"toolbar-user-data\">\n        <h4 style={{ color: 'rgb(118,131,155)' }}>关于提问者</h4>\n        {poster.name === data.cookieUser\n          ? <>\n            <UserInfo cookieUser={data.cookieUser} user={data.poster} />\n            <UserSign data={data} />\n          </>\n          : <PosterInfo poster={poster} />\n        }\n      </div>\n      <Recommend />\n      <FooterBar />\n    </div>\n  )\n}\n\nfunction Info(props) {\n\n  let poster = props.poster\n  let toUserPage = useCallback((one, sen) => {\n    props.history.push(`/user/${poster.userId}`)\n    userStore.dispatch({\n      type: 'activeSwitch',\n      active: one,\n    })\n    if (sen !== undefined) {\n      userStore.dispatch({\n        type: 'collectActive',\n        active: sen,\n      })\n    }\n  }, [poster, props.history])\n  return (\n    <div className=\"posterInfo\">\n      <div className=\"posterInfo-user\">\n        <Link to={`/user/${poster.userId}`}>\n          <i className=\"post-avatar\" style={{ backgroundImage: `url(${poster.avatar})` }}></i>\n        </Link>\n        <div className=\"poster-userInfo\">\n          <Link to={`/user/${poster.userId}`}><h3>{poster.name}</h3></Link>\n          <span>{poster.sign}</span>\n        </div>\n      </div>\n      <div >\n        <ul className=\"posterInfo-other\">\n          <li onClick={() => toUserPage(1)}><span>回答</span><br />{poster.commentCount}</li>\n          <li onClick={() => toUserPage(2)}><span>提问</span><br />{poster.postCount}</li>\n          <li onClick={() => toUserPage(4, 2)}><span>关注者</span><br />{poster.fans}</li>\n        </ul>\n        <CareMessage careInfo={poster} />\n      </div>\n    </div>\n  )\n}\nconst PosterInfo = withRouter(Info)\n\n// function PoseteSections(props) {\n//   return (\n//     <></>\n//   )\n// }\nfunction getContent(item) {\n  if (item.content) {\n    if (item.content[0] !== '{') {\n      return item.content\n    } else {\n      return JSON.parse(item.content).text\n    }\n  }\n  return\n}\n","import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport axios from 'axios'\nimport { Link } from \"react-router-dom\"\nimport { Button } from 'antd'\nimport './user-page.css'\nimport { careStore, pageStore } from '../redux/redux'\nimport { useParams } from 'react-router-dom'\n\nexport default function ({ userId }) {\n  let { id } = useParams()\n  let [cares, setCare] = useState([])\n  useEffect(() => {\n    let uns = careStore.subscribe(() => setCare(careStore.getState().myCares))\n    return () => uns()\n  }, [])\n  let outerRef = useRef()\n  useEffect(() => {\n    //获取关注列表\n    axios.get(`/api/get-care/${userId}`)\n      .then(res => {\n        careStore.dispatch({\n          type: 'getCare',\n          myCares: res.data.myCares,\n        })\n      })\n    //获取邀请状态\n    axios.get(`/api/invite/${id}`)\n      .then(res => {\n        pageStore.dispatch({\n          type: 'getInitial',\n          inviteList: res.data.inviteList,\n        })\n      })\n\n  }, [id, userId])\n  useEffect(() => {\n    let foo = document.querySelector('.invite-outer')\n    foo.onmousewheel = (e) => {\n      e.preventDefault()\n    }\n\n    return () => foo.onmousewheel = null\n  }, [])\n  let inviteEnd = useCallback(() => {\n    pageStore.dispatch({\n      type: 'invite',\n      invite: false,\n    })\n  }, [])\n  useEffect(() => {\n    function clearInvite(e) {\n      e.stopPropagation()\n      if (e.target === outerRef.current || e.target === document.body) {\n        inviteEnd()\n      }\n    }\n    window.addEventListener('click', clearInvite)\n    return () => window.removeEventListener('click', clearInvite)\n  }, [inviteEnd])\n  return (\n    <div className=\"invite-outer\" ref={outerRef}>\n      <div className=\"invite-main\">\n        <div className=\"invite-header\"><h2>选择想要邀请的用户<span> * 只能邀请关注用户，请多多充实关注列表吧！</span></h2>\n          <Button type=\"primary\" size=\"middle\" onClick={inviteEnd}>完成</Button></div>\n        <ul className=\"invite-list\">\n          {cares.length === 0 && <li className=\"no-invite\"><span >还没有关注过用户，邀请列表太冷清啦！</span></li>}\n          {cares.map(invite => {\n            return <li key={invite.createdAt}><InviteItem invite={invite} /></li>\n          })}\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nfunction InviteItem({ invite }) {\n  let { id } = useParams()\n  let [complete, setComplete] = useState(false)\n  let [clear, setClear] = useState(false)\n  useEffect(() => {\n    function updateInvite() {\n      let inviteList = pageStore.getState().inviteList || []\n      let temp = inviteList.some(it => it.targetId === invite.careId)\n      setComplete(temp)\n    }\n    updateInvite()\n    let uns = pageStore.subscribe(() => updateInvite())\n    return () => uns()\n  }, [invite])\n\n  let toInvite = useCallback((type) => {\n    axios.post('/api/invite', {\n      type: type,\n      postId: id,\n      targetId: invite.careId,\n      targetName: invite.careName,\n    }).then(res => {\n      pageStore.dispatch({\n        type: 'upDateInvite',\n        inviteList: res.data.newInvites\n      })\n    })\n  }, [id, invite])\n  return (\n    <div className=\"invite-item\">\n      <Link to={`/user/${invite.careId}`}><i style={{ backgroundImage: `url(${invite.avatar})` }} className=\"invite-avatar\"></i></Link>\n      <div className=\"invite-userInfo\">\n        <Link to={`/user/${invite.careId}`}><h4>{invite.careName}<span>  -  {invite.industry}</span></h4></Link>\n        <span>{invite.sign}</span>\n      </div>\n      {complete\n        ? <Button type=\"ghost\" onClick={() => toInvite('revoke')} style={{ width: '100px', color: 'rgb(138 138 138)' }} onMouseEnter={() => setClear(true)} onMouseLeave={() => setClear(false)}>{clear ? '取消邀请' : '已邀请'}</Button>\n        : <Button type=\"ghost\" style={{ width: '100px', borderColor: '#40a9ff', color: '#40a9ff' }} onClick={() => toInvite('active')}>邀请回答</Button>\n      }\n\n    </div>\n  )\n}\n","import React, { useCallback, useEffect, useRef, useState, useMemo } from 'react'\nimport axios from 'axios'\nimport { useParams } from 'react-router-dom'\nimport './post.css'\nimport PostContainer from './post-container'\nimport { FormOutlined, MessageFilled, FireFilled, UserAddOutlined } from '@ant-design/icons';\nimport { pageStore, navStore } from '../redux/redux'\n// var POST_DATA\nimport Nav from '../components/header-nav'\nimport moment from 'moment';\nimport Invite from './invite'\nimport { Skeleton } from 'antd';\n\nexport default function () {\n  let { id = 1 } = useParams()\n  let [data, Update] = useState(pageStore.getState())\n  let [invite, setInvite] = useState(false)\n  let [loading, setLoading] = useState(true)\n  useEffect(() => {\n    let uns = pageStore.subscribe(() => setInvite(pageStore.getState().invite))\n    return () => uns()\n  }, [])\n  useEffect(() => {\n    const getInitial = async () => {\n      const result = await axios.get(`/api/post-page/${id}`)\n      pageStore.dispatch({\n        type: 'getInitial',\n        ...result.data,\n      })\n      setLoading(false)\n    }\n    getInitial()\n    let uns = pageStore.subscribe(() => Update(pageStore.getState()))\n\n    return () => uns()\n  }, [id])\n\n  return (\n    <>\n      <Nav page={\"post\"}>\n        <PostNavChild data={data} />\n      </Nav>\n      <PostInfo>\n        <PostTitle data={data} loading={loading} />\n        <Poster data={data} />\n      </PostInfo>\n      <PostContainer data={data} loading={loading} />\n      {invite && <Invite id={id} />}\n    </>\n  )\n}\nfunction PostNavChild({ data }) {\n  let post = data.post || {}\n  let writeAnswer = useCallback(() => {\n    pageStore.dispatch({\n      type: 'writeAnswer',\n      writeAnswer: !data.writeAnswer,\n    })\n    document.documentElement.scrollTop = 0\n    let sliderNav = document.querySelector('.nav-slider-outer')\n    sliderNav.style.top = '0px'\n  }, [data])\n\n  return (\n    <div className=\"post-nav-slider\">\n      <h1 title={post.title}>{post.title}</h1>\n      <div className=\"post-footer-list\">\n        <Attention data={data} />\n        <div className=\"answer\" onClick={writeAnswer}><FormOutlined />写回答</div>\n      </div>\n    </div>\n  )\n}\n\nfunction PostInfo(props) {\n  return <div className=\"post-info post-top\">{props.children}</div>\n}\n\nfunction PostTitle(props) {\n  // debugger\n  let data = props.data\n  let commenterInfo = data.commenterInfo || []\n  let post = props.data.post || {}\n  let [hide, upHide] = useState(false)\n  let [fold, setFlod] = useState(true)\n  let [spanHeight, setHeight] = useState(0)\n  let answerCount = commenterInfo.filter(it => it.status !== 'delete')\n\n  let writeAnswer = useCallback(() => {\n    pageStore.dispatch({\n      type: 'writeAnswer',\n      writeAnswer: !data.writeAnswer,\n    })\n  }, [data])\n\n  useEffect(() => {\n    let p = document.querySelector('.post-content')\n    if (spanHeight >= 72) {\n      p.style.height = '72px'\n      upHide(true)\n    }\n  }, [spanHeight, props.loading])\n  useEffect(() => {\n    let postContent = document.querySelector('.post-content >span')\n    if (postContent && post.content) {\n      postContent.innerHTML = post.content[0] !== '{' ? post.content : JSON.parse(post.content).html\n      setHeight(postContent.getBoundingClientRect().height)\n    }\n  }, [post, props])\n  let foldCutover = useCallback(() => {\n    let p = document.querySelector('.post-content')\n    let span = document.querySelector('.post-content span')\n    if (fold) {\n      p.style.display = 'block'\n      p.style.height = span.getBoundingClientRect().height + 3 + 'px'\n      setFlod(false)\n    } else {\n      p.style.display = '-webkit-box'\n      p.style.height = '72px'\n      setFlod(true)\n    }\n  }, [fold])\n  let toInvite = useCallback(() => {\n    if (data.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n      return\n    }\n    pageStore.dispatch({\n      type: 'invite',\n      invite: true,\n    })\n  }, [data])\n  return (\n    <div className=\"post-main\">\n      <Skeleton title={{ width: 300 }} paragraph={false} loading={props.loading} round>\n        <h1>{post.title}</h1>\n      </Skeleton>\n      <Skeleton active loading={props.loading} paragraph={{ rows: 2 }} round title={false}>\n        <p className=\"post-content\"><span></span></p>\n      </Skeleton >\n      <div className=\"post-footer-list\">\n        <Attention data={data} />\n        <div className=\"answer\" onClick={writeAnswer}><FormOutlined />写回答</div>\n        <div className=\"admire-qus\" onClick={toInvite}><UserAddOutlined />邀请回答</div>\n        <ul className=\"other-info\">\n          <li className=\"comments-count\">\n            <MessageFilled />\n            <span>{answerCount.length}&nbsp;条回答</span>\n          </li>\n          <li className=\"pageview\"><FireFilled /><span>{post.pageview}&nbsp;浏览量</span></li>\n          {/* <li className=\"unfold\"><span>...</span></li> */}\n          {hide &&\n            <li className=\"hide\" onClick={foldCutover}><span>{fold ? '展开' : '收起'}</span></li>\n          }\n        </ul>\n      </div>\n\n    </div>\n  )\n}\n\n\nfunction Attention({ data }) {\n  let { id } = useParams()\n  let [attention, upVoke] = useState(pageStore.getState().attention)\n  let attenRef = useRef()\n  //attention\n  let toAttention = useCallback(() => {\n    if (data.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n    } else {\n      pageStore.dispatch({\n        type: 'toAttention',\n        attention: !attention,\n        pageId: id,\n      })\n    }\n  }, [attention, id, data])\n\n  useEffect(() => {\n    let uns = pageStore.subscribe(() => upVoke(pageStore.getState().attention))\n\n    if (attention) {\n      attenRef.current.onmouseenter = () => {\n        attenRef.current.innerText = '取消关注'\n      }\n      attenRef.current.onmouseleave = () => {\n        attenRef.current.innerText = '已关注'\n      }\n    }\n    function clearMousevent() {\n      attenRef.current.onmouseenter = null;\n      attenRef.current.onmouseleave = null\n    }\n\n    return () => { uns(); clearMousevent() }\n  }, [attention, id])\n\n  return (\n    <div className={attention ? \"revoke\" : \"guanzhu\"} onClick={toAttention} ref={attenRef} >{attention ? \"已关注\" : \"关注问题\"}</div>\n  )\n}\n\nfunction Poster(props) {\n  let data = props.data\n  let commenterInfo = data.commenterInfo || []\n  let answerCount = commenterInfo.filter(it => it.status !== 'delete')\n  let time = data.post && data.post.createdAt * 1\n  let TIME = moment(time).endOf().fromNow(true) + '前'\n\n  return (\n    <div className=\"post-other\">\n      <ul>\n        <li className=\"post-other-line\"><span>关注数</span><br />{data.attentionLength}</li>\n        <li><span>回答数</span><br />{answerCount.length}</li>\n      </ul>\n      <div className=\"post-other-time\"><span>发帖时间：</span>\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\n          moment(time).format(\"YYYY-MM-DD HH:mm:ss\")\n          : TIME\n        }</div>\n    </div>\n  )\n}\n","import React, { useEffect, useState, useCallback } from 'react'\n// import Nav from '../components/header-nav'\nimport Question from '../components/question'\nimport Post from '../components/post-page'\nimport { homeStore } from '../redux/redux'\n\n\nexport default function () {\n  let [state, setState] = useState(homeStore.getState())\n\n  useEffect(() => {\n    let uns = homeStore.subscribe(() => setState(homeStore.getState()))\n    return () => uns()\n  }, [])\n\n  return (\n    <>\n      {state.question &&\n        <Question />\n      }\n      <Post />\n    </>\n  )\n}\n\n","import React, { useEffect, useState, useCallback } from 'react'\nimport { Input, Radio, Button, DatePicker } from 'antd'\nimport { EditFilled } from '@ant-design/icons';\n// import { Redirect } from 'react-router-dom'\nimport { userStore } from '../redux/redux.js'\nimport './signin-component.css'\nimport 'antd/dist/antd.css'\nimport axios from 'axios'\n// import locale from 'antd/es/locale/zh_CN';\n// import Footer from './footer'\n// import Sign from './sign'\n\nexport default function () {\n  let [state, setState] = useState(userStore.getState())\n  let { userInfo = {} } = state\n  useEffect(() => {\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\n    return () => uns()\n  }, [])\n  let editEnd = useCallback(() => {\n    userStore.dispatch({\n      type: 'editEnd',\n      edit: false,\n    })\n  }, [])\n  return (\n    <div className=\"edit-container-bg\">\n      <div className=\"edit-outer\">\n        <form action=\"/api/edit-userInfo\" method=\"post\" className=\"edit-form\">\n          <ul>\n            <li><h2>王司徒</h2><span style={{ fontWeight: '100' }}>* 鼠标移到用户头像即可修改头像</span><Button onClick={editEnd} type=\"primary\">修改完成</Button></li>\n            <Sex sex={userInfo.sex} />\n            <Birthday birthday={userInfo.birthday} />\n            <Address address={userInfo.address} />\n            <Sign sign={userInfo.sign} />\n            <Industry industry={userInfo.industry} />\n            <Introduction introduction={userInfo.introduction} />\n            <Sociality sociality={userInfo.sociality} />\n          </ul>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nfunction Sex(props) {\n  let [state, setState] = useState(false)\n  let [sex, setSex] = useState(props.sex)\n  let editSex = useCallback(() => {\n    setState(!state)\n  }, [state])\n\n  let saveEdit = useCallback(() => {\n    axios.post('/api/edit-userInfo', {\n      type: 'sex',\n      sex,\n    }).then(res => {\n      userStore.dispatch({\n        type: 'editUserInfo',\n        sex,\n      })\n      setState(false)\n    })\n  }, [sex])\n  return (\n    <li className=\"edit-sex\">\n      <span>性别</span>\n      {state\n        ? <div>\n          <Radio.Group value={sex} onChange={() => sex === 'man' ? setSex('female') : setSex('man')}>\n            <Radio value={'man'} checked={props.sex === 'man'}>男</Radio>\n            <Radio value={'female'} checked={props.sex === 'female'}>女</Radio>\n          </Radio.Group>\n          <div className=\"saveEdit\">\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\n            <Button size=\"small\" onClick={() => setState(false)}>取消</Button>\n          </div>\n        </div>\n\n        : <div className=\"saveEdit\"><span>{sex === 'man' ? '男' : '女'}</span><EditFilled onClick={editSex} style={{ color: '#40a9ff' }} /></div>\n      }\n    </li>\n  )\n}\n\nfunction Sign(props) {\n  let [state, setState] = useState(false)\n  let [sign, setSign] = useState(props.sign)\n  let [limit, setLimit] = useState(false)\n  let editSign = useCallback(() => {\n    setState(!state)\n  }, [state])\n\n  let saveEdit = useCallback(() => {\n    axios.post('/api/edit-userInfo', {\n      type: 'sign',\n      sign,\n    }).then(res => {\n      userStore.dispatch({\n        type: 'editUserInfo',\n        sign,\n      })\n      setState(false)\n    })\n  }, [sign])\n\n  let editSignInput = useCallback((e) => {\n    if (e.target.value.length > 30) {\n      setLimit(true)\n      return\n    } else {\n      setLimit(false)\n      setSign(e.target.value)\n    }\n  }, [])\n  return (\n    <li className=\"edit-sign\">\n      <span>一句话介绍</span>\n      {state\n        ? <div>\n          <Input value={sign} onInput={editSignInput} style={limit ? { borderColor: 'red' } : {}} />\n          <div className=\"saveEdit\">\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\n            <Button size=\"small\" onClick={() => { setState(false); setSign(props.sign) }}>取消</Button>\n          </div>\n        </div>\n\n        : <div className=\"saveEdit\"><span>{sign}</span><EditFilled onClick={editSign} style={{ color: '#40a9ff' }} /></div>\n      }\n    </li >\n  )\n}\n\nfunction Address(props) {\n  let [state, setState] = useState(false)\n  let [address, setAddress] = useState(props.address)\n  let [limit, setLimit] = useState(false)\n  let editaddress = useCallback(() => {\n    setState(!state)\n  }, [state])\n\n  let saveEdit = useCallback(() => {\n    axios.post('/api/edit-userInfo', {\n      type: 'address',\n      address,\n    }).then(res => {\n      userStore.dispatch({\n        type: 'editUserInfo',\n        address,\n      })\n      setState(false)\n    })\n  }, [address])\n\n  let editAddressIput = useCallback((e) => {\n    if (e.target.value.length > 10) {\n      setLimit(true)\n      return\n    } else {\n      setLimit(false)\n      setAddress(e.target.value)\n    }\n  }, [])\n  return (\n    <li className=\"edit-address\">\n      <span>现居地</span>\n      {state\n        ? <div>\n          <Input value={address} onInput={editAddressIput} style={limit ? { borderColor: 'red' } : {}} />\n          <div className=\"saveEdit\">\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\n            <Button size=\"small\" onClick={() => { setState(false); setAddress(props.address) }}>取消</Button>\n          </div>\n        </div>\n\n        : <div className=\"saveEdit\"><span>{props.address}</span><EditFilled onClick={editaddress} style={{ color: '#40a9ff' }} /></div>\n      }\n    </li >\n  )\n}\n\nfunction Birthday(props) {\n  let [state, setState] = useState(false)\n  let [birthday, setBirthday] = useState(props.birthday)\n  let editState = useCallback(() => {\n    setState(!state)\n  }, [state])\n\n  let saveEdit = useCallback(() => {\n    axios.post('/api/edit-userInfo', {\n      type: 'birthday',\n      birthday,\n    }).then(res => {\n      userStore.dispatch({\n        type: 'editUserInfo',\n        birthday,\n      })\n      setState(false)\n    })\n  }, [birthday])\n\n  let editBirthday = useCallback((e) => {\n    let date = document.querySelector('.edit-birthday input')\n    setBirthday(date.value)\n  }, [])\n  return (\n    <li className=\"edit-birthday\">\n      <span>生日</span>\n      {state\n        ? <div>\n          <DatePicker onChange={editBirthday} />\n          <div className=\"saveEdit\">\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\n            <Button size=\"small\" onClick={() => { setState(false); setBirthday(props.birthday) }}>取消</Button>\n          </div>\n        </div>\n\n        : <div className=\"saveEdit\"><span>{birthday.slice(5)}</span><EditFilled onClick={editState} style={{ color: '#40a9ff' }} /></div>\n      }\n    </li >\n  )\n}\n\nfunction Industry(props) {\n  let [state, setState] = useState(false)\n  let [industry, setIndustry] = useState(props.industry)\n  let [limit, setLimit] = useState(false)\n  let editIndustry = useCallback(() => {\n    setState(!state)\n  }, [state])\n\n  let saveEdit = useCallback(() => {\n    axios.post('/api/edit-userInfo', {\n      type: 'industry',\n      industry,\n    }).then(res => {\n      userStore.dispatch({\n        type: 'editUserInfo',\n        industry,\n      })\n      setState(false)\n    })\n  }, [industry])\n\n  let editIndustryIput = useCallback((e) => {\n    if (e.target.value.length > 10) {\n      setLimit(true)\n      return\n    } else {\n      setLimit(false)\n      setIndustry(e.target.value)\n    }\n  }, [])\n  return (\n    <li className=\"edit-industry\">\n      <span>所在行业</span>\n      {state\n        ? <div>\n          <Input value={industry} onInput={editIndustryIput} style={limit ? { borderColor: 'red' } : {}} />\n          <div className=\"saveEdit\">\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\n            <Button size=\"small\" onClick={() => { setState(false); setIndustry(props.industry) }}>取消</Button>\n          </div>\n        </div>\n\n        : <div className=\"saveEdit\"><span>{props.industry}</span><EditFilled onClick={editIndustry} style={{ color: '#40a9ff' }} /></div>\n      }\n    </li >\n  )\n}\n\n\nconst { TextArea } = Input;\nfunction Introduction(props) {\n  let [state, setState] = useState(false)\n  let [summary, setSummary] = useState(props.introduction)\n  let [limit, setLimit] = useState(false)\n  let editSummary = useCallback(() => {\n    setState(!state)\n  }, [state])\n\n  let saveEdit = useCallback(() => {\n    axios.post('/api/edit-userInfo', {\n      type: 'introduction',\n      introduction: summary,\n    }).then(res => {\n      userStore.dispatch({\n        type: 'editUserInfo',\n        introduction: summary,\n      })\n      setState(false)\n    })\n  }, [summary])\n\n  let editIntroduction = useCallback((e) => {\n    if (e.target.value.length > 150) {\n      setLimit(true)\n      return\n    } else {\n      setLimit(false)\n      setSummary(e.target.value)\n    }\n  }, [])\n  return (\n    <li className=\"edit-introduction\">\n      <span>个人简介</span>\n      {state\n        ? <div>\n          <TextArea value={summary} onInput={editIntroduction} style={limit ? { borderColor: 'red' } : {}} />\n          <div className=\"saveEdit\">\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\n            <Button size=\"small\" onClick={() => { setState(false); setSummary(props.introduction) }}>取消</Button>\n          </div>\n        </div>\n\n        : <div className=\"saveEdit\"><span>{summary}</span><EditFilled onClick={editSummary} style={{ color: '#40a9ff' }} /></div>\n      }\n    </li >\n  )\n}\n\nfunction Sociality(props) {\n  let [state, setState] = useState(false)\n  let [sociality, setSociality] = useState(props.sociality)\n  let [limit, setLimit] = useState(false)\n  let editSociality = useCallback(() => {\n    setState(!state)\n  }, [state])\n\n  let saveEdit = useCallback(() => {\n    axios.post('/api/edit-userInfo', {\n      type: 'sociality',\n      sociality,\n    }).then(res => {\n      userStore.dispatch({\n        type: 'editUserInfo',\n        sociality,\n      })\n      setState(false)\n    })\n  }, [sociality])\n\n  let editSocialityIput = useCallback((e) => {\n    if (e.target.value.length > 50) {\n      setLimit(true)\n      return\n    } else {\n      setLimit(false)\n      setSociality(e.target.value)\n    }\n  }, [])\n  return (\n    <li className=\"edit-industry\">\n      <span>社交地址</span>\n      {state\n        ? <div>\n          <Input value={sociality} onInput={editSocialityIput} style={limit ? { borderColor: 'red' } : {}} />\n          <div className=\"saveEdit\">\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\n            <Button size=\"small\" onClick={() => { setState(false); setSociality(props.sociality) }}>取消</Button>\n          </div>\n        </div>\n\n        : <div className=\"saveEdit\"><span>{sociality}</span><EditFilled onClick={editSociality} style={{ color: '#40a9ff' }} /></div>\n      }\n    </li >\n  )\n}\n","import React, { useCallback, useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { ManOutlined, DownOutlined, UpOutlined, MailOutlined, WomanOutlined, CameraOutlined } from '@ant-design/icons'\nimport './user-page.css'\nimport { userStore, homeStore } from '../redux/redux'\nimport EditUser from './edit-userInfo'\nimport CareMessage from './care-message'\nimport { Skeleton } from 'antd';\n\nexport default function () {\n\n  return (\n    <div className=\"user-page \">\n      <div className=\"user-header-bg\">\n        <UserHeader />\n      </div>\n    </div>\n  )\n}\n\nfunction UserHeader() {\n  let [state, setState] = useState({})\n  let userInfo = state.userInfo || {}\n  let [loading, setLoading] = useState(true)\n  useEffect(() => {\n    if (state.userInfo) {\n      setLoading(false)\n    }\n  }, [state.userInfo])\n  useEffect(() => {\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\n    return () => uns()\n  }, [])\n  let [avatar, avatarChange] = useState(userInfo.avatar)\n  //切换头像\n  let [hoverAvatar, setHover] = useState(false)\n  let avatarCutover = useCallback((e) => {\n    let data = new FormData()\n    data.append('avatar', e.target.files[0])\n    axios.post('/api/user-avatar/', data, {\n      headers: { \"Content-Type\": \"multipart/form-data\" }\n    }).then(res => {\n      avatarChange(res.data)\n    })\n  }, [])\n  let inputAvatar = useCallback(() => {\n    document.querySelector('[name=\"avatar\"]').click()\n  }, [])\n\n  useEffect(() => {\n    avatarChange(userInfo.avatar)\n  }, [userInfo])\n  useEffect(() => {\n    function switchAvatar() {\n      homeStore.dispatch({\n        type: 'hoverAvatar',\n        hover: true,\n      })\n    }\n    function clearAvatarEvent() {\n      homeStore.dispatch({\n        type: 'hoverAvatar',\n        hover: false,\n      })\n    }\n    let userAvatarDiv = document.querySelector('.User-avatar')\n    userAvatarDiv.addEventListener('mouseenter', switchAvatar)\n    userAvatarDiv.addEventListener('mouseleave', clearAvatarEvent)\n    let uns = homeStore.subscribe(() => setHover(homeStore.getState().hover))\n    return () => {\n      uns()\n      userAvatarDiv.removeEventListener('mouseenter', switchAvatar)\n      userAvatarDiv.removeEventListener('mouseleave', clearAvatarEvent)\n    }\n  }, [userInfo])\n\n\n  let [flod, setFlod] = useState(false)\n  let flodClick = useCallback(() => {\n    setFlod(!flod)\n  }, [flod])\n\n  let editState = useCallback(() => {\n    userStore.dispatch({\n      type: 'editState',\n      edit: true\n    })\n  }, [])\n\n  // debugger\n  return (\n    <>\n      <div className=\"user-header\">\n        <div className=\"UserCover-bg\"></div>\n        <div className=\"User-avatar\" style={{ backgroundImage: `url(${avatar})` }} >\n          <Skeleton loading={loading} active avatar={{ size: 140, shape: 'square' }} >\n            <input type=\"file\" name=\"avatar\" style={{ display: 'none' }} onChange={avatarCutover} />\n            {hoverAvatar && userInfo.name === state.cookieUser &&\n              <div className=\"avatarMouseEnter\" onClick={inputAvatar}>\n                <CameraOutlined style={{ fontSize: '18px' }} /><span>更换头像</span>\n              </div>\n            }\n          </Skeleton>\n        </div>\n        <div className={flod ? 'UserDetailed UserDetailed-flod' : 'UserDetailed'}>\n          <div className=\"User-data\">\n            <Skeleton loading={loading} active round >\n              <h2>{userInfo.name}</h2>\n              <span className=\"sign\">{userInfo.sign}</span>\n              <UserDataList flod={flod} />\n              <UserBaseData flod={flod} />\n            </Skeleton>\n          </div>\n          <div className=\"User-data-bottom\">\n            <Skeleton loading={loading} active round title={false} paragraph={{ width: [300, 600] }}>\n              {flod\n                ? <span onClick={flodClick}><UpOutlined />  收起详细资料</span>\n                : <span onClick={flodClick}><DownOutlined />  查看详细资料</span>\n              }\n              {state.cookieUser === userInfo.name\n                ? <div className=\"user-editing\" onClick={editState}>编辑个人资料</div>\n                : <div className=\"other-user\"><CareMessage careInfo={state.userInfo} /></div>\n              }\n\n            </Skeleton>\n          </div>\n        </div>\n      </div>\n      {state.edit && <EditUser />}\n\n    </>\n  )\n}\n\nfunction UserBaseData(props) {\n  let flod = props.flod\n  let [state, setState] = useState({})\n  let userInfo = state.userInfo || {}\n  useEffect(() => {\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\n\n    return () => uns()\n  }, [])\n  return (\n    <>\n      <ul className={flod ? 'User-data-base' : 'User-data-base active'}>\n        <li><MailOutlined /><span> &nbsp; &nbsp;{userInfo.sociality}</span> </li>\n        <li><span style={{ color: '#cacaca' }}>|</span>\n          {userInfo.sex === 'man'\n            ? <ManOutlined style={{ marginLeft: '15px', color: '#0084FF' }} />\n            : <WomanOutlined style={{ marginLeft: '15px', color: '#e49eab' }} />\n          }\n        </li>\n      </ul>\n    </>\n  )\n}\n\nfunction UserDataList(props) {\n  let flod = props.flod\n  let [state, setState] = useState({})\n  let userInfo = state.userInfo || {}\n  useEffect(() => {\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\n\n    return () => uns()\n  }, [])\n  return (\n    <ul className={flod ? 'User-data-list active' : 'User-data-list'} >\n      <li><span>现居地</span><span>{userInfo.address}</span></li>\n      <li><span>生日</span><span>{userInfo.birthday && userInfo.birthday.slice(5)}</span></li>\n      <li><span>所在行业</span><span>{userInfo.industry}</span></li>\n      <li><span>个人简介</span><span>{userInfo.introduction}</span></li>\n      <li><span>社交地址</span><span>{userInfo.sociality}</span></li>\n    </ul>\n  )\n}\n\n","import React, { useCallback, useEffect, useState } from 'react'\nimport { userStore } from '../redux/redux'\nimport { FooterBar } from './toolbar'\nimport { withRouter } from 'react-router-dom'\nimport { LikeFilled } from '@ant-design/icons'\n\nexport default function UserBar() {\n  return (\n    <div className=\"toolbar\">\n      <Score />\n      <FooterBar />\n    </div>\n  )\n}\nfunction UserScore() {\n  let [state, setState] = useState(userStore.getState() || {})\n  let { userInfo = {} } = state\n  let isMe = state.cookieUser === userInfo.name\n  useEffect(() => {\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\n    return () => uns()\n  }, [])\n\n  let careQuestion = useCallback((one, sen) => {\n    userStore.dispatch({\n      type: 'activeSwitch',\n      active: one,\n    })\n    userStore.dispatch({\n      type: 'careActive',\n      careActive: sen,\n    })\n  }, [])\n  let collectActive = useCallback((one, sen) => {\n    userStore.dispatch({\n      type: 'activeSwitch',\n      active: one,\n    })\n    userStore.dispatch({\n      type: 'collectActive',\n      collectActive: sen,\n    })\n  }, [])\n  return (\n    <>\n      <div className=\"person-honor\">\n        <h4>个人成就</h4>\n        <ul>\n          <li><LikeFilled style={{ fontSize: '16px' }} /></li>\n          <li>\n            <span>获得了 {userInfo.agree} 次赞同</span>\n            <span>{userInfo.collect} 次收藏</span>\n            <span>{userInfo.favorite} 次喜欢</span>\n          </li>\n        </ul>\n      </div>\n      <div className=\"user-score\">\n        <div className=\"likes\" onClick={() => careQuestion(4, 1)}><h4>关注了</h4><span>{userInfo.care}</span></div>\n        <div className=\"fans\" onClick={() => careQuestion(4, 2)}><h4>关注者</h4><span>{userInfo.fans}</span></div>\n      </div>\n      <div>\n        <ul className=\"user-bar-list\">\n          <li onClick={() => careQuestion(4, 0)}><span>关注的问题</span><span>{state.attentionDynamic && state.attentionDynamic.length}</span></li>\n          <li onClick={() => collectActive(5, 0)}><span>收藏的问题</span><span>{state.collectQues && state.collectQues.length}</span></li>\n          <li onClick={() => collectActive(5, 1)}><span>收藏的回答</span><span>{state.collectComment && state.collectComment.length}</span></li>\n          <li onClick={() => careQuestion(4, 1)}><span>{isMe ? '我' : userInfo.sex === 'man' ? '他' : '她'}关注的人</span><span>{userInfo.care}</span></li>\n        </ul>\n      </div>\n    </>\n  )\n}\n\nconst Score = withRouter(UserScore)\n","import React, { Fragment, useCallback, useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { CheckCircleFilled, ManOutlined, WomanOutlined } from '@ant-design/icons'\n// import { FooterBar } from './toolbar'\n// import { Over, Attachment } from './invitation'\n// import { homeStore } from '../redux/redux'\nimport './user-page.css'\nimport { careStore, userStore, navStore } from '../redux/redux'\nimport { useParams } from 'react-router-dom'\n// import PostsFooter from './postfooter'\nimport { AttentionQuestion } from './user-container'\nimport { Link } from \"react-router-dom\"\n\n\nexport default function AttentionDynamic(props) {\n  let dynamicList = props.dynamicList\n  let state = props.state\n  let userInfo = state.userInfo || {}\n  let isMe = state.cookieUser === userInfo.name\n  let [active, setActive] = useState(userStore.getState().careActive || 0)\n  useEffect(() => {\n    let uns = userStore.subscribe(() => setActive(userStore.getState().careActive))\n    return () => uns()\n  })\n  let changeView = useCallback((idx) => {\n    userStore.dispatch({\n      type: 'careActive',\n      careActive: idx,\n    })\n    // setActive(idx)\n  }, [])\n  let Idx = -1\n  return (\n    <>\n      <div className=\"dynamicCareList\">\n        <ul>\n          <li onClick={() => changeView(0)} className={active === 0 ? 'careListActive' : ''}>关注的问题</li>\n          <li onClick={() => changeView(1)} className={active === 1 ? 'careListActive' : ''}>{isMe ? '我' : state.userInfo.sex === 'man' ? '他' : '她'}关注的人</li>\n          <li onClick={() => changeView(2)} className={active === 2 ? 'careListActive' : ''}>关注{isMe ? '我' : state.userInfo.sex === 'man' ? '他' : '她'}的人</li>\n        </ul>\n      </div>\n      <div>\n        <ul className=\"posts user-Dynamic cares\">\n          {active === 0 &&\n            dynamicList.map((item, idx) => {\n              if (item.status !== 'delete') {\n                Idx++\n                return (\n                  <Fragment key={idx}>\n                    {item.style === 'attention' && <AttentionQuestion item={item} state={props.state} idx={Idx} />}\n                  </Fragment>\n                )\n              }\n              return \"\"\n            })\n          }\n          {active !== 0 && <CaresList active={active} />\n          }\n        </ul>\n      </div>\n    </>\n  )\n}\n\nfunction CaresList(props) {\n  let active = props.active\n  let { id } = useParams()\n  let [state, setState] = useState(careStore.getState() || {})\n  let { myCares = [] } = state\n  let careList = active === 1 ? state.itCaresList : state.recevies\n\n  useEffect(() => {\n    axios.get(`/api/get-care/${id}`)\n      .then(res => {\n        let data = res.data\n        careStore.dispatch({\n          type: 'getCare',\n          cares: data.myCares,\n          ...data\n        })\n      })\n\n    let uns = careStore.subscribe(() => setState(careStore.getState()))\n    return () => uns()\n  }, [id])\n\n  let enterText = useCallback((e) => {\n    e.target.innerText = '取消关注'\n  }, [])\n  let leaveTXet = useCallback((e) => {\n    e.target.innerText = '已关注'\n  }, [])\n  // debugger\n  let updateCare = useCallback(({ type, item }) => {\n    if (state.cookieUser === undefined) {\n      navStore.dispatch({\n        type: 'toSign',\n        sign: false,\n      })\n      return\n    }\n    careStore.dispatch({\n      type: 'updateCare',\n      id: item.userId,\n    })\n\n    axios.post('/api/care', { type, careId: item.userId })\n      .catch(rej => {\n        if (rej.response.status === 401) {\n          navStore.dispatch({\n            type: 'toSign',\n            sign: false,\n          })\n        }\n      })\n  }, [state])\n\n  return (\n    <>\n      {careList && careList.map(item => {\n        let careBloon = myCares.find(it => it.careId === item.userId)\n        return (\n          <li key={item.createdAt} className=\"careList\">\n            <div><Link to={'/user/' + item.userId}><i style={{ backgroundImage: `url(${item.avatar})` }} className=\"careAvatar\"></i></Link></div>\n            <div>\n              <Link to={'/user/' + item.userId} className=\"cares-name\">\n                <h3>{item.name}</h3>\n                {item.sex === 'man'\n                  ? <ManOutlined style={{ marginLeft: '15px', color: '#0084FF' }} />\n                  : <WomanOutlined style={{ marginLeft: '15px', color: '#e49eab' }} />\n                }\n              </Link>\n              <span className=\"careSign\">{item.sign}</span>\n              <ul className=\"careinfo\">\n                <li><span>{item.commentCount} 回答</span></li>\n                <li><span>{item.agree} 赞同</span></li>\n                <li><span>{item.fans} 关注者</span></li>\n              </ul>\n            </div>\n            <div className=\"careButton\">\n              {careBloon\n                ? <button className=\"active\" onMouseEnter={enterText} onMouseLeave={leaveTXet} onClick={() => updateCare({ type: 'reCare', item: item })}>已关注</button>\n                : <button className=\"unactive\" onClick={() => updateCare({ type: 'toCare', item: item })}><CheckCircleFilled /> 关注{item.sex === 'man' ? '他' : '她'}</button>\n              }\n            </div>\n          </li>\n        )\n      })\n      }\n    </>\n  )\n}\n","import React, { Fragment, useCallback, useEffect, useState } from 'react'\nimport moment from 'moment';\nimport { Link } from \"react-router-dom\"\nimport { Attachment } from './invitation'\nimport './user-page.css'\nimport { userStore } from '../redux/redux'\nimport PostsFooter from './postfooter'\nimport { Skeleton } from 'antd';\n\n\nexport default function CollectList(props) {\n  let [state, setState] = useState(userStore.getState() || {})\n  let [active, setActive] = useState(userStore.getState().collectActive || 0)\n  useEffect(() => {\n    let uns = userStore.subscribe(() => {\n      setActive(userStore.getState().collectActive)\n      setState(userStore.getState())\n    })\n    return () => uns()\n  }, [props])\n  let dynamicList = props.dynamicList\n\n  let changeView = useCallback((idx) => {\n    userStore.dispatch({\n      type: 'collectActive',\n      collectActive: idx,\n    })\n  }, [])\n\n  let quesIdx = -1\n  let coomIdx = -1\n  return (\n    <>\n      <div className=\"dynamicCareList collectHead\">\n        <ul>\n          <li onClick={() => changeView(0)} className={active === 0 ? 'careListActive' : ''}>收藏的问题</li>\n          <li onClick={() => changeView(1)} className={active === 1 ? 'careListActive' : ''}>收藏的回答</li>\n        </ul>\n      </div>\n      <div>\n        <ul className=\"posts user-Dynamic collect\">\n          {\n            dynamicList.map((item, idx) => {\n              if (active === 0 && item.status !== 'delete' && item.type === 'question') {\n                quesIdx++\n                return (\n                  <Fragment key={idx}>\n                    { <CollectQuestion item={item} state={state} idx={quesIdx} />}\n                  </Fragment>\n                )\n              } else if (active === 1 && item.status !== 'delete' && item.type === 'comment') {\n                coomIdx++\n                return (\n                  <Fragment key={idx}>\n                    {<CollectComment item={item} state={state} idx={coomIdx} />}\n                  </Fragment>\n                )\n              }\n              return \"\"\n            })\n          }\n        </ul>\n      </div>\n    </>\n  )\n}\n\nexport function CollectQuestion(props) {\n  let idx = props.idx\n  let [state, setState] = useState(userStore.getState() || {})\n  useEffect(() => {\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\n    return () => uns()\n  }, [idx])\n  let item = props.item\n  let time = (item.likeAt || item.createdAt) * 1\n  let TIME = moment(time).endOf().fromNow(true) + '前'\n  let [footer, setFooter] = useState(false)\n\n  useEffect(() => {\n    getContent(item, idx, setFooter)\n  }, [item])\n  return (\n    <li key={item.likeAt || item.createdAt}>\n      <div className=\"dynamicList-header\"><span>收藏了问题</span><span>\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\n          new Date(time).toLocaleDateString().slice(5)\n          : TIME\n        }</span></div>\n      <div className=\"content-div\" name=\"content\">\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\n        {/* <Skeleton loading={loading}> */}\n        <p className=\"post-content\">\n          <span>{getContentText(item)}</span>\n        </p>\n        {/* </Skeleton> */}\n      </div>\n      <PostsFooter type='question' post={item} idx={idx} state={state} footer={footer} />\n    </li>\n  )\n}\n\nexport function CollectComment(props) {\n  let idx = props.idx\n  let [state, setState] = useState(userStore.getState() || {})\n  useEffect(() => {\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\n    return () => uns()\n  }, [idx])\n  let item = props.item\n  let avatar = item.avatar\n  let time = (item.likeAt || item.createdAt) * 1\n  let TIME = moment(time).endOf().fromNow(true) + '前'\n  let POST_TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\n  let [footer, setFooter] = useState(false)\n\n  useEffect(() => {\n    getContent(item, idx, setFooter)\n  }, [item])\n  return (\n    <li key={item.likeAt || item.createdAt}>\n      <div className=\"dynamicList-header\"><span>收藏了回答</span><span>\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\n          new Date(time).toLocaleDateString().slice(5)\n          : TIME\n        }</span></div>\n      <div className=\"content-div\" name=\"content\">\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\n      </div>\n      <div className=\"commenter-info dynamic-comment\" >\n        <i className=\"commenter-avatar\" style={{ backgroundImage: `url(${avatar})` }}></i>\n        <div className=\"commenter-flag\">\n          <Link className=\"commenter-name\" to={`/user/${item.userId}`}>{item.name}</Link>\n          <span className=\"commenter-sign\">{item.sign}</span>\n          <Attachment state={state} post={item} type='comment' />\n        </div>\n      </div>\n      <div className=\"content-div\" name=\"content\">\n        {/* <Skeleton loading={loading}> */}\n        <p><span>{getContentText(item)}</span></p>\n        {/* </Skeleton> */}\n        <span className=\"answerAt\">发布于 &nbsp;\n        {parseInt(POST_TIME) >= 1 && /天/g.test(POST_TIME) ?\n            moment(item.createdAt * 1).format(\"YYYY-MM-DD HH:mm:ss\")\n            : POST_TIME\n          }\n        </span>\n        <div className=\"commenter-footer\">\n          <PostsFooter type={'comment'} comment={item} idx={idx} state={state} footer={footer} />\n        </div>\n      </div>\n    </li>\n  )\n}\nfunction getContentText(item) {\n  if (item.content) {\n    if (item.content[0] !== '{') {\n      return item.content\n    } else {\n      return JSON.parse(item.content).text\n    }\n  }\n  return\n}\nfunction getContent(item, idx, setFooter) {\n\n  let commentItem = document.querySelectorAll(\".content-div >p> span\")[idx]\n  if (commentItem && item.content[0] === '{') {\n    commentItem.innerHTML = JSON.parse(item.content).html\n    setFooter(true)\n  }\n}\n","import React, { useCallback, useEffect, useState, Fragment } from 'react'\nimport moment from 'moment';\nimport UserBar from './user-Bar'\nimport { Over, Attachment } from './invitation'\n// import { homeStore } from '../redux/redux'\nimport './user-page.css'\nimport { userStore } from '../redux/redux'\n// import { useParams } from 'react-router-dom'\nimport PostsFooter from './postfooter'\nimport AttentionDynamic from './caresList'\nimport CollectList, { CollectQuestion, CollectComment } from './collectList'\nimport { Link } from \"react-router-dom\"\nimport { Skeleton } from 'antd';\n\nexport default function () {\n  return (\n    <div className=\" user-container\">\n      <div className=\"body-container\">\n        <UserMain />\n        <UserBar />\n      </div>\n    </div>\n  )\n}\n\nexport function UserMain({ dynamic = true }) {\n  let [flag, setFlag] = useState(20)\n  let [active, reActive] = useState(userStore.getState().active || 0)\n  useEffect(() => {\n    let uns = userStore.subscribe(() => reActive(userStore.getState().active))\n    return () => uns()\n  })\n  useEffect(() => {\n    setFlag(30 * active + 20 + 40 * active)\n  }, [active])\n  let getMain = useCallback((idx) => {\n    userStore.dispatch({\n      type: 'activeSwitch',\n      active: idx,\n    })\n    // reActive(idx)\n  }, [])\n\n  return (\n    <div >\n      <div className=\"user-main\">\n        <ul className=\"user-main-header\">\n          <li onClick={() => getMain(0)}>动态</li>\n          <li onClick={() => getMain(1)}>回答</li>\n          <li onClick={() => getMain(2)}>提问</li>\n          <li onClick={() => getMain(3)}>赞同</li>\n          <li onClick={() => getMain(4)}>关注</li>\n          <li onClick={() => getMain(5)}>收藏</li>\n        </ul>\n        <div className=\"user-main-flag\" style={{ left: flag + 'px' }}></div>\n        {dynamic && <DynamicList active={active} />}\n      </div>\n      {dynamic && <Over />}\n    </div>\n  )\n}\n\nfunction DynamicList(props) {\n  let [state, setState] = useState(userStore.getState() || {})\n  let { userInfo = {} } = state\n  useEffect(() => {\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\n\n    return () => uns()\n  }, [])\n  // debugger\n  return (\n    <div className=\"dynamicList\">\n      { props.active !== 4 && props.active !== 5 &&\n        <div className=\"dynamic-head\">\n          <span>\n            {userInfo.name === state.cookieUser\n              ? <span>我的{['动态', '回答', '提问', '赞同'][props.active]}</span>\n              : <span>{userInfo.sex === 'man' ? '他' : '她'}的{['动态', '回答', '提问', '赞同'][props.active]}</span>\n            }\n          </span>\n        </div>\n      }\n      <div>\n        <PostMain active={props.active} />\n      </div>\n\n    </div>\n  )\n}\n\n\nfunction PostMain(props) {\n  let active = props.active\n  let [state, setState] = useState(userStore.getState())\n  let { attentionDynamic = [], commentDynamic = [], likeDynamic = [], postDynamic = [], collectComment = [], collectQues = [] } = state\n  let [loading, setLoading] = useState(true)\n  let dynamic = [...attentionDynamic, ...commentDynamic, ...likeDynamic, ...postDynamic, ...collectComment, ...collectQues]\n  let dynamicArray = [commentDynamic, postDynamic, likeDynamic, attentionDynamic, [...collectComment, ...collectQues]]\n\n  useEffect(() => {\n    if (state.attentionDynamic || state.commentDynamic || state.likeDynamic) {\n      setLoading(false)\n    }\n  }, [state])\n  useEffect(() => {\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\n    return () => uns()\n  }, [])\n  // if (!state) state = {}\n  // console.log(state)\n  // debugger\n  let dynamicList = loading ? new Array(6).fill('') : []\n  if (!loading && active === 0) {\n    dynamicList = sortAtTime(dynamic)\n  } else if (!loading && active !== 0) {\n    dynamicList = sortAtTime(dynamicArray[active - 1])\n  }\n\n  let Idx = -1\n  return (\n    <>\n      {active === 4\n        ? <AttentionDynamic dynamicList={dynamicList} state={state} />\n        : <>\n          {active === 5 && <CollectList dynamicList={dynamicList} state={state} />}\n          {active !== 4 && active !== 5 &&\n            <ul className=\"posts user-Dynamic\">\n              {\n                dynamicList.map((item, i) => {\n                  if (item.status !== 'delete') {\n                    Idx++\n                    return (\n                      <Skeleton key={i} loading={loading}>\n                        {item.style === 'comment' && <AnswerDynamic item={item} state={state} idx={Idx} />}\n                        {item.style === 'post' && <PostDynamic item={item} state={state} idx={Idx} />}\n                        {item.style === 'likeComment' && <LikeDynamic item={item} state={state} idx={Idx} />}\n                        {item.style === 'attention' && <AttentionQuestion item={item} state={state} idx={Idx} />}\n                        {item.style === 'collect' &&\n                          <>\n                            {item.type === 'question' && <CollectQuestion item={item} state={state} idx={Idx} />}\n                            {item.type === 'comment' && <CollectComment item={item} state={state} idx={Idx} />}\n                          </ >\n                        }\n                      </Skeleton>\n                    )\n                  }\n                  return \"\"\n                })\n              }\n            </ul>\n          }\n        </>\n\n      }\n\n    </>\n  )\n}\n\n\n\n\n\nfunction AnswerDynamic(props) {\n  let idx = props.idx\n  // let state = props.state\n  let state = props.state || {}\n  let { userInfo = {} } = state\n  let item = props.item\n  let avatar = userInfo.avatar\n  let time = (item.likeAt || item.createdAt) * 1\n  let TIME = moment(time).endOf().fromNow(true) + '前'\n  let POST_TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\n  let [footer, setFooter] = useState(false)\n\n  useEffect(() => {\n    getContent(item, idx, setFooter)\n  }, [item])\n\n  return (\n    <li key={item.likeAt || item.createdAt}>\n      <div className=\"dynamicList-header\"><span>回答了问题</span><span>\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\n          new Date(time).toLocaleDateString().slice(5)\n          : TIME\n        }\n      </span></div>\n      <div className=\"content-div\" name=\"content\">\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\n      </div>\n      <div className=\"commenter-info dynamic-comment\" >\n        <i className=\"commenter-avatar\" style={{ backgroundImage: `url(${avatar})` }}></i>\n        <div className=\"commenter-flag\">\n          <Link className=\"commenter-name\" to=\".\">{userInfo.name}</Link>\n          <span className=\"commenter-sign\">{userInfo.sign}</span>\n          <Attachment state={state} post={item} type='comment' />\n        </div>\n      </div>\n      <div className=\"content-div\" name=\"content\">\n        <p><span>{getContentText(item)}</span></p>\n        <span className=\"answerAt\">发布于 &nbsp;\n        {parseInt(POST_TIME) * 1 >= 1 && /天/g.test(POST_TIME) ?\n            moment(item.createdAt * 1).format(\"YYYY-MM-DD HH:mm:ss\")\n            : POST_TIME\n          }</span>\n        <div className=\"commenter-footer\">\n          <PostsFooter type={'comment'} comment={item} idx={idx} state={state} footer={footer} />\n        </div>\n      </div>\n    </li>\n  )\n}\n\nfunction PostDynamic(props) {\n  let idx = props.idx\n  let state = props.state || {}\n  let [footer, setFooter] = useState(false)\n\n  let item = props.item\n  let time = (item.likeAt || item.createdAt) * 1\n\n  let TIME = moment(time).endOf().fromNow(true) + '前'\n\n  useEffect(() => {\n    getContent(item, idx, setFooter)\n  }, [item])\n\n  return (\n    <li key={item.likeAt || item.createdAt}>\n      <div className=\"dynamicList-header User-post-time\"><span>发布了问题</span><span>&nbsp;&nbsp;:&nbsp;\n         {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\n          moment(item.createdAt * 1).format(\"YYYY-MM-DD HH:mm:ss\")\n          : TIME\n        }</span>\n        <Attachment state={state} post={item} type='post' />\n      </div>\n      <div className=\"content-div\" name=\"content\">\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\n        <p className=\"post-content\">\n          <span>{getContentText(item)}</span>\n        </p>\n      </div>\n      <PostsFooter type={'question'} post={item} idx={idx} state={state} footer={footer} />\n    </li>\n  )\n}\n\nfunction LikeDynamic(props) {\n  let idx = props.idx\n  let state = props.state || {}\n\n  let item = props.item\n  let avatar = item.avatar\n  let time = (item.likeAt || item.createdAt) * 1\n  let TIME = moment(time).endOf().fromNow(true) + '前'\n  let POST_TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\n  let [footer, setFooter] = useState(false)\n\n  useEffect(() => {\n    getContent(item, idx, setFooter)\n  }, [item])\n  return (\n    <li key={item.likeAt || item.createdAt}>\n      <div className=\"dynamicList-header\"><span>赞同了回答</span><span>\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\n          new Date(time).toLocaleDateString().slice(5)\n          : TIME\n        }</span></div>\n      <div className=\"content-div\" name=\"content\">\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\n      </div>\n      <div className=\"commenter-info dynamic-comment\" >\n        <i className=\"commenter-avatar\" style={{ backgroundImage: `url(${avatar})` }}></i>\n        <div className=\"commenter-flag\">\n          <Link className=\"commenter-name\" to={`/user/${item.commenterId}`}>{item.name}</Link>\n          <span className=\"commenter-sign\">{item.sign}</span>\n          <Attachment state={state} post={item} type='comment' />\n        </div>\n      </div>\n      <div className=\"content-div\" name=\"content\">\n        <p className=\"likeComment\"><span >{getContentText(item)}</span></p>\n        <span className=\"answerAt\">发布于  &nbsp;\n        {parseInt(POST_TIME) * 1 >= 1 && /天/g.test(POST_TIME) ?\n            moment(item.createdAt * 1).format(\"YYYY-MM-DD HH:mm:ss\")\n            : POST_TIME\n          }\n        </span>\n        <div className=\"commenter-footer\">\n          <PostsFooter type={'comment'} comment={item} idx={idx} state={state} footer={footer} />\n        </div>\n      </div>\n    </li>\n  )\n}\n\nexport function AttentionQuestion(props) {\n  let idx = props.idx\n  let state = props.state || {}\n\n  let item = props.item\n  let time = (item.likeAt || item.createdAt) * 1\n  let TIME = moment(time).endOf().fromNow(true) + '前'\n  let [footer, setFooter] = useState(false)\n\n  useEffect(() => {\n    getContent(item, idx, setFooter)\n  }, [item])\n  return (\n    <li key={item.likeAt || item.createdAt}>\n      <div className=\"dynamicList-header\"><span>关注了问题</span><span>\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\n          new Date(time).toLocaleDateString().slice(5)\n          : TIME\n        }\n      </span></div>\n      <div className=\"content-div\" name=\"content\">\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\n        <p className=\"post-content\">\n          <span>{getContentText(item)}</span>\n        </p>\n      </div>\n      <PostsFooter type={'question'} post={item} idx={idx} state={state} footer={footer} />\n    </li>\n  )\n}\n\n//根据时间排序\n\nfunction sortAtTime(array = []) {\n  return Array.from(array).sort((a, b) => {\n    let bCreated = b.likeAt ? b.likeAt * 1 : b.createdAt * 1\n    let aCreated = a.likeAt ? a.likeAt * 1 : a.createdAt * 1\n    return bCreated - aCreated\n  })\n}\n\n//处理时间 \n// function dateTime(time) {\n//   let org = \n// }\n\nfunction getContentText(item) {\n  if (item.content) {\n    if (item.content[0] !== '{') {\n      return item.content\n    } else {\n      return JSON.parse(item.content).text\n    }\n  }\n  return\n}\n\nfunction getContent(item, idx, setFooter) {\n\n  let commentItem = document.querySelectorAll(\".content-div > p > span\")[idx]\n\n  if (commentItem && item.content[0] === '{') {\n    commentItem.innerHTML = JSON.parse(item.content).html\n    setFooter(true)\n  }\n}\n","import React, { useEffect, useState, useCallback } from 'react'\nimport Nav from '../components/header-nav'\nimport Question from '../components/question'\nimport { homeStore, pageStore, userStore } from '../redux/redux'\nimport UserHeader from '../components/user-header'\nimport UserContainer, { UserMain } from '../components/user-container'\nimport { useParams } from 'react-router-dom'\nimport axios from 'axios'\nimport CareMessage from '../components/care-message'\nexport default function () {\n  let { id } = useParams()\n  let [state, setState] = useState(homeStore.getState())\n  useEffect(() => {\n    let uns = homeStore.subscribe(() => {\n      let newData = homeStore.getState()\n      let { posts = [] } = newData\n      setState(newData)\n      userStore.dispatch({\n        type: 'getInitial',\n        attention: newData.attention,\n        poors: newData.poors,\n        favoriteQues: newData.favoriteQues,\n        collect_quesActive: newData.collect_quesActive,\n        attentionDynamic: posts.filter(it => it.style === 'attention'),\n        postDynamic: posts.filter(it => it.style === 'post'),\n        collectQues: posts.filter(it => it.style === 'collect'),\n      })\n    })\n    return () => uns()\n  }, [id])\n  useEffect(() => {\n    if (id === 'undefined') {\n      window.location.replace('/')\n      return\n    }\n    axios.get(`/api/user-data/${id}`)\n      .then(res => {\n        let initial = res.data\n        userStore.dispatch({\n          type: 'getInitial',\n          ...initial,\n        })\n        homeStore.dispatch({\n          type: 'getData',\n          ...initial,\n          posts: [...initial.postDynamic, ...initial.attentionDynamic, ...initial.collectQues]\n        })\n        pageStore.dispatch({\n          type: 'getInitial',\n          ...initial,\n          commenterInfo: [...initial.likeDynamic, ...initial.commentDynamic, ...initial.collectComment]\n        })\n      })\n\n    let pageuns = pageStore.subscribe(() => {\n      let newData = pageStore.getState()\n      userStore.dispatch({\n        type: 'getInitial',\n        ...newData,\n        favoriteComment: newData.favoriteComment,\n        collect_commActive: newData.collect_commActive,\n        likeDynamic: newData.commenterInfo.filter(it => it.style === 'likeComment'),\n        commentDynamic: newData.commenterInfo.filter(it => it.style === 'comment'),\n        collectComment: newData.commenterInfo.filter(it => it.style === 'collect'),\n      })\n    })\n    return () => pageuns()\n  }, [id])\n\n  return (\n    <>\n      <Nav page={'user'}><UserNavSlider /></Nav>\n      {state.question &&\n        <Question />\n      }\n      <UserHeader />\n      <UserContainer />\n    </>\n  )\n}\nfunction UserNavSlider() {\n  let [state, setState] = useState({})\n  let userInfo = state.userInfo || {}\n\n  useEffect(() => {\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\n    return () => uns()\n  }, [])\n  let editState = useCallback(() => {\n    userStore.dispatch({\n      type: 'editState',\n      edit: true\n    })\n  }, [])\n  return (\n    <div className=\"user-ndv-slider\">\n      <UserMain dynamic={false} />\n      {state.cookieUser === userInfo.name\n        ? <div className=\"user-editing\" onClick={editState}>编辑个人资料</div>\n        : <div className=\"other-user\"><CareMessage careInfo={state.userInfo} /></div>\n      }\n    </div>\n  )\n}\n","import React from 'react';\n// import logo from './logo.svg';\nimport './App.css';\n// import { Button } from 'antd';\n// 由于 antd 组件的默认文案是英文，所以需要修改为中文\n\n// import 'antd/dist/antd.css';\nimport Home from './pages/home'\nimport './index.css';\nimport Signin from './pages/signin.js'\nimport Signup from './components/signup-component'\nimport PostPage from './pages/post'\nimport User from './pages/user'\n// import Edit from './components/edit-userInfo'\n// import Main from './layout'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\n\n\nconst App = () => (\n  <div className=\"App\">\n    <Router>\n      <Switch>\n        <Route exact path=\"/\">\n          <Home />\n        </Route>\n        <Route path=\"/index\">\n          <Home />\n        </Route>\n        <Route path=\"/sign\">\n          <Signin />\n        </Route>\n        <Route path=\"/sign_up\">\n          <Signup />\n        </Route>\n        <Route path=\"/post-page/:id\">\n          <PostPage />\n        </Route>\n        {/* <Route path=\"/user/edit\">\n          <Edit />\n        </Route> */}\n        <Route path=\"/user/:id\">\n          <User />\n        </Route>\n        <Redirect to=\"/\" />\n      </Switch>\n    </Router>\n  </div>\n)\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport moment from 'moment';\nimport 'moment/locale/zh-cn';\nimport zhCN from 'antd/es/locale/zh_CN';\nimport { ConfigProvider } from 'antd'\n\nmoment.locale('zh-cn');\nReactDOM.render(\n  <React.StrictMode>\n    <ConfigProvider locale={zhCN}>\n      <App />\n    </ConfigProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}