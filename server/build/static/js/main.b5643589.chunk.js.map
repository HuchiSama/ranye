{"version":3,"sources":["redux/redux.js","components/form.js","components/sign.js","components/care-message.js","components/footer.js","components/signup-component.js","components/header-nav.js","components/question.js","components/endComment.js","components/ansComment.js","components/postfooter.js","components/invitation.js","components/toolbar.js","components/body-container.js","pages/home.js","components/signin-component.js","pages/signin.js","components/post-container.js","components/invite.js","components/post-page.js","pages/post.js","components/edit-userInfo.js","components/user-header.js","components/user-Bar.js","components/caresList.js","components/collectList.js","components/user-container.js","pages/user.js","App.js","serviceWorker.js","index.js"],"names":["navActions","getInitial","state","action","produce","draft","key","toSign","sign","toChat","chat","navStore","createStore","type","question","invitedList","chatList","cares","signActions","formRedirect","sucessSignup","toSignin","form","captcha","protocol","buttonText","other","signStore","homeActions","postQuestion","postCount","posts","getData","toAttention","attention","postId","axios","post","qusId","createdAt","Date","now","forEach","it","qusLike","like","poorButton","poors","style","poor","deletePost","collect","collect_quesActive","collectId","id","favorite","favoriteQues","favoriteId","hoverAvatar","hover","homeStore","pageActions","writeAnswer","postAnswer","commenterInfo","pageId","attentionLength","likeComment","likes","commentId","poster","agree","userInfo","commentPoors","deleteComment","comments","collect_commActive","favoriteComment","ansCommentList","ansComments","invite","upDateInvite","inviteList","pageStore","userActions","editState","edit","editUserInfo","editEnd","updateActive","activeSwitch","active","careActive","collectActive","userStore","careAction","updateCare","len","myCares","length","i","careId","getCare","careStore","ansComAction","postComment","newList","likeAnsComment","myLikeAnsComment","ansCommentId","poorAnsComment","myPoorAnsComment","postEndComment","endCommentList","idx","endComment","getEndCommentList","likeEndComment","myLikeEndComment","endCommentId","poorEndComment","myPoorEndComment","ansComStore","Form","props","signTo","e","preventDefault","el","target","name","value","password","then","item","data","document","querySelector","click","errRef","current","innerHTML","window","location","pathname","history","push","dispatch","replace","catch","console","log","nextPassword","trim","email","accQuery","emailQuery","setTimeout","classList","remove","add","toSignUp","toSignIn","getState","createRef","className","onclick","this","children","method","onSubmit","filter","to","onClick","ref","footer","xieyi","React","Component","withRouter","Sign","useState","setState","setAccQuery","setemailQuery","useCallback","textContent","useEffect","uns","subscribe","switchCaptcha","src","accountInput","res","emailInput","placeholder","title","alt","onChange","TextArea","Input","careBloon","setCareBl","careInfo","setChat","recare","onmouseenter","childNodes","innerText","onmouseleave","get","rej","Array","from","some","userId","undefined","cookieUser","response","status","HeartOutlined","CommentOutlined","ChatWindow","targetInfo","setValue","msgList","updateMsg","ws","setWS","WebSocket","sendMsg","send","JSON","stringify","content","targetName","targetId","targetAvatar","avatar","onopen","msg","onclose","onmessage","event","parse","flat","editInput","webClose","close","scrollTop","offsetHeight","sendEnter","shiftKey","keyCode","width","innerWidth","height","innerHeight","CloseOutlined","map","moment","format","created","backgroundImage","userAvatar","rows","onKeyDown","Footer","Logup","Success","homeDis","setHome","inviteMsg","setInviteMsg","byCareList","byCareMsg","setByCareMsg","byCommentLike","byCommentMsg","setByCommentMsg","msgSum","setMsgSum","invited","setInvited","initial","invitedLen","careLen","commentLen","pullUL","clickEvent","leaveEvent","addEventListener","enterEvent","removeEventListener","invitePull","stopPropagation","useGetInvite","chatSum","setChatSum","updateChat","chatPull","userName","useGetChat","signState","setSignState","signUns","setHomeNone","clearSignDIV","FROM_DIV","homeList","sliderNav","slider","page","documentElement","wheelDelta","top","SearchOutlined","fontSize","color","BellFilled","MessageFilled","HomeFilled","MessageItem","ChatComponent","PullDown","display","cookie","setCookie","sign_out","toEditpage","myHome","UserOutlined","FormOutlined","LogoutOutlined","setActive","MessageList","scroll","setScroll","ProjectFilled","HeartFilled","LikeFilled","InvitedItem","CareItem","CommentLikeItem","image","Empty","PRESENTED_IMAGE_SIMPLE","description","TIME","endOf","fromNow","TIME_CONTENT","parseInt","test","setCare","openChat","setOpenChat","setTargetInfo","headLabelCare","setHeadLabelCare","headLabelOther","setHeadLabelOther","careChat","strangerChat","openChatWindow","setUnread","careCount","count","otherCount","unread","CareChat","StrangerChat","notRead","submitQus","postContent","closeQUs","contentEditable","EndCommentList","setEndComment","inputComment","sendComment","likeORpoor","t","toSendEndComment","targetUserId","newEndCommentList","DislikeFilled","Item","autoSize","marginRight","onInput","htmlType","author","actions","datetime","CommentAns","AnsComment","allView","setAllView","hide","setHide","updateEndCommentList","commentIcon","setCommIcon","newData","hideORview","WechatFilled","slice","newAnsCommentList","PostsFooter","ques","comment","setPost","poorActive","setPoor","setCollect","favoriteActive","setFavorite","homeUns","newPost","find","postUns","newComment","getCollect","posterId","commenterId","getFavorite","useSelectState","fold","setFold","span","querySelectorAll","p","foldContent","arr","includes","ansComment","setAnsComment","ansCommentflad","CaretUpFilled","CaretDownFilled","answerCount","StarFilled","DownOutlined","UpOutlined","PostMain","Over","Attachment","useParams","mePost","attachment","setAttachment","attachmentClick","postNormal","changeAttachment","upPosts","postIdx","time","setData","ToolbarHead","UserInfo","user","UserSign","Recommend","FooterBar","signOut","avatarChange","setHover","avatarCutover","FormData","append","files","headers","inputAvatar","pushUserPage","switchAvatar","clearAvatarEvent","userAvatarDiv","SyncOutlined","FileFilled","signChange","setAttribute","focus","onblur","user_sign","lastSign","useRef","signInput","text","EditOutlined","upData","recommendList","recommend","HomeNavChild","Login","Update","Comment","ToolBar","commentNoamal","AnswerDiv","CommentList","submitAnswer","a","getNewCommenter","commentIdx","CommentItem","PosterInfo","toUserPage","one","sen","commentCount","fans","outerRef","foo","onmousewheel","inviteEnd","clearInvite","body","size","InviteItem","complete","setComplete","clear","setClear","updateInvite","temp","toInvite","careName","newInvites","industry","onMouseEnter","onMouseLeave","borderColor","setInvite","result","PostNavChild","PostInfo","PostTitle","Poster","Attention","upHide","setFlod","foldCutover","UserAddOutlined","FireFilled","pageview","upVoke","attenRef","fontWeight","Sex","sex","Birthday","birthday","Address","address","Industry","Introduction","introduction","Sociality","sociality","setSex","editSex","saveEdit","Group","checked","EditFilled","setSign","limit","setLimit","editSign","editSignInput","setAddress","editaddress","editAddressIput","setBirthday","editBirthday","date","setIndustry","editIndustry","editIndustryIput","summary","setSummary","editSummary","editIntroduction","setSociality","editSociality","editSocialityIput","UserHeader","flod","flodClick","CameraOutlined","UserDataList","UserBaseData","MailOutlined","ManOutlined","marginLeft","WomanOutlined","UserBar","Score","isMe","careQuestion","care","attentionDynamic","collectQues","collectComment","AttentionDynamic","dynamicList","changeView","Idx","AttentionQuestion","CaresList","careList","itCaresList","recevies","enterText","leaveTXet","CheckCircleFilled","CollectList","quesIdx","coomIdx","CollectQuestion","CollectComment","likeAt","toLocaleDateString","POST_TIME","UserMain","dynamic","flag","setFlag","reActive","getMain","left","DynamicList","commentDynamic","likeDynamic","postDynamic","dynamicArray","sortAtTime","AnswerDynamic","PostDynamic","LikeDynamic","array","sort","b","pageuns","UserNavSlider","App","exact","path","Boolean","hostname","match","locale","ReactDOM","render","StrictMode","zhCN","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.b5643589.chunk.js","sourcesContent":["import { createStore } from 'redux'\r\nimport { produce } from 'immer'\r\nimport axios from 'axios'\r\n\r\n\r\nconst navActions = {\r\n  getInitial(state, action) {\r\n    return produce(state, draft => {\r\n      for (let key in action) {\r\n        draft[key] = action[key]\r\n      }\r\n    })\r\n  },\r\n  toSign(state, action) {\r\n    return produce(state, draft => {\r\n      draft.sign = action.sign\r\n    })\r\n  },\r\n  toChat(state, action) {\r\n    return produce(state, draft => {\r\n      draft.chat = action.chat\r\n    })\r\n  },\r\n}\r\n\r\nfunction navReducer(state, action) {\r\n  if (action.type in navActions) {\r\n    return navActions[action.type](state, action)\r\n  }\r\n  return state\r\n}\r\n\r\nexport const navStore = createStore(navReducer, {\r\n  question: false,\r\n  sign: true,\r\n  invitedList: [],\r\n  chat: false,\r\n  chatList: [],\r\n  cares: {}\r\n})\r\n\r\n\r\nconst signActions = {\r\n  formRedirect(state, action) {\r\n    return produce(state, (draft) => {\r\n      for (let key in action) {\r\n        draft[key] = action[key]\r\n      }\r\n    })\r\n  },\r\n  sucessSignup(state, action) {\r\n    return produce(state, (draft) => {\r\n      for (let key in action) {\r\n        draft[key] = action[key]\r\n      }\r\n    })\r\n  },\r\n  toSignin(state, action) {\r\n    return produce(state, (draft) => {\r\n      draft.sucessSignup = action.sucessSignup\r\n      draft.form = 'signin'\r\n      draft.captcha = true\r\n      draft.protocol = \"未注册手机验证后自动登录，注册即代表同意《知乎协议》《隐私保护指引》\"\r\n      draft.buttonText = '登录'\r\n      draft.other = true\r\n    })\r\n  },\r\n}\r\n\r\nfunction signReducer(state, action) {\r\n  if (action.type in signActions) {\r\n    return signActions[action.type](state, action)\r\n  }\r\n  return state\r\n}\r\n\r\nexport const signStore = createStore(signReducer, {\r\n  form: 'signin',\r\n  captcha: true,\r\n  protocol: \"未注册手机验证后自动登录，注册即代表同意《知乎协议》《隐私保护指引》\",\r\n  buttonText: '登录',\r\n  other: true\r\n})\r\n\r\n\r\n//homeStore\r\nconst homeActions = {\r\n  postQuestion(state, action) {\r\n    // debugger\r\n    return produce(state, draft => {\r\n      draft.question = action.question\r\n      draft.postCount = action.postCount\r\n      draft.posts = action.posts\r\n    })\r\n  },\r\n  question(state, action) {\r\n    return produce(state, draft => {\r\n      draft.question = action.question\r\n    })\r\n  },\r\n  getData(state, action) {\r\n    return produce(state, draft => {\r\n      for (let key in action) {\r\n        draft[key] = action[key]\r\n      }\r\n    })\r\n  },\r\n  toAttention(state, action) {\r\n    return produce(state, draft => {\r\n      if (draft.attention[action.postId]) {\r\n        axios.post('/api/attention/', {\r\n          qusId: action.postId,\r\n          createdAt: Date.now(),\r\n          type: 'revoke',\r\n        })\r\n        draft.posts.forEach(it => {\r\n          if (it.postId === action.postId) {\r\n            it.qusLike = action.like - 1\r\n          }\r\n        })\r\n        draft.attention[action.postId] = false\r\n      } else {\r\n        axios.post('/api/attention/', {\r\n          qusId: action.postId,\r\n          createdAt: Date.now(),\r\n          type: 'attention',\r\n        })\r\n        draft.posts.forEach(it => {\r\n          if (it.postId === action.postId) {\r\n            it.qusLike = action.like + 1\r\n          }\r\n        })\r\n        draft.attention[action.postId] = true\r\n      }\r\n    })\r\n  },\r\n  poorButton(state, action) {\r\n    // debugger\r\n    return produce(state, draft => {\r\n      if (draft.poors[action.postId]) {\r\n        axios.post('/api/attention/', {\r\n          qusId: action.postId,\r\n          type: 'revoke',\r\n          style: 'poor',\r\n          createdAt: Date.now()\r\n        })\r\n        draft.poors[action.postId] = false\r\n        draft.posts.forEach(it => {\r\n          if (it.postId === action.postId) {\r\n            it.poor = action.poor - 1\r\n          }\r\n        })\r\n\r\n      } else {\r\n        axios.post('/api/attention/', {\r\n          qusId: action.postId,\r\n          type: 'attention',\r\n          style: 'poor',\r\n          createdAt: Date.now()\r\n        })\r\n        draft.poors[action.postId] = true\r\n        draft.posts.forEach(it => {\r\n          if (it.postId === action.postId) {\r\n            it.poor = action.poor + 1\r\n          }\r\n        })\r\n      }\r\n    })\r\n  },\r\n  deletePost(state, action) {\r\n    return produce(state, draft => {\r\n      draft.postCount = action.postCount\r\n      draft.posts = action.posts\r\n    })\r\n  },\r\n  collect(state, action) {\r\n    return produce(state, draft => {\r\n      if (draft.collect_quesActive[action.collectId]) {\r\n        axios.post('/api/collect/', {\r\n          id: action.id,\r\n          collectId: action.collectId,\r\n          type: 'revoke',\r\n          style: 'question'\r\n        })\r\n        draft.collect_quesActive[action.collectId] = false\r\n      } else {\r\n        axios.post('/api/collect/', {\r\n          id: action.id,\r\n          collectId: action.collectId,\r\n          type: 'collect',\r\n          style: 'question'\r\n        })\r\n        draft.collect_quesActive[action.collectId] = true\r\n      }\r\n    })\r\n  },\r\n  favorite(state, action) {\r\n    return produce(state, draft => {\r\n      if (draft.favoriteQues[action.favoriteId]) {\r\n        axios.post('/api/favorite/', {\r\n          id: action.id,\r\n          favoriteId: action.favoriteId,\r\n          type: 'revoke',\r\n          style: 'question'\r\n        })\r\n        draft.favoriteQues[action.favoriteId] = false\r\n      } else {\r\n        axios.post('/api/favorite/', {\r\n          id: action.id,\r\n          favoriteId: action.favoriteId,\r\n          type: 'favorite',\r\n          style: 'question'\r\n        })\r\n        draft.favoriteQues[action.favoriteId] = true\r\n      }\r\n    })\r\n  },\r\n  hoverAvatar(state, action) {\r\n    return produce(state, draft => {\r\n      draft.hover = action.hover\r\n    })\r\n  },\r\n\r\n}\r\n\r\nfunction homeReducer(state, action) {\r\n  if (action.type in homeActions) {\r\n    return homeActions[action.type](state, action)\r\n  }\r\n  return state\r\n}\r\nexport const homeStore = createStore(homeReducer, {\r\n  question: false,\r\n  hover: false,\r\n})\r\n\r\n//post-pageStore\r\nconst pageActions = {\r\n  writeAnswer(state, action) {\r\n    return produce(state, draft => {\r\n      draft.writeAnswer = action.writeAnswer\r\n    })\r\n  },\r\n  getInitial(state, action) {\r\n    return produce(state, draft => {\r\n      for (let key in action) {\r\n        draft[key] = action[key]\r\n      }\r\n    })\r\n  },\r\n  postAnswer(state, action) {\r\n    // debugger\r\n    return produce(state, (draft) => {\r\n      draft.commenterInfo = action.commenterInfo\r\n      draft.writeAnswer = false\r\n    })\r\n  },\r\n  toAttention(state, action) {\r\n    return produce(state, (draft) => {\r\n      if (action.attention) {\r\n        axios.post('/api/attention/', {\r\n          qusId: action.pageId,\r\n          type: 'attention',\r\n          createdAt: Date.now()\r\n        })\r\n        draft.attention = action.attention\r\n        draft.attentionLength++\r\n      } else {\r\n        axios.post('/api/attention/', {\r\n          qusId: action.pageId,\r\n          type: 'revoke',\r\n          createdAt: Date.now()\r\n        })\r\n        draft.attention = action.attention\r\n        draft.attentionLength--\r\n      }\r\n    })\r\n  },\r\n  likeComment(state, action) {\r\n    // debugger\r\n    return produce(state, draft => {\r\n      if (draft.likes[action.commentId]) {\r\n        axios.post('/api/likeComment/', {\r\n          commentId: action.commentId,\r\n          type: 'revoke',\r\n          createdAt: Date.now()\r\n        })\r\n        draft.commenterInfo.forEach(it => {\r\n          if (it.commentId === action.commentId) {\r\n            it.like = action.like - 1\r\n          }\r\n        })\r\n        draft.poster ? draft.poster.agree -= 1 : draft.userInfo.agree -= 1\r\n        draft.likes[action.commentId] = false\r\n      } else {\r\n        axios.post('/api/likeComment/', {\r\n          commentId: action.commentId,\r\n          type: 'active',\r\n          createdAt: Date.now()\r\n        })\r\n        draft.commenterInfo.forEach(it => {\r\n          if (it.commentId === action.commentId) {\r\n            it.like = action.like + 1\r\n          }\r\n        })\r\n        draft.poster ? draft.poster.agree += 1 : draft.userInfo.agree += 1\r\n        draft.likes[action.commentId] = true\r\n      }\r\n    })\r\n  },\r\n  poorButton(state, action) {\r\n    // debugger\r\n    return produce(state, draft => {\r\n      if (draft.commentPoors[action.commentId]) {\r\n        axios.post('/api/likeComment/', {\r\n          commentId: action.commentId,\r\n          type: 'revoke',\r\n          style: 'poor',\r\n          createdAt: Date.now()\r\n        })\r\n        draft.commenterInfo.forEach(it => {\r\n          if (it.commentId === action.commentId) {\r\n            it.poor = action.poor - 1\r\n          }\r\n        })\r\n        draft.commentPoors[action.commentId] = false\r\n        // draft.commenterInfo[action.idx].poor = action.poor - 1\r\n      } else {\r\n        axios.post('/api/likeComment/', {\r\n          commentId: action.commentId,\r\n          type: 'active',\r\n          style: 'poor',\r\n          createdAt: Date.now()\r\n        })\r\n        draft.commenterInfo.forEach(it => {\r\n          if (it.commentId === action.commentId) {\r\n            it.poor = action.poor + 1\r\n          }\r\n        })\r\n        draft.commentPoors[action.commentId] = true\r\n        // draft.commenterInfo[action.idx].poor = action.poor + 1\r\n      }\r\n    })\r\n  },\r\n  deleteComment(state, action) {\r\n    return produce(state, (draft) => {\r\n      draft.commenterInfo = action.comments\r\n    })\r\n  },\r\n  collect(state, action) {\r\n    return produce(state, draft => {\r\n      if (draft.collect_commActive[action.collectId]) {\r\n        axios.post('/api/collect/', {\r\n          id: action.id,\r\n          collectId: action.collectId,\r\n          type: 'revoke',\r\n          style: 'comment',\r\n        })\r\n        draft.collect_commActive[action.collectId] = false\r\n      } else {\r\n        axios.post('/api/collect/', {\r\n          id: action.id,\r\n          collectId: action.collectId,\r\n          type: 'collect',\r\n          style: 'comment',\r\n        })\r\n        draft.collect_commActive[action.collectId] = true\r\n      }\r\n    })\r\n  },\r\n  favorite(state, action) {\r\n    return produce(state, draft => {\r\n      if (draft.favoriteComment[action.favoriteId]) {\r\n        axios.post('/api/favorite/', {\r\n          id: action.id,\r\n          favoriteId: action.favoriteId,\r\n          type: 'revoke',\r\n          style: 'comment',\r\n        })\r\n        draft.favoriteComment[action.favoriteId] = false\r\n      } else {\r\n        axios.post('/api/favorite/', {\r\n          id: action.id,\r\n          favoriteId: action.favoriteId,\r\n          type: 'favorite',\r\n          style: 'comment',\r\n        })\r\n        draft.favoriteComment[action.favoriteId] = true\r\n      }\r\n    })\r\n  },\r\n  ansCommentList(state, action) {\r\n    return produce(state, draft => {\r\n      draft.commenterInfo.forEach(it => {\r\n        if (it.commentId === action.id) {\r\n          it.ansComments++\r\n        }\r\n      })\r\n    })\r\n  },\r\n  invite(state, action) {\r\n    return produce(state, (draft) => {\r\n      draft.invite = action.invite\r\n    })\r\n  },\r\n  upDateInvite(state, action) {\r\n    return produce(state, (draft) => {\r\n      draft.inviteList = action.inviteList\r\n    })\r\n  },\r\n}\r\n\r\n\r\nfunction pageReducer(state, action) {\r\n  if (action.type in pageActions) {\r\n    return pageActions[action.type](state, action)\r\n  }\r\n  return state\r\n}\r\nexport const pageStore = createStore(pageReducer, {\r\n  writeAnswer: false,\r\n  invite: false,\r\n  inviteList: [],\r\n})\r\n\r\n//userStore\r\nconst userActions = {\r\n  getInitial(state, action) {\r\n    return produce(state, draft => {\r\n      for (let key in action) {\r\n        draft[key] = action[key]\r\n      }\r\n    })\r\n  },\r\n  editState(state, action) {\r\n    return produce(state, draft => {\r\n      draft.edit = action.edit\r\n    })\r\n  },\r\n  editUserInfo(state, action) {\r\n    return produce(state, draft => {\r\n      for (let key in action) {\r\n        draft.userInfo[key] = action[key]\r\n      }\r\n    })\r\n  },\r\n  editEnd(state, action) {\r\n    return produce(state, draft => {\r\n      draft.edit = action.edit\r\n    })\r\n  },\r\n  updateActive(state, action) {\r\n    return produce(state, draft => {\r\n      draft.attention = action.attention\r\n      draft.poors = action.poors\r\n    })\r\n  },\r\n  activeSwitch(state, action) {\r\n    return produce(state, draft => {\r\n      draft.active = action.active\r\n    })\r\n  },\r\n  careActive(state, action) {\r\n    return produce(state, draft => {\r\n      draft.careActive = action.careActive\r\n    })\r\n  },\r\n  collectActive(state, action) {\r\n    return produce(state, draft => {\r\n      draft.collectActive = action.collectActive\r\n    })\r\n  }\r\n}\r\nfunction userReducer(state, action) {\r\n  if (action.type in userActions) {\r\n    return userActions[action.type](state, action)\r\n  }\r\n  return state\r\n}\r\nexport const userStore = createStore(userReducer, {\r\n  writeAnswer: false,\r\n  edit: false,\r\n  question: false,\r\n  active: 0,\r\n  careActive: 0,\r\n  collectActive: 0,\r\n})\r\n\r\n/*cares-Store*/\r\n\r\nconst careAction = {\r\n  updateCare(state, action) {\r\n    return produce(state, draft => {\r\n      let len = draft.myCares.length\r\n      if (len === 0) {\r\n        draft.myCares[len] = { careId: action.id }\r\n        return\r\n      }\r\n      for (let i = 0; i < len; i++) {\r\n        if (draft.myCares[i].careId === action.id) {\r\n          draft.myCares[i].careId = null\r\n          break\r\n        }\r\n        if (i === len - 1) {\r\n          draft.myCares[len] = { careId: action.id }\r\n        }\r\n      }\r\n    })\r\n  },\r\n  getCare(state, action) {\r\n    return produce(state, draft => {\r\n      for (let key in action) {\r\n        draft[key] = action[key]\r\n      }\r\n    })\r\n  },\r\n}\r\nfunction careReducer(state, action) {\r\n  if (action.type in careAction) {\r\n    return careAction[action.type](state, action)\r\n  }\r\n  return state\r\n}\r\n\r\n\r\nexport const careStore = createStore(careReducer, {\r\n  myCares: []\r\n})\r\n\r\n\r\nconst ansComAction = {\r\n  getInitial(state, action) {\r\n    return produce(state, draft => {\r\n      for (let key in action) {\r\n        if (key === 'id' || key === 'ansCommentList') {\r\n          draft.ansCommentList[action.id] = action.ansCommentList\r\n        } else {\r\n          draft[key] = action[key]\r\n        }\r\n      }\r\n    })\r\n  },\r\n  postComment(state, action) {\r\n    return produce(state, draft => {\r\n      draft.ansCommentList[action.id] = action.newList\r\n    })\r\n  },\r\n  likeAnsComment(state, action) {\r\n    return produce(state, draft => {\r\n      if (draft.myLikeAnsComment[action.id]) {\r\n        axios.post(`/api/ansCommentLike/${action.id}`, {\r\n          style: 'like',\r\n          type: 'revoke',\r\n        })\r\n        draft.ansCommentList[action.commentId].forEach(it => {\r\n          if (it.ansCommentId === action.id) {\r\n            it.like -= 1\r\n          }\r\n        })\r\n        draft.myLikeAnsComment[action.id] = false\r\n      } else {\r\n        axios.post(`/api/ansCommentLike/${action.id}`, {\r\n          style: 'like',\r\n          type: 'active',\r\n        })\r\n        draft.ansCommentList[action.commentId].forEach(it => {\r\n          if (it.ansCommentId === action.id) {\r\n            it.like += 1\r\n          }\r\n        })\r\n        draft.myLikeAnsComment[action.id] = true\r\n      }\r\n    })\r\n  },\r\n  poorAnsComment(state, action) {\r\n    // debugger\r\n    return produce(state, draft => {\r\n      if (draft.myPoorAnsComment[action.id]) {\r\n        axios.post(`/api/ansCommentLike/${action.id}`, {\r\n          style: 'poor',\r\n          type: 'revoke',\r\n        })\r\n        draft.ansCommentList[action.commentId].forEach(it => {\r\n          if (it.ansCommentId === action.id) {\r\n            it.poor -= 1\r\n          }\r\n        })\r\n        draft.myPoorAnsComment[action.id] = false\r\n      } else {\r\n        axios.post(`/api/ansCommentLike/${action.id}`, {\r\n          style: 'poor',\r\n          type: 'active',\r\n        })\r\n        draft.ansCommentList[action.commentId].forEach(it => {\r\n          if (it.ansCommentId === action.id) {\r\n            it.poor += 1\r\n          }\r\n        })\r\n        draft.myPoorAnsComment[action.id] = true\r\n      }\r\n    })\r\n  },\r\n  postEndComment(state, action) {\r\n    return produce(state, draft => {\r\n      draft.endCommentList[action.id] = action.newList\r\n      draft.ansCommentList[action.commentId].forEach((it, idx) => {\r\n        if (it.ansCommentId === action.id) {\r\n          it.endComment += 1\r\n        }\r\n      })\r\n    })\r\n  },\r\n  getEndCommentList(state, action) {\r\n    return produce(state, draft => {\r\n      for (let key in action) {\r\n        if (key === 'id' || key === 'endCommentList') {\r\n          draft.endCommentList[action.id] = action.endCommentList\r\n        } else {\r\n          draft[key] = action[key]\r\n        }\r\n      }\r\n    })\r\n  },\r\n  likeEndComment(state, action) {\r\n    return produce(state, draft => {\r\n      if (draft.myLikeEndComment[action.id]) {\r\n        axios.post(`/api/endCommentLike/${action.id}`, {\r\n          style: 'like',\r\n          type: 'revoke',\r\n        })\r\n        draft.endCommentList[action.ansCommentId].forEach(it => {\r\n          if (it.endCommentId === action.id) {\r\n            it.like -= 1\r\n          }\r\n        })\r\n        draft.myLikeEndComment[action.id] = false\r\n      } else {\r\n        axios.post(`/api/endCommentLike/${action.id}`, {\r\n          style: 'like',\r\n          type: 'active',\r\n        })\r\n        draft.endCommentList[action.ansCommentId].forEach(it => {\r\n          if (it.endCommentId === action.id) {\r\n            it.like += 1\r\n          }\r\n        })\r\n        draft.myLikeEndComment[action.id] = true\r\n      }\r\n    })\r\n  },\r\n  poorEndComment(state, action) {\r\n    // debugger\r\n    return produce(state, draft => {\r\n      if (draft.myPoorEndComment[action.id]) {\r\n        axios.post(`/api/endCommentLike/${action.id}`, {\r\n          style: 'poor',\r\n          type: 'revoke',\r\n        })\r\n        draft.endCommentList[action.ansCommentId].forEach(it => {\r\n          if (it.endCommentId === action.id) {\r\n            it.poor -= 1\r\n          }\r\n        })\r\n        draft.myPoorEndComment[action.id] = false\r\n      } else {\r\n        axios.post(`/api/endCommentLike/${action.id}`, {\r\n          style: 'poor',\r\n          type: 'active',\r\n        })\r\n        draft.endCommentList[action.ansCommentId].forEach(it => {\r\n          if (it.endCommentId === action.id) {\r\n            it.poor += 1\r\n          }\r\n        })\r\n        draft.myPoorEndComment[action.id] = true\r\n      }\r\n    })\r\n  },\r\n}\r\nfunction ansComReducer(state, action) {\r\n  if (action.type in ansComAction) {\r\n    return ansComAction[action.type](state, action)\r\n  }\r\n  return state\r\n}\r\n\r\n\r\nexport const ansComStore = createStore(ansComReducer, {\r\n  ansCommentList: {},\r\n  endComment: false,\r\n  endCommentList: {},\r\n})\r\n","import React, { createRef } from 'react'\r\nimport { navStore, signStore } from '../redux/redux'\r\nimport axios from 'axios'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Link } from \"react-router-dom\"\r\n// import signStore from '../redux/redux'\r\nclass Form extends React.Component {\r\n\r\n  static footer(props) {\r\n    let other = (\r\n      <>\r\n        <hr className=\"other-hr\" />\r\n        <div className=\"other-Account\">\r\n          <span>其他账号登陆</span>\r\n          <span>广告位招租</span>\r\n          <span>广告位招租</span>\r\n        </div>\r\n      </>\r\n    )\r\n    return (\r\n      <>\r\n        {props.other && other}\r\n      </>\r\n    )\r\n  }\r\n\r\n  constructor(props) {\r\n    super()\r\n    this.state = signStore.getState()\r\n    this.props = props\r\n\r\n    this.errRef = createRef()\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.onclick = () => {\r\n      this.errRef.current.innerHTML = \"\"\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    window.onclick = null\r\n  }\r\n\r\n  signTo = (e) => {\r\n    e.preventDefault()\r\n    let el = e.target\r\n    if (this.props.form === 'signin') {\r\n      let form = {\r\n        name: el.name.value,\r\n        password: el.password.value,\r\n        captcha: el.captcha.value,\r\n      }\r\n      axios.post('/api/clearCookie')\r\n      axios.post('/api/login', form)\r\n        .then(item => {\r\n          if (item.data === 0) {\r\n            document.querySelector('.captcha').click()\r\n            this.errRef.current.innerHTML = '用户名或密码错误，请重新输入'\r\n          } else if (item.data === 1) {\r\n            if (window.location.pathname === '/sign') {\r\n              this.props.history.push(\"/\")\r\n            } else {\r\n              navStore.dispatch({\r\n                type: 'toSign',\r\n                sign: true,\r\n              })\r\n              window.location.replace('')\r\n            }\r\n          } else {\r\n            document.querySelector('.captcha').click()\r\n            this.errRef.current.innerHTML = '验证码错误，请重新输入'\r\n          }\r\n        }).catch(console.log)\r\n    } else {\r\n      if (el.password.value !== el.nextPassword.value) {\r\n        return this.errRef.current.innerHTML = '密码验证失败，请重新输入'\r\n      }\r\n      let form = {\r\n        name: el.name.value.trim(),\r\n        password: el.password.value.trim(),\r\n        email: el.email.value.trim(),\r\n      }\r\n      if (!form.name || !form.password || !form.email) {\r\n        return this.errRef.current.innerHTML = '不能输入空，请重新输入'\r\n      }\r\n      if (this.props.accQuery) {\r\n        return this.errRef.current.innerHTML = '用户名已被使用，请重新输入'\r\n      }\r\n      if (this.props.emailQuery) {\r\n        return this.errRef.current.innerHTML = '邮箱已被使用，请重新输入'\r\n      }\r\n      // console.log(form)\r\n      axios.post('/api/sign_up', form)\r\n        .then(item => {\r\n          if (item.data) {\r\n            signStore.dispatch({\r\n              type: 'sucessSignup',\r\n              sucessSignup: true\r\n            })\r\n\r\n            setTimeout(() => {\r\n              let sucess = document.querySelector('.success')\r\n              sucess.classList.remove('suc-transition')\r\n            }, 200)\r\n            setTimeout(() => {\r\n              let sucess = document.querySelector('.success img')\r\n              sucess.classList.add('img-cslc')\r\n              document.querySelector('.success label').classList.remove('label-visi')\r\n            }, 3000)\r\n          } else {\r\n            this.errRef.current.innerHTML = '注册失败，请再次尝试'\r\n          }\r\n        }).catch(() => {\r\n          this.errRef.current.innerHTML = '注册失败，请再次尝试'\r\n        })\r\n    }\r\n  }\r\n  toSignUp = (e) => {\r\n    e.preventDefault()\r\n    signStore.dispatch({\r\n      type: 'formRedirect',\r\n      form: 'signup',\r\n      captcha: false,\r\n      other: false,\r\n      protocol: '注册即代表同意《知乎协议》《隐私保护指引》',\r\n      buttonText: '注册',\r\n    })\r\n  }\r\n  toSignIn = (e) => {\r\n    e.preventDefault()\r\n    signStore.dispatch({\r\n      type: 'formRedirect',\r\n      form: 'signin',\r\n      captcha: 2,\r\n      other: true,\r\n      protocol: '未注册手机验证后自动登录，注册即代表同意《知乎协议》《隐私保护指引》',\r\n      buttonText: '登录',\r\n    })\r\n  }\r\n  render() {\r\n    let props = this.props\r\n    let children = props.children.props.children\r\n    return (\r\n      <>\r\n        <form action=\"/api/login\" method=\"post\" onSubmit={this.signTo}>\r\n          {\r\n            children.filter(it => it.type !== 'div')\r\n          }\r\n\r\n          <div className=\"redirector\">\r\n            {props.form === 'signin'\r\n              ? <>\r\n                <Link to=\"/sign_up\" className=\"zhuce\" onClick={this.toSignUp}>注册新用户</Link>\r\n                <Link to=\"/lossPas\" className=\"lossPas\">忘记密码？</Link>\r\n              </>\r\n              : <Link to=\"/sign\" className=\"zhuce\" onClick={this.toSignIn}>返回登陆界面</Link>\r\n            }\r\n          </div>\r\n          {\r\n            children.filter(it => it.type === 'div')\r\n          }\r\n          <span className={props.form === 'signin' ? \"sub-error\" : \"lossPas sub-error\"} ref={this.errRef}></span>\r\n          <button type=\"submit\" className=\"submit\" >{props.buttonText}</button>\r\n          <span className=\"xieyi\">{this.state.protocol}</span>\r\n        </form>\r\n        <Form.footer xieyi={props.xieyi} other={props.other} />\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Form)\r\n","import React, { useCallback, useEffect, useState } from 'react'\r\nimport { signStore } from '../redux/redux'\r\nimport Form from './form'\r\nimport axios from 'axios'\r\n\r\nexport default function Sign(props) {\r\n  let [state, setState] = useState(signStore.getState())\r\n  // let [accValue, setAccValue] = useState('')\r\n  // let [emailValue, setemailValue] = useState('')\r\n  let [accQuery, setAccQuery] = useState(false)\r\n  let [emailQuery, setemailQuery] = useState(false)\r\n  let formRedirect = useCallback(function (e) {\r\n    let type = e.target.textContent === '用户登录' ? 'signin' : 'signup'\r\n    if (type === 'signin') {\r\n      signStore.dispatch({\r\n        type: 'formRedirect',\r\n        form: 'signin',\r\n        captcha: 2,\r\n        other: true,\r\n        protocol: '未注册手机验证后自动登录，注册即代表同意《知乎协议》《隐私保护指引》',\r\n        buttonText: '登录',\r\n      })\r\n    } else {\r\n      signStore.dispatch({\r\n        type: 'formRedirect',\r\n        form: 'signup',\r\n        captcha: false,\r\n        other: false,\r\n        protocol: '注册即代表同意《知乎协议》《隐私保护指引》',\r\n        buttonText: '注册',\r\n      })\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    let uns = signStore.subscribe(() => setState(signStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n  // debugger\r\n  let switchCaptcha = useCallback(function (e) {\r\n    let el = e.target\r\n    el.src = `/api/captcha?t=${Date.now()}`\r\n  }, [])\r\n  let accountInput = useCallback((e) => {\r\n    axios.post('/api/user-query/', { name: e.target.value })\r\n      .then(res => {\r\n        if (res.data === 0) {\r\n          setAccQuery(true)\r\n        } else {\r\n          setAccQuery(false)\r\n        }\r\n      })\r\n  }, [])\r\n  let emailInput = useCallback((e) => {\r\n    axios.post('/api/email-query/', { email: e.target.value })\r\n      .then(res => {\r\n        if (res.data === 0) {\r\n          setemailQuery(true)\r\n        } else {\r\n          setemailQuery(false)\r\n        }\r\n      })\r\n  }, [])\r\n  return (\r\n    <div className=\"outer\">\r\n      <div className=\"form-header\">\r\n        <label className={state.form === \"signin\" ? 'form-action' : ''} onClick={formRedirect}>\r\n          用户登录\r\n        </label>\r\n        <label className={state.form === \"signup\" ? 'form-action signup-label' : 'signup-label'} onClick={formRedirect}>\r\n          注册账号\r\n        </label>\r\n\r\n      </div>\r\n      <hr />\r\n      <Form captcha={state.captcha} other={state.other} form={state.form} xieyi={state.captcha} buttonText={state.buttonText} accQuery={accQuery} emailQuery={emailQuery}>\r\n        {\r\n          state.form === 'signin'\r\n            ? <div>\r\n              < input type=\"text\" placeholder=\"请输入登录账号\" className=\"name\" name=\"name\" />\r\n              < input type=\"password\" placeholder='密码' className=\"password\" name=\"password\" />\r\n              <div name=\"captcha-div\">\r\n                < input type=\"text\" placeholder='请输入验证码' className=\"captcha-input\" name=\"captcha\" />\r\n                <img src={`/api/captcha?t=${Date.now()}`} title=\"点击换一张\" className=\"captcha\" onClick={switchCaptcha} alt=\"captcha\" />\r\n              </div>\r\n            </div>\r\n            : <div>\r\n              < input type=\"text\" placeholder=\"请输入注册账号\" className=\"name\" name=\"name\" onChange={accountInput} />\r\n              {accQuery && <label className=\"user-query\"></label>}\r\n              < input type=\"email\" placeholder='绑定电子邮箱' className=\"email\" name=\"email\" onChange={emailInput} />\r\n              {emailQuery && <label className=\"email-query\"></label>}\r\n              < input type=\"password\" placeholder=\"请输入密码\" className=\"password\" name=\"password\" />\r\n              < input type=\"password\" placeholder='请再次输入密码' className=\"password\" name=\"nextPassword\" />\r\n            </div>\r\n        }\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useCallback, useEffect, useState,Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport { HeartOutlined, CommentOutlined, CloseOutlined } from '@ant-design/icons';\r\nimport { careStore, navStore } from '../redux/redux';\r\nimport { Input, Button } from 'antd';\r\nimport moment from 'moment';\r\nconst { TextArea } = Input;\r\n\r\nexport default function (props) {\r\n  let [careBloon, setCareBl] = useState(false)\r\n  let { careInfo = {} } = props\r\n  let [chat, setChat] = useState(false)\r\n  let [state, setState] = useState(navStore.getState())\r\n  useEffect(() => {\r\n    let uns = navStore.subscribe(() => setState(navStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n  useEffect(() => {\r\n    if (careBloon) {\r\n      var recare = document.querySelector('.recare')\r\n      recare.onmouseenter = () => {\r\n        recare.childNodes[1].innerText = \"取消\"\r\n      }\r\n      recare.onmouseleave = () => {\r\n        recare.childNodes[1].innerText = \"已关注\"\r\n      }\r\n    }\r\n    return () => {\r\n      if (careBloon) {\r\n        recare.onmouseenter = null\r\n        recare.onmouseleave = null\r\n      }\r\n    }\r\n  }, [careBloon])\r\n  useEffect(() => {\r\n    axios.get('/api/care')\r\n      .then(res => {\r\n        let data = res.data\r\n        careStore.dispatch({\r\n          type: 'getCare',\r\n          ...data,\r\n        })\r\n      }).catch(rej => { })\r\n\r\n    let uns = careStore.subscribe(() => {\r\n      setCareBl(Array.from(careStore.getState().myCares).some(it => it.careId === careInfo.userId))\r\n    })\r\n    return () => uns()\r\n  }, [careInfo])\r\n  let updateCare = useCallback(() => {\r\n    if (state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n      return\r\n    }\r\n    careStore.dispatch({\r\n      type: 'updateCare',\r\n      id: careInfo.userId,\r\n    })\r\n\r\n    axios.post('/api/care', { type: careBloon ? 'reCare' : 'toCare', careId: careInfo.userId })\r\n      .catch(rej => {\r\n        if (rej.response.status === 401) {\r\n          navStore.dispatch({\r\n            type: 'toSign',\r\n            sign: false,\r\n          })\r\n        }\r\n      })\r\n\r\n  }, [careBloon, careInfo, state])\r\n  let toChat = useCallback(() => {\r\n    if (state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n      return\r\n    }\r\n    setChat(!chat)\r\n  }, [chat, state])\r\n  // useEffect(() => {\r\n\r\n  // }, [ws])\r\n  return (\r\n    <>\r\n      <ul className=\"poster-interactive\">\r\n        {careBloon\r\n          ? <li onClick={updateCare} className=\"recare\"><HeartOutlined /><span>已关注</span></li>\r\n          : <li onClick={updateCare}><HeartOutlined /><span>关注他</span></li>\r\n        }\r\n        <li onClick={toChat}><CommentOutlined />发私信</li>\r\n      </ul>\r\n      { chat && <ChatWindow targetInfo={careInfo} setChat={setChat} state={state} />}\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nexport function ChatWindow({ targetInfo, setChat, state }) {\r\n  let [value, setValue] = useState('')\r\n  let [msgList, updateMsg] = useState([])\r\n  let [ws, setWS] = useState(null)\r\n\r\n  useEffect(() => {\r\n    if (ws === null) {\r\n      setWS(new WebSocket(`ws://47.111.233.71:8080/targetId=${targetInfo.userId}&&userId=${state.userInfo.userId}`))\r\n    }\r\n  }, [targetInfo, state, ws])\r\n\r\n  let sendMsg = useCallback(() => {\r\n    if (value === '') { return }\r\n    ws.send(JSON.stringify([{\r\n      content: value,\r\n      targetName: targetInfo.name,\r\n      targetId: targetInfo.userId,\r\n      targetAvatar: targetInfo.avatar\r\n    }]))\r\n    setValue('')\r\n  }, [value, targetInfo, ws])\r\n  useEffect(() => {\r\n    if (ws) {\r\n      ws.onopen = function (msg) {\r\n        console.log('WebSocket opened!');\r\n      }\r\n      ws.onclose = function () {\r\n        console.log('WebSocket closed!');\r\n      }\r\n      ws.onmessage = (event) => {\r\n        let msg = JSON.parse(event.data)\r\n        msg = msg.flat()\r\n        console.log(msg)\r\n        updateMsg(msg)\r\n      }\r\n    }\r\n  }, [ws])\r\n  let editInput = useCallback((e) => {\r\n    setValue(e.target.value)\r\n  }, [])\r\n\r\n  let webClose = useCallback(() => {\r\n    setChat(false)\r\n    ws.close()\r\n  }, [ws, setChat])\r\n  useEffect(() => {\r\n    let section = document.querySelector('.chat-section')\r\n    section.scrollTop = document.querySelector('.chat-section-ul').offsetHeight\r\n  }, [msgList])\r\n  let sendEnter = useCallback((e) => {\r\n    if (!e.shiftKey && e.keyCode === 13) {\r\n      e.preventDefault()\r\n      document.querySelector('.chat-edit-footer button').click()\r\n    }\r\n  }, [])\r\n  return (\r\n    <div className=\"chat-outer\" style={{ width: `${window.innerWidth}px`, height: `${window.innerHeight}px` }}>\r\n      <div className=\"chat-container\">\r\n        <div className=\"chat-user-head\">\r\n          <label onClick={webClose}><CloseOutlined /></label>\r\n          <h2>{targetInfo.name}</h2>\r\n        </div>\r\n        <div className=\"chat-section\">\r\n          <ul className=\"chat-section-ul\">\r\n            {msgList.map((it, idx) => {\r\n              if (it.targetName !== state.cookieUser) {\r\n                let now = moment(Date.now()).format(\"YY\")\r\n                let created = moment(it.createdAt * 1).format(\"YY\")\r\n                return (\r\n                  <Fragment key={it.createdAt}>\r\n                    <li className=\"chat-time\">\r\n                      {(idx === 0 || (it.createdAt - msgList[idx - 1].createdAt >= 180000)) &&\r\n                        <span >{now * 1 > created * 1\r\n                          ? moment(it.createdAt * 1).format(\"YY-MM-DD HH:mm:ss\")\r\n                          : moment(it.createdAt * 1).format(\"MM-DD HH:mm:ss\")\r\n                        }\r\n                        </span>\r\n                      }</li>\r\n                    <li className=\"chat-section-me\" key={it.createdAt}>\r\n                      <p className=\"chat-msg-content\">{it.content}</p>\r\n                      <i style={{ backgroundImage: `url(${it.userAvatar})` }} className=\"chat-msg-avatar\"></i>\r\n                    </li>\r\n                  </Fragment>\r\n                )\r\n              } else {\r\n                let now = moment(Date.now()).format(\"YY\")\r\n                let created = moment(it.createdAt * 1).format(\"YY\")\r\n                return (\r\n                  <Fragment key={it.createdAt}>\r\n                    <li className=\"chat-time\">\r\n                      {(idx === 0 || (it.createdAt - msgList[idx - 1].createdAt >= 180000)) &&\r\n                        <span >{now * 1 > created * 1\r\n                          ? moment(it.createdAt * 1).format(\"YY-MM-DD HH:mm:ss\")\r\n                          : moment(it.createdAt * 1).format(\"MM-DD HH:mm:ss\")\r\n                        }\r\n                        </span>\r\n                      }</li>\r\n                    <li className=\"chat-section-target\" key={it.createdAt}>\r\n                      <i style={{ backgroundImage: `url(${targetInfo.avatar})` }} className=\"chat-msg-avatar\"></i>\r\n                      <p className=\"chat-msg-content\">{it.content}</p>\r\n                    </li>\r\n                  </Fragment>\r\n                )\r\n              }\r\n            })\r\n            }\r\n          </ul>\r\n        </div>\r\n        <div className=\"chat-footer\">\r\n          <div className=\"chat-edit\">\r\n            <TextArea rows={6} value={value} onChange={editInput} onKeyDown={sendEnter} />\r\n          </div>\r\n          <div className=\"chat-edit-footer\">\r\n            <span>按Enter 发送</span>\r\n            <Button type=\"primary\" onClick={sendMsg}>发送</Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nexport default function Footer(props) {\r\n  return (\r\n    <div className={props.type === 'signup' ? 'signup-footer footer' : 'footer'}>\r\n      <span> © 2020 知乎京 ICP 证 110745 号京 ICP 备 13052560 号 - 1京公网安备 11010802010035 号出版物经营许可证</span>\r\n      <br />\r\n      <span>侵权举报网上有害信息举报专区儿童色情信息举报专区违法和不良信息举报：010-82716601 </span>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect, useCallback } from 'react'\r\n// import { Form, Input, Button, Checkbox, Space, message } from 'antd'\r\n// import { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport './signin-component.css'\r\nimport Footer from './footer'\r\nimport { signStore } from '../redux/redux'\r\nimport Sign from './sign'\r\nimport { Link } from \"react-router-dom\"\r\n\r\nexport default function Logup() {\r\n  let [state, setState] = useState({\r\n    form: 'signup',\r\n    captcha: false,\r\n    other: false,\r\n    protocol: '注册即代表同意《知乎协议》《隐私保护指引》',\r\n    buttonText: '注册',\r\n    sucessSignup: false,\r\n  })\r\n  useEffect(() => {\r\n    let uns = signStore.subscribe(() => setState(signStore.getState()))\r\n    return () => uns()\r\n  })\r\n  return (\r\n    <div className=\"main\">\r\n      {state.sucessSignup &&\r\n        <Success props={state} />\r\n      }\r\n      <img src=\"../images/login-top.png\" alt=\"logo\" className=\"logo\" />\r\n      <Sign state={state} />\r\n      <Footer type=\"signup\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function Success(props) {\r\n  let toSignin = useCallback((e) => {\r\n    e.preventDefault()\r\n    signStore.dispatch({\r\n      type: 'toSignin',\r\n      sucessSignup: false\r\n    })\r\n  }, [])\r\n  return (\r\n    <div className=\"success-bg\">\r\n      <div className={props.sucessSignup ? \"success\" : 'suc-transition success'}>\r\n        <img src=\"/images/loading.gif\" alt=\"注册成功\" />\r\n        <label className=\"label-visi\">\r\n          <span>注册成功！ </span> 点击 <Link to=\"/sign\" onClick={toSignin}>返回登陆</Link>\r\n        </label>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useCallback, Fragment, useEffect, useState } from 'react'\r\nimport './home-page.css'\r\nimport { SearchOutlined, BellFilled, MessageFilled, HomeFilled, UserOutlined, FormOutlined, LogoutOutlined, ProjectFilled, HeartFilled, LikeFilled } from '@ant-design/icons'\r\nimport { homeStore, navStore, signStore, userStore } from '../redux/redux'\r\nimport axios from 'axios'\r\nimport { Empty } from 'antd';\r\nimport { withRouter } from 'react-router-dom'\r\nimport Sign from './sign'\r\nimport moment from 'moment';\r\nimport { ChatWindow } from './care-message'\r\nimport { Success } from './signup-component'\r\nimport { Link } from \"react-router-dom\"\r\n\r\nfunction useGetInvite() {\r\n  let [inviteMsg, setInviteMsg] = useState(navStore.getState().invitedList || [])\r\n  let [byCareMsg, setByCareMsg] = useState(navStore.getState().byCareList || [])\r\n  let [byCommentMsg, setByCommentMsg] = useState(navStore.getState().byCommentLike || [])\r\n  let [msgSum, setMsgSum] = useState(0)\r\n  let [invited, setInvited] = useState(false)\r\n  useEffect(() => {\r\n    axios.get('/api/invite')\r\n      .then(res => {\r\n        let initial = res.data\r\n        navStore.dispatch({\r\n          type: 'getInitial',\r\n          ...initial,\r\n        })\r\n      })\r\n  }, [])\r\n  useEffect(() => {\r\n    let invitedLen = inviteMsg.filter(it => it.status !== 'view').length\r\n    let careLen = byCareMsg.filter(it => it.status !== 'view').length\r\n    let commentLen = byCommentMsg.filter(it => it.status !== 'view').length\r\n    let viewLen = invitedLen + careLen + commentLen\r\n    setMsgSum(viewLen)\r\n  }, [inviteMsg, byCareMsg, byCommentMsg])\r\n\r\n  useEffect(() => {\r\n    let uns = navStore.subscribe(() => {\r\n      setInviteMsg(navStore.getState().invitedList || [])\r\n      setByCareMsg(navStore.getState().byCareList || [])\r\n      setByCommentMsg(navStore.getState().byCommentLike || [])\r\n    })\r\n\r\n    return () => uns()\r\n  }, [])\r\n  useEffect(() => {\r\n    let pullUL = document.querySelector('.nav-invited-outer')\r\n    let clickEvent = (e) => {\r\n      setInvited(false)\r\n    }\r\n    function leaveEvent() {\r\n      window.addEventListener('click', clickEvent)\r\n    }\r\n    function enterEvent() {\r\n      window.removeEventListener('click', clickEvent)\r\n    }\r\n    pullUL.addEventListener('mouseleave', leaveEvent)\r\n    pullUL.addEventListener('mouseenter', enterEvent)\r\n\r\n    return () => {\r\n      pullUL.removeEventListener('mouseleave', leaveEvent)\r\n      pullUL.removeEventListener('mouseenter', enterEvent)\r\n    }\r\n  }, [])\r\n  let invitePull = useCallback(([setChat, setHome], e) => {\r\n    e.stopPropagation()\r\n    setInvited(!invited)\r\n    setChat(false)\r\n    setHome('none')\r\n    axios.post('/api/clear-invited')\r\n    setMsgSum(0)\r\n  }, [invited])\r\n\r\n  return { invitePull, inviteMsg, byCareMsg, byCommentMsg, msgSum, invited, setInvited }\r\n}\r\n\r\nfunction useGetChat(state) {\r\n  let [chat, setChat] = useState(false)\r\n  let [chatSum, setChatSum] = useState(0)\r\n  let [chatList, updateChat] = useState(navStore.getState().chatList)\r\n  useEffect(() => {\r\n    axios.get('/api/chat-list')\r\n      .then(res => {\r\n        let initial = res.data\r\n        navStore.dispatch({\r\n          type: 'getInitial',\r\n          ...initial,\r\n        })\r\n      })\r\n  }, [])\r\n  useEffect(() => {\r\n    let uns = navStore.subscribe(() => updateChat(navStore.getState().chatList))\r\n    return () => uns()\r\n  }, [])\r\n  let chatPull = useCallback(([setHome, setInvited], e) => {\r\n    e.stopPropagation()\r\n    setHome('none')\r\n    setChat(!chat)\r\n    setInvited(false)\r\n    setChatSum(0)\r\n  }, [chat])\r\n  useEffect(() => {\r\n    if (state.cookieUser) {\r\n      setChatSum(chatList.flat().filter(it => (it.status === 'normal' && it.userName !== state.cookieUser)).length)\r\n    }\r\n  }, [chatList, state])\r\n  useEffect(() => {\r\n    let pullUL = document.querySelector('.nav-chat-outer')\r\n    let clickEvent = (e) => {\r\n      setChat(false)\r\n    }\r\n    function leaveEvent() {\r\n      window.addEventListener('click', clickEvent)\r\n    }\r\n    function enterEvent() {\r\n      window.removeEventListener('click', clickEvent)\r\n    }\r\n    pullUL.addEventListener('mouseleave', leaveEvent)\r\n    pullUL.addEventListener('mouseenter', enterEvent)\r\n\r\n    return () => {\r\n      pullUL.removeEventListener('mouseleave', leaveEvent)\r\n      pullUL.removeEventListener('mouseenter', enterEvent)\r\n    }\r\n  }, [])\r\n  return { chat, setChat, chatSum, chatList, chatPull }\r\n}\r\nexport default function (props) {\r\n  let [homeDis, setHome] = useState('none')\r\n  let [state, setState] = useState(navStore.getState() || {})\r\n  let { invitePull, inviteMsg, byCareMsg, byCommentMsg, msgSum, invited, setInvited } = useGetInvite()\r\n  let { chat, chatSum, chatList, chatPull, setChat } = useGetChat(state)\r\n  let [signState, setSignState] = useState(signStore.getState())\r\n  useEffect(() => {\r\n    let signUns = signStore.subscribe(() => setSignState(signStore.getState() || {}))\r\n    let uns = navStore.subscribe(() => setState(navStore.getState() || {}))\r\n    return () => {\r\n      uns()\r\n      signUns()\r\n    }\r\n  }, [])\r\n  let postQuestion = useCallback(() => {\r\n    if (state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n      return\r\n    }\r\n    homeStore.dispatch({\r\n      type: 'question',\r\n      question: true,\r\n    })\r\n  }, [state])\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/nav-data')\r\n      .then(res => {\r\n        let initial = res.data\r\n        navStore.dispatch({\r\n          type: 'getInitial',\r\n          ...initial,\r\n        })\r\n      })\r\n    let setHomeNone = () => {\r\n      setHome('none')\r\n    }\r\n    window.addEventListener('click', setHomeNone)\r\n\r\n    return () => window.removeEventListener('click', setHomeNone)\r\n  }, [homeDis])\r\n  useEffect(() => {\r\n    if (!state.sign) {\r\n      function clearSignDIV(e) {\r\n        let FROM_DIV = document.querySelector('.user-not-sign')\r\n        if (e.target === FROM_DIV) {\r\n          navStore.dispatch({\r\n            type: 'toSign',\r\n            sign: true,\r\n          })\r\n        }\r\n      }\r\n      window.addEventListener('click', clearSignDIV)\r\n      return () => window.removeEventListener('click', clearSignDIV)\r\n    }\r\n  }, [state])\r\n  let homeList = useCallback(([setChat, setInvited], e) => {\r\n    e.stopPropagation()\r\n    if (homeDis === 'none') {\r\n      setHome('block')\r\n    } else {\r\n      setHome('none')\r\n    }\r\n    setChat(false)\r\n    setInvited(false)\r\n  }, [homeDis])\r\n  useEffect(() => {\r\n    let sliderNav = document.querySelector('.nav-slider-outer')\r\n    function slider(e) {\r\n      if (props.page === 'post') {\r\n        if (document.documentElement.scrollTop < 100) {\r\n          return\r\n        }\r\n      }\r\n      if (props.page === 'user') {\r\n        if (document.documentElement.scrollTop < 300) {\r\n          return\r\n        }\r\n      }\r\n      if (e.wheelDelta > 0) {\r\n        sliderNav.style.top = '0px'\r\n      } else {\r\n        sliderNav.style.top = '-50px'\r\n      }\r\n    }\r\n\r\n    window.addEventListener('mousewheel', slider)\r\n    return () => window.removeEventListener('mousewheel', slider)\r\n  }, [props])\r\n  return (\r\n    <>\r\n      <nav>\r\n        <div className=\"nav-slider-outer\">\r\n          <div className=\"top-nav\">\r\n            <Link to=\"/\" className=\"home-logo\">\r\n              <img src=\"/images/icon2.jpg\" alt=\"zhi 呼\" />\r\n            </Link>\r\n            <ul className=\"home-list\">\r\n              <li><Link to=\"/\">首页</Link></li>\r\n              <li><Link to=\"/\">发现</Link></li>\r\n              <li><Link to=\"/\">等你来答</Link></li>\r\n            </ul>\r\n            <div className=\"search-div\">\r\n              <label className=\"search-label\">\r\n                <input type=\"search\" name=\"search\" className=\"search\" placeholder=\"功能尚未完善\" />\r\n                <SearchOutlined style={{ fontSize: '20px', color: '#9AA3B5' }} />\r\n              </label>\r\n              <input type=\"button\" className=\"question\" value=\"发帖\" onClick={postQuestion} />\r\n            </div>\r\n            <ul className=\"persen-list\">\r\n              <li >\r\n                <BellFilled style={{ fontSize: \"22px\" }} onClick={(e) => invitePull([setChat, setHome], e)} />\r\n                {msgSum !== 0 &&\r\n                  <label className=\"nav-message-icon\" onClick={(e) => invitePull([setChat, setHome], e)}>{msgSum}</label>\r\n                }\r\n\r\n              </li>\r\n              <li>\r\n                <MessageFilled style={{ fontSize: \"20px\" }} onClick={(e) => chatPull([setHome, setInvited], e)} />\r\n                {chatSum !== 0 &&\r\n                  <label className=\"nav-message-icon\" onClick={(e) => chatPull([setHome, setInvited], e)}>{chatSum}</label>\r\n                }\r\n              </li>\r\n              <li onClick={(e) => homeList([setChat, setInvited], e)}><HomeFilled style={{ fontSize: \"20px\" }} /></li>\r\n            </ul>\r\n          </div>\r\n          {props.children}\r\n        </div>\r\n      </nav>\r\n      <div className=\"nav-pull-container\">\r\n        <MessageItem inviteMsg={inviteMsg} byCareMsg={byCareMsg} byCommentMsg={byCommentMsg} className={invited ? '' : 'nav-message-hidden'} />\r\n        <ChatComponent className={chat ? '' : 'nav-message-hidden'} chatList={chatList} />\r\n        <PullDown display={homeDis} />\r\n        {!state.sign && <div className=\"user-not-sign\"><Sign /></div>}\r\n        {signState.sucessSignup &&\r\n          <Success props={signState} />\r\n        }\r\n      </div>\r\n    </>\r\n  )\r\n}\r\nfunction PullList(props) {\r\n  let [cookie, setCookie] = useState(navStore.getState().cookieUser)\r\n  let [state, setState] = useState(navStore.getState().userInfo || {})\r\n  useEffect(() => {\r\n    let uns = navStore.subscribe(() => {\r\n      setState(navStore.getState().userInfo || {})\r\n      setCookie(navStore.getState().cookieUser)\r\n    })\r\n\r\n    return () => uns()\r\n  }, [])\r\n  let sign_out = useCallback(() => {\r\n    axios.post('/api/clearCookie/')\r\n  }, [])\r\n\r\n  let toEditpage = useCallback(() => {\r\n    if (cookie === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n    } else {\r\n      props.history.push(`/user/${state.userId}`)\r\n      userStore.dispatch({\r\n        type: 'editState',\r\n        edit: true,\r\n      })\r\n    }\r\n  }, [state, cookie, props.history])\r\n  let myHome = useCallback(() => {\r\n    if (cookie === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n    } else {\r\n      props.history.push(`/user/${state.userId}`)\r\n    }\r\n  }, [state, cookie, props.history])\r\n\r\n  return (\r\n    <div className=\"pull-down\" style={{ display: props.display }}>\r\n      <span className=\"flag\"><i></i></span>\r\n      <ul className=\"home-pull\">\r\n        <li onClick={myHome}><UserOutlined />我的首页</li>\r\n        <li onClick={toEditpage}><FormOutlined />编辑资料</li>\r\n        <li onClick={sign_out}><Link to='/sign'><LogoutOutlined />退出登陆</Link></li>\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\nlet PullDown = withRouter(PullList)\r\n\r\n\r\nfunction MessageItem({ inviteMsg, byCareMsg, byCommentMsg, className }) {\r\n  let [active, setActive] = useState(0)\r\n  let MessageList = [inviteMsg, byCareMsg, byCommentMsg][active]\r\n  let [scroll, setScroll] = useState(false)\r\n  useEffect(() => {\r\n    let listUl = document.querySelector('.nav-invited-list')\r\n    if (listUl.offsetHeight >= 430) {\r\n      setScroll(true)\r\n    }\r\n  }, [active])\r\n  return (\r\n    <div className={`nav-invited-outer ${className}`}>\r\n      <span className=\"flag\"><i></i></span>\r\n      <div className=\"nav-invited-head\">\r\n        <ul>\r\n          <li onClick={() => setActive(0)}><ProjectFilled className={active === 0 ? 'active-msgList' : ''} /></li>\r\n          <li onClick={() => setActive(1)}><HeartFilled className={active === 1 ? 'active-msgList' : ''} /></li>\r\n          <li onClick={() => setActive(2)}><LikeFilled className={active === 2 ? 'active-msgList' : ''} /></li>\r\n        </ul>\r\n      </div>\r\n      <ul className={scroll ? \"nav-invited-list nav-invited-scroll\" : 'nav-invited-list'}>\r\n        {active === 1 && <div className=\"msgList-care-head\"><span>最近这些人关注了你</span></div>}\r\n        {MessageList.length !== 0 && MessageList.map((it, idx) => {\r\n          return (\r\n            <Fragment key={idx}>\r\n              {active === 0 && <InvitedItem item={it} />}\r\n              {active === 1 && <CareItem item={it} />}\r\n              {active === 2 && <CommentLikeItem item={it} />}\r\n            </Fragment>\r\n          )\r\n        })\r\n        }\r\n        {MessageList.length === 0 &&\r\n          <li className=\"nav-invited-item\">\r\n            <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description=\"还没有新的动态哦！\" />\r\n          </li>\r\n        }\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\nfunction InvitedItem({ item }) {\r\n  return (\r\n    <li className=\"nav-invited-item\" key={item.createdAt}>\r\n      <Link to={`/user/${item.userId}`}>{item.userName}</Link>\r\n      <span>&nbsp;邀请您回答问题&nbsp;</span>\r\n      <Link to={`/post-page/${item.postId}`}>{item.title}</Link>\r\n    </li>\r\n  )\r\n}\r\nfunction CareItem({ item }) {\r\n  return (\r\n    <li className=\"nav-cares-item\" key={item.createdAt}>\r\n      <Link to={`/user/${item.userId}`}>\r\n        <i style={{ backgroundImage: `url(${item.avatar})` }} className=\"msgList-care-avatar\"></i>\r\n        <div>\r\n          <h4>{item.name}</h4>\r\n          <span>{item.sign}</span>\r\n        </div>\r\n      </Link>\r\n    </li>\r\n  )\r\n}\r\n\r\nfunction CommentLikeItem({ item }) {\r\n  let TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\r\n  let TIME_CONTENT = parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ? moment(item.createdAt * 1).format(\"MM-DD HH:mm\") : TIME\r\n  return (\r\n    <li className=\"nav-invited-item\" key={item.createdAt}>\r\n      <Link to={`/user/${item.userId}`}>{item.userName}</Link>\r\n      <span>&nbsp;点赞了您的回答:&nbsp;<span className=\"nav-comment-item-time\">{TIME_CONTENT}</span></span>\r\n      <Link to={`/post-page/${item.postId}`} className=\"nav-comment-item-content\" >{item.content}</Link>\r\n      <Link to={`/post-page/${item.postId}`} className=\"nav-comment-item-title\" title={item.title}>{item.title}</Link>\r\n    </li>\r\n  )\r\n}\r\n\r\nfunction ChatComponent({ className, chatList }) {\r\n  let [active, setActive] = useState(0)\r\n  let [cares, setCare] = useState(navStore.getState().cares || {})\r\n  let [openChat, setOpenChat] = useState(false)\r\n  let [state, setState] = useState(navStore.getState())\r\n  let [targetInfo, setTargetInfo] = useState({})\r\n  let [headLabelCare, setHeadLabelCare] = useState(false)\r\n  let [headLabelOther, setHeadLabelOther] = useState(false)\r\n  useEffect(() => {\r\n    let uns = navStore.subscribe(() => {\r\n      setState(navStore.getState())\r\n      setCare(navStore.getState().cares)\r\n    })\r\n    return () => uns()\r\n  }, [])\r\n  let careChat = chatList.filter(it => {\r\n    if (it[0].userName === state.cookieUser) {\r\n      return cares[it[0].targetId]\r\n    } else {\r\n      return cares[it[0].userId]\r\n    }\r\n  })\r\n  let strangerChat = chatList.filter(it => {\r\n    if (it[0].userName === state.cookieUser) {\r\n      return !cares[it[0].targetId]\r\n    } else {\r\n      return !cares[it[0].userId]\r\n    }\r\n  })\r\n  let openChatWindow = useCallback((item, setUnread, targetInfo) => {\r\n    setOpenChat(!openChat)\r\n    setTargetInfo(targetInfo)\r\n    axios.post('/api/clear-chat', { targetName: item.name })\r\n    setUnread(0)\r\n  }, [openChat])\r\n  useEffect(() => {\r\n    if (!openChat) {\r\n      axios.get('/api/chat-list').then(res => {\r\n        let initial = res.data\r\n        navStore.dispatch({\r\n          type: 'getInitial',\r\n          ...initial,\r\n        })\r\n      })\r\n    }\r\n  }, [openChat])\r\n  useEffect(() => {\r\n    //可优化\r\n    if (!state.cookieUser) return\r\n    let careCount = 0\r\n    careChat.forEach(it => {\r\n      let count = it.filter(item => item.status === 'normal' && item.userName !== state.cookieUser)\r\n      careCount += count.length\r\n    })\r\n    if (careCount) {\r\n      setHeadLabelCare(true)\r\n    } else {\r\n      setHeadLabelCare(false)\r\n    }\r\n    let otherCount = 0\r\n    strangerChat.forEach(it => {\r\n      let count = it.filter(item => {\r\n        return item.status === 'normal' && item.userName !== state.cookieUser\r\n      })\r\n      otherCount += count.length\r\n    })\r\n    if (otherCount) {\r\n      setHeadLabelOther(true)\r\n    } else {\r\n      setHeadLabelOther(false)\r\n    }\r\n  }, [careChat, strangerChat, state])\r\n  return (\r\n    <div className={`nav-invited-outer ${className} nav-chat-outer`}>\r\n      <span className=\"flag\"><i></i></span>\r\n      <div className=\"nav-invited-head\">\r\n        <ul className=\"nav-chat-head\">\r\n          <li onClick={() => setActive(0)} className={active === 0 ? 'nav-chat-active' : 'nav-chat'}><span>最近联系</span>{headLabelCare && <label className=\"chat-head-label\"></label>}</li>\r\n          <li onClick={() => setActive(1)} className={active === 1 ? 'nav-chat-active' : 'nav-chat'}><span>陌生人私信</span>{headLabelOther && <label className=\"chat-head-label\"></label>}</li>\r\n        </ul>\r\n      </div>\r\n      <ul className={'nav-chat-list nav-invited-list'}>\r\n        {active === 0 && careChat.length !== 0 && careChat.map(it => {\r\n          let unread = it.filter(it => it.status === 'normal' && it.userName !== state.cookieUser).length\r\n          let targetId\r\n          // = it.filter(it => it.targetName === state.cookieUser)[0]\r\n          if (it[0].targetName === state.cookieUser) {\r\n            targetId = it[0].userId\r\n          } else {\r\n            targetId = it[0].targetId\r\n          }\r\n          return (\r\n            <Fragment key={it[0].createdAt} >\r\n              {<CareChat item={it[0]} targetId={targetId} unread={unread} onClick={openChatWindow} />}\r\n            </Fragment >\r\n          )\r\n        })\r\n        }\r\n        {active === 1 && strangerChat.length !== 0 && strangerChat.map(it => {\r\n          let unread = it.filter(it => it.status === 'normal' && it.userName !== state.cookieUser).length\r\n          let targetId\r\n          // = it.filter(it => it.targetName === state.cookieUser)[0]\r\n          if (it[0].targetName === state.cookieUser) {\r\n            targetId = it[0].userId\r\n          } else {\r\n            targetId = it[0].targetId\r\n          }\r\n          return (\r\n            <Fragment key={it[0].createdAt}>\r\n              {<StrangerChat item={it[0]} unread={unread} targetId={targetId} onClick={openChatWindow} />}\r\n            </Fragment >\r\n          )\r\n        })\r\n        }\r\n        {((strangerChat.length === 0 && active === 1) || (careChat.length === 0 && active === 0)) &&\r\n          <li className=\"nav-invited-item\">\r\n            <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description=\"还没有私信哦！\" />\r\n          </li>\r\n        }\r\n      </ul>\r\n      {openChat && <ChatWindow targetInfo={targetInfo} state={state} setChat={setOpenChat} />}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CareChat({ item, unread, onClick, targetId }) {\r\n  let avatar = item.userId === targetId ? item.userAvatar : item.targetAvatar\r\n  let name = item.userId === targetId ? item.userName : item.targetName\r\n  let [notRead, setUnread] = useState(unread)\r\n  let [targetInfo, setTargetInfo] = useState({})\r\n  useEffect(() => {\r\n    axios.post('/api/userInfo-serach', { id: targetId })\r\n      .then(res => {\r\n        setTargetInfo(res.data.userInfo)\r\n      })\r\n  }, [targetId])\r\n  return (\r\n    <>\r\n      <li className=\"nav-chat-item\" key={item.createdAt} onClick={() => onClick(targetInfo, setUnread, targetInfo)}>\r\n        {notRead !== 0 &&\r\n          <label className=\"nav-message-icon chat-unred\">{notRead}</label>\r\n        }\r\n        <div>\r\n          <i style={{ backgroundImage: `url(${avatar})` }} className=\"msgList-care-avatar\"></i>\r\n          <div>\r\n            <h4>{name}</h4>\r\n            <span>{item.content}</span>\r\n          </div>\r\n        </div>\r\n      </li>\r\n\r\n    </>\r\n  )\r\n}\r\nfunction StrangerChat({ item, unread, onClick, targetId }) {\r\n  let avatar = item.userId === targetId ? item.userAvatar : item.targetAvatar\r\n  let name = item.userId === targetId ? item.userName : item.targetName\r\n  let [notRead, setUnread] = useState(unread)\r\n  let [targetInfo, setTargetInfo] = useState({})\r\n  useEffect(() => {\r\n    axios.post('/api/userInfo-serach', { id: targetId })\r\n      .then(res => {\r\n        setTargetInfo(res.data.userInfo)\r\n      })\r\n  }, [targetId])\r\n  return (\r\n    <li className=\"nav-chat-item\" key={item.createdAt} onClick={() => onClick(targetInfo, setUnread, targetInfo)}>\r\n      {notRead !== 0 &&\r\n        <label className=\"nav-message-icon chat-unred\">{notRead}</label>\r\n      }\r\n      <div>\r\n        <i style={{ backgroundImage: `url(${avatar})` }} className=\"msgList-care-avatar\"></i>\r\n        <div>\r\n          <h4>{name}</h4>\r\n          <span>{item.content}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n","import React, { useCallback } from 'react'\r\nimport './question.css'\r\nimport { homeStore, navStore } from '../redux/redux'\r\nimport axios from 'axios'\r\n\r\n\r\nexport default function () {\r\n\r\n  let submitQus = useCallback(() => {\r\n\r\n    let postContent = document.querySelector('.neirong').value\r\n    let postTitle = document.querySelector('#fileName').value\r\n    let post = {\r\n      title: postTitle,\r\n      content: postContent\r\n    }\r\n    if (post.title.trim() === '' || post.content.trim() === '') {\r\n      return\r\n    }\r\n    axios.post('/api/home_Page/', post)\r\n      .then(res => {\r\n        homeStore.dispatch({\r\n          type: 'postQuestion',\r\n          question: false,\r\n          postCount: res.data.postCount,\r\n          posts: res.data.posts,\r\n        })\r\n      }).catch(rej => {\r\n        if (rej.response.status === 401) {\r\n          navStore.dispatch({\r\n            type: 'toSign',\r\n            sign: false,\r\n          })\r\n          homeStore.dispatch({\r\n            type: 'question',\r\n            question: false,\r\n          })\r\n        }\r\n      })\r\n\r\n  }, [])\r\n\r\n  let closeQUs = useCallback(() => {\r\n    homeStore.dispatch({\r\n      type: 'question',\r\n      question: false,\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <label className=\"clear-qus\" onClick={closeQUs}>x</label>\r\n      <div id=\"questionDiv\">\r\n        <div className=\"question-outer\">\r\n          <div className=\"header\">\r\n            <input type=\"text\" id=\"fileName\" placeholder=\"请输入标题\" name=\"title\" />\r\n          </div>\r\n          <section>\r\n            <textarea className=\"neirong\" contentEditable name=\"content\"></textarea>\r\n          </section>\r\n          <label className=\"qst-submit\" onClick={submitQus}>发布问题</label>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import React, { useCallback, useState } from 'react'\r\nimport moment from 'moment';\r\nimport axios from 'axios'\r\nimport { Comment, Form, Button, Input } from 'antd';\r\nimport { ansComStore, navStore } from '../redux/redux';\r\nimport { DislikeFilled, MessageFilled, LikeFilled, } from '@ant-design/icons';\r\nimport { Link } from \"react-router-dom\"\r\nconst { TextArea } = Input;\r\n\r\n\r\nexport default function () {\r\n  return (\r\n    <div></div>\r\n  )\r\n}\r\n\r\nexport function EndCommentList({ item, commentId, state, ansCommentId }) {\r\n  let { myLikeEndComment = {}, myPoorEndComment = {} } = state\r\n  let [value, setValue] = useState('')\r\n  let [endComment, setEndComment] = useState(false)\r\n\r\n  let id = item.endCommentId\r\n  let inputComment = useCallback((e) => {\r\n    setValue(e.target.value)\r\n  }, [])\r\n  let sendComment = useCallback(() => {\r\n    setEndComment(!endComment)\r\n  }, [endComment])\r\n  let likeORpoor = useCallback((t) => {\r\n    if (t === '赞') {\r\n      ansComStore.dispatch({\r\n        type: 'likeEndComment',\r\n        id: id,\r\n        ansCommentId: item.ansCommentId\r\n      })\r\n    } else {\r\n      ansComStore.dispatch({\r\n        type: 'poorEndComment',\r\n        id: id,\r\n        ansCommentId: item.ansCommentId\r\n      })\r\n    }\r\n  }, [id, item])\r\n  let toSendEndComment = useCallback(() => {\r\n    if (state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n      return\r\n    }\r\n    if (value.trim() === '') { return }\r\n    axios.post(`/api/endComment/${ansCommentId}`, {\r\n      content: value,\r\n      targetUserId: item.userId,\r\n      commentId: commentId\r\n    })\r\n      .then(res => {\r\n        ansComStore.dispatch({\r\n          type: 'postEndComment',\r\n          id: ansCommentId,\r\n          newList: res.data.newEndCommentList,\r\n        })\r\n      })\r\n    setValue('')\r\n  }, [ansCommentId, value, item, commentId, state])\r\n  let action = (\r\n    <>\r\n      <ul className=\"ansComment-action\">\r\n        <li onClick={() => likeORpoor('赞')} className={myLikeEndComment[id] ? 'activeAnsComment' : ''}><LikeFilled /> {item.like}</li>\r\n        <li onClick={() => likeORpoor('踩')} className={myPoorEndComment[id] ? 'activeAnsComment' : ''}><DislikeFilled /> 踩</li>\r\n        <li onClick={sendComment}><MessageFilled /> {endComment ? '取消回复' : '回复'}</li>\r\n      </ul>\r\n      {endComment &&\r\n        <Form.Item>\r\n          <TextArea autoSize={true} placeholder={' 回复 ' + item.name} className=\"endComment\" style={{ width: '490px', marginRight: '15px' }} onInput={inputComment} value={value} />\r\n          <Button htmlType=\"submit\" type=\"primary\" onClick={toSendEndComment}>\r\n            发送\r\n          </Button>\r\n        </Form.Item>\r\n      }\r\n    </>\r\n  )\r\n  let author = (\r\n    <div className=\"ansComment-header\">\r\n      <i style={{ backgroundImage: `url(${item.avatar})` }} className=\"endComment-avatar\"></i>\r\n      <Link to={`/user/${item.userId}`}>{item.name}{item.userId === commentId ? '(作者)' : ''}</Link>\r\n      &nbsp;&nbsp;回复&nbsp;&nbsp;\r\n      <Link to={`/user/${item.targetUserId}`}>{item.targetName}{item.targetUserId === commentId ? '(作者)' : ''}</Link>\r\n    </div>\r\n  )\r\n  let TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\r\n  return (\r\n    <Comment actions={[action]} author={[author]} datetime={\r\n      parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\r\n        moment(item.createdAt * 1).format(\"MM-DD HH:mm:ss\")\r\n        : TIME\r\n    } content={<p>{item.content}</p>}>\r\n    </Comment>\r\n  )\r\n}\r\n","import React, { Fragment, useCallback, useEffect, useState } from 'react'\r\nimport moment from 'moment';\r\nimport axios from 'axios'\r\nimport { Comment, Form, Button, Input } from 'antd';\r\nimport { ansComStore, navStore, pageStore } from '../redux/redux';\r\nimport { DislikeFilled, WechatFilled, MessageFilled, LikeFilled, } from '@ant-design/icons';\r\nimport { EndCommentList } from './endComment'\r\nimport { Link } from \"react-router-dom\"\r\nconst { TextArea } = Input;\r\n\r\n// import { useParams } from 'react-router-dom'\r\n\r\nexport default function (props) {\r\n  let id = props.id\r\n  let [state, setState] = useState({ ansCommentList: [] })\r\n  useEffect(() => {\r\n    axios.get(`/api/ansComment/${id}`)\r\n      .then(res => {\r\n        let initial = res.data\r\n        ansComStore.dispatch({\r\n          type: 'getInitial',\r\n          id: id,\r\n          ansCommentList: initial.ansCommentList,\r\n          myLikeAnsComment: initial.myLikeAnsComment,\r\n          myPoorAnsComment: initial.myPoorAnsComment,\r\n          cookieUser: initial.cookieUser,\r\n        })\r\n      })\r\n  }, [id])\r\n  let ansCommentList = state.ansCommentList[id] || []\r\n  useEffect(() => {\r\n    let uns = ansComStore.subscribe(() => setState(ansComStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"ansComment-outer\">\r\n      <div className=\"ansComment-head\" ><h4>{ansCommentList.length} 条评论</h4></div>\r\n      <ul className=\"ansComment-container\">\r\n        {ansCommentList.map((item, idx) => {\r\n          return (\r\n            <Fragment key={idx}>\r\n              <CommentAns item={item} state={state} />\r\n            </Fragment>\r\n          )\r\n        })\r\n        }\r\n      </ul>\r\n      <div className=\"ansComment-put\">\r\n        <AnsComment state={state} id={id} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CommentAns(props) {\r\n  let item = props.item\r\n  let id = item.ansCommentId\r\n  let { myLikeAnsComment = {}, myPoorAnsComment = {} } = props.state\r\n  let [endComment, setEndComment] = useState(false)\r\n  let [value, setValue] = useState('')\r\n  let [allView, setAllView] = useState(false)\r\n  let [hide, setHide] = useState(true)\r\n  let [endCommentList, updateEndCommentList] = useState(props.state.endCommentList[id] || [])\r\n  let [commentIcon, setCommIcon] = useState(false)\r\n  useEffect(() => {\r\n    if (item.endComment > 0) {\r\n      setCommIcon(true)\r\n    } else {\r\n      setCommIcon(false)\r\n    }\r\n  }, [item])\r\n  useEffect(() => {\r\n    let uns = ansComStore.subscribe(() => {\r\n      let newData = ansComStore.getState().endCommentList[id]\r\n      updateEndCommentList(newData)\r\n      return () => uns()\r\n    })\r\n  }, [id])\r\n\r\n  let inputComment = useCallback((e) => {\r\n    setValue(e.target.value)\r\n  }, [])\r\n  useEffect(() => {\r\n    axios.get(`/api/endComment/${id}`)\r\n      .then(res => {\r\n        let initial = res.data\r\n        ansComStore.dispatch({\r\n          type: 'getEndCommentList',\r\n          id: id,\r\n          endCommentList: initial.endCommentList,\r\n          myLikeEndComment: initial.myLikeEndComment,\r\n          myPoorEndComment: initial.myPoorEndComment,\r\n          cookieUser: initial.cookieUser,\r\n        })\r\n      })\r\n  }, [id])\r\n  let likeORpoor = useCallback((t) => {\r\n    if (t === '赞') {\r\n      ansComStore.dispatch({\r\n        type: 'likeAnsComment',\r\n        id: id,\r\n        commentId: item.commentId\r\n      })\r\n    } else {\r\n      ansComStore.dispatch({\r\n        type: 'poorAnsComment',\r\n        id: id,\r\n        commentId: item.commentId\r\n      })\r\n    }\r\n  }, [id, item])\r\n  let sendComment = useCallback(() => {\r\n    setEndComment(!endComment)\r\n  }, [endComment])\r\n  let toSendEndComment = useCallback(() => {\r\n    if (props.state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n      return\r\n    }\r\n    if (value.trim() === '') { return }\r\n    axios.post(`/api/endComment/${id}`, {\r\n      content: value,\r\n      targetUserId: item.userId,\r\n      commentId: item.commentId\r\n    })\r\n      .then(res => {\r\n        ansComStore.dispatch({\r\n          type: 'postEndComment',\r\n          id: id,\r\n          newList: res.data.newEndCommentList,\r\n          commentId: item.commentId,\r\n        })\r\n        setHide(false)\r\n        setAllView(true)\r\n      })\r\n\r\n    setValue('')\r\n  }, [id, value, props, item])\r\n  let hideORview = useCallback(() => {\r\n    setHide(!hide)\r\n    if (hide === true) {\r\n      setAllView(false)\r\n    }\r\n  }, [hide])\r\n  let action = (\r\n    <>\r\n      <ul className=\"ansComment-action\">\r\n        <li onClick={() => likeORpoor('赞')} className={myLikeAnsComment[id] ? 'activeAnsComment' : ''}><LikeFilled /> {item.like}</li>\r\n        <li onClick={() => likeORpoor('踩')} className={myPoorAnsComment[id] ? 'activeAnsComment' : ''}><DislikeFilled /> 踩</li>\r\n        {commentIcon &&\r\n          <li onClick={hideORview} ><WechatFilled />{hide ? ' 查看回复' : ' 隐藏回复'} </li>\r\n        }\r\n        <li onClick={sendComment}><MessageFilled /> {endComment ? '取消回复' : '回复'}</li>\r\n      </ul>\r\n      {endComment &&\r\n        <Form.Item>\r\n          <TextArea autoSize={true} placeholder={' 回复 ' + item.name} className=\"endComment\" style={{ width: '535px', marginRight: '15px' }} onInput={inputComment} value={value} />\r\n          <Button htmlType=\"submit\" type=\"primary\" onClick={toSendEndComment}>\r\n            发送\r\n          </Button>\r\n        </Form.Item>\r\n      }\r\n    </>\r\n  )\r\n  let author = (\r\n    <div className=\"ansComment-header\">\r\n      <i className=\"endComment-avatar\" style={{ backgroundImage: `url(${item.avatar})` }}></i>\r\n      <Link to={`/user/${item.userId}`}>{item.name}{item.userId === item.commentId ? '(作者)' : ''}</Link>\r\n    </div>\r\n  )\r\n  let TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\r\n\r\n  return (\r\n    <>\r\n      <Comment actions={[action]} author={[author]} datetime={\r\n        parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\r\n          moment(item.createdAt * 1).format(\"MM-DD HH:mm:ss\")\r\n          : TIME\r\n      } content={<p>{item.content}</p>}>\r\n        {!hide &&\r\n          <>\r\n            {!allView && endCommentList.slice(0, 2).map(it => {\r\n              return (<EndCommentList item={it} commentId={item.commentId} state={props.state} ansCommentId={id} />)\r\n            })}\r\n            {endCommentList.length > 2 && <span className=\"all-endComment\" onClick={() => setAllView(true)} style={{ display: allView ? 'none' : 'block' }}>查看全部{endCommentList.length}条回复</span>}\r\n            {allView &&\r\n              endCommentList.map(it => {\r\n                return (<EndCommentList item={it} commentId={item.commentId} state={props.state} ansCommentId={id} />)\r\n              })\r\n            }\r\n          </>\r\n        }\r\n      </Comment>\r\n    </>\r\n  )\r\n}\r\nfunction AnsComment(props) {\r\n  let id = props.id\r\n  let [value, setValue] = useState('')\r\n  let inputComment = useCallback((e) => {\r\n    setValue(e.target.value)\r\n  }, [])\r\n  let postComment = useCallback(() => {\r\n    if (props.state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n      return\r\n    }\r\n    if (value.trim() === '') { return }\r\n    axios.post(`/api/ansComment/${id}`, {\r\n      content: value,\r\n    })\r\n      .then(res => {\r\n        ansComStore.dispatch({\r\n          type: 'postComment',\r\n          id: id,\r\n          newList: res.data.newAnsCommentList,\r\n        })\r\n        pageStore.dispatch({\r\n          type: 'ansCommentList',\r\n          id: id,\r\n        })\r\n        setValue('')\r\n      })\r\n  }, [id, value, props])\r\n  return (\r\n    <>\r\n      <Form.Item>\r\n        <TextArea rows={2} placeholder=\"请输入评论内容\" onInput={inputComment} value={value} />\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <Button htmlType=\"submit\" type=\"primary\" onClick={postComment}>\r\n          添加评论\r\n      </Button>\r\n      </Form.Item>\r\n    </>\r\n  )\r\n}\r\n\r\n","import React, { useCallback, useEffect, useState } from 'react'\r\n// import axios from 'axios'\r\nimport { homeStore, pageStore, navStore } from '../redux/redux'\r\nimport { CaretUpFilled, CaretDownFilled, DownOutlined, UpOutlined, MessageFilled, StarFilled, HeartFilled } from '@ant-design/icons'\r\nimport AnsCommentList from './ansComment'\r\n\r\n//首页\r\nfunction useSelectState(props) {\r\n  let ques = props.type === 'question'\r\n\r\n  let [post, setPost] = useState(props.post || props.comment)\r\n  let postId = ques ? post.postId : post.commentId\r\n  // let post = props.post\r\n  let [active, setActive] = useState()\r\n  let [poorActive, setPoor] = useState()\r\n  let [collectActive, setCollect] = useState()\r\n  let [favoriteActive, setFavorite] = useState()\r\n  debugger\r\n  useEffect(() => {\r\n    //首页\r\n    if (ques) {\r\n      setActive(props.state.attention[postId])\r\n      setPoor(props.state.poors[postId])\r\n      setCollect(props.state.collect_quesActive[postId])\r\n      setFavorite(props.state.favoriteQues[postId])\r\n      let homeUns = homeStore.subscribe(() => {\r\n        let newPost = homeStore.getState().posts.find(it => it.postId === postId)\r\n        setPost(newPost)\r\n      })\r\n      return () => homeUns()\r\n\r\n    } else {\r\n      //post-page\r\n      setActive(props.state.likes[postId])\r\n      setPoor(props.state.commentPoors[postId])\r\n      setCollect(props.state.collect_commActive[postId])\r\n      setFavorite(props.state.favoriteComment[postId])\r\n\r\n      let postUns = pageStore.subscribe(() => {\r\n        let newComment = pageStore.getState().commenterInfo.find(it => it.commentId === postId)\r\n        setPost(newComment || {})\r\n      })\r\n      return () => postUns()\r\n    }\r\n\r\n  }, [postId, ques, props])\r\n  //home\r\n  let toAttention = useCallback(() => {\r\n    if (props.state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n    } else {\r\n      homeStore.dispatch({\r\n        type: 'toAttention',\r\n        postId,\r\n        like: post.qusLike,\r\n      })\r\n    }\r\n  }, [post, postId, props])\r\n\r\n  let poorButton = useCallback(() => {\r\n    if (props.state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n    } else {\r\n      if (ques) {\r\n        homeStore.dispatch({\r\n          type: 'poorButton',\r\n          postId: postId,\r\n          poor: post.poor,\r\n        })\r\n      } else {\r\n        pageStore.dispatch({\r\n          type: 'poorButton',\r\n          commentId: postId,\r\n          poor: post.poor,\r\n        })\r\n      }\r\n    }\r\n  }, [postId, post, ques, props])\r\n\r\n  //page\r\n  let likeComment = useCallback(() => {\r\n    if (props.state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n    } else {\r\n      pageStore.dispatch({\r\n        type: 'likeComment',\r\n        commentId: postId,\r\n        like: post.like,\r\n      })\r\n    }\r\n  }, [post, postId, props])\r\n\r\n  let getCollect = useCallback(() => {\r\n    if (props.state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n    } else {\r\n      if (ques) {\r\n        homeStore.dispatch({\r\n          type: 'collect',\r\n          collectId: postId,\r\n          id: post.posterId\r\n        })\r\n      } else {\r\n        pageStore.dispatch({\r\n          type: 'collect',\r\n          collectId: postId,\r\n          id: post.commenterId\r\n        })\r\n      }\r\n    }\r\n  }, [ques, post, props, postId])\r\n  let getFavorite = useCallback(() => {\r\n    if (props.state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n    } else {\r\n      if (ques) {\r\n        homeStore.dispatch({\r\n          type: 'favorite',\r\n          favoriteId: postId,\r\n          id: post.posterId\r\n        })\r\n      } else {\r\n        pageStore.dispatch({\r\n          type: 'favorite',\r\n          favoriteId: postId,\r\n          id: post.commenterId\r\n        })\r\n      }\r\n    }\r\n  }, [ques, post, props, postId])\r\n\r\n  return { post, active, poorActive, toAttention, poorButton, likeComment, getCollect, collectActive, getFavorite, favoriteActive }\r\n}\r\n\r\nexport default function PostsFooter(props) {\r\n  let idx = props.idx\r\n  let ques = props.type === 'question'\r\n  let { post = {}, active, poorActive, toAttention, likeComment, poorButton, getCollect, collectActive, getFavorite, favoriteActive } = useSelectState(props)\r\n\r\n  let [fold, setFold] = useState(true)  // 收起展开\r\n  let [hide, setHide] = useState(false)  // 显示/隐藏按钮\r\n  useEffect(() => {\r\n    let span = document.querySelectorAll('[name=\"content\"] p span')\r\n    if (span[idx] && span[idx].offsetHeight > 44) {\r\n      let p = document.querySelectorAll('[name=\"content\"] p')[idx]\r\n      p.classList.add('flodContent')\r\n      p.style.height = ques ? '52px' : '40px'\r\n      setHide(true)\r\n    }\r\n  }, [idx, ques])\r\n\r\n  let foldContent = useCallback(() => {\r\n    let p = document.querySelectorAll('[name=\"content\"] p')[idx]\r\n    let arr = Array.from(p.classList)\r\n    let span = document.querySelectorAll('[name=\"content\"] p span')\r\n    if (!arr.includes('flodContent')) {\r\n      p.classList.add('flodContent')\r\n      p.style.height = ques ? '52px' : '40px'\r\n      setFold(true)\r\n    } else {\r\n      p.classList.remove('flodContent')\r\n      p.style.height = span[idx].offsetHeight + 5 + \"px\"\r\n      setFold(false)\r\n    }\r\n  }, [idx])\r\n\r\n  let [ansComment, setAnsComment] = useState(false)\r\n  let ansCommentflad = useCallback(() => {\r\n    setAnsComment(!ansComment)\r\n  }, [ansComment])\r\n  return (\r\n    <>\r\n      <div className=\"postsfooter\">\r\n        <button type=\"button\" className={active ? 'likeActive' : ''} onClick={ques ? toAttention : likeComment} ><CaretUpFilled /> {ques ? `关注 ${post.qusLike}` : `赞同 ${post.like}`} </button>\r\n        <button type=\"button\" className={poorActive ? 'likeActive' : ''} onClick={poorButton}><CaretDownFilled />{ques ? ` 踩 ${post.poor}` : ` 反对 ${post.poor}`}</button>\r\n        <ul>\r\n          <li onClick={ansCommentflad}><MessageFilled /> {ques ? `${props.post.answerCount} 条回答` : ansComment ? '收起评论' : `${props.comment.ansComments} 条评论`}</li>\r\n          <li onClick={getCollect}><StarFilled />{collectActive ? '已收藏' : '收藏'} </li>\r\n          <li onClick={getFavorite}><HeartFilled />{favoriteActive ? ' 已喜欢' : ' 喜欢'} </li>\r\n        </ul>\r\n        {hide && <>\r\n          {fold\r\n            ? <span onClick={foldContent}>全部展开 <DownOutlined /></span>\r\n            : <span onClick={foldContent}>收起 <UpOutlined /></span>\r\n          }</>\r\n        }\r\n      </div>\r\n      {ansComment && !ques && <AnsCommentList id={post.commentId} />}\r\n    </>\r\n  )\r\n}\r\n\r\n\r\n\r\n/*\r\nexport default function PostsFooter(props) {\r\n  let idx = props.idx\r\n  let ques = props.type === 'question'\r\n  let postId = ques ? props.post.postId : props.comment.commentId\r\n  let [postLike, setPost] = useState({})\r\n  let [active, setActive] = useState()\r\n  let [poorActive, setPoor] = useState()\r\n  let [fold, setFold] = useState(true)\r\n  let [hide, setHide] = useState(false)\r\n  // let [like,upLike] = useState(false)\r\n  useEffect(() => {\r\n    let span = document.querySelectorAll('[name=\"content\"] p span')\r\n    if (span[idx].offsetHeight > 41) {\r\n      setHide(true)\r\n    }\r\n    //首页\r\n    if (ques) {\r\n      setPost(homeStore.getState().posts[idx])\r\n      setActive(props.state.attention[postId])\r\n      setPoor(props.state.poors[postId])\r\n\r\n      let homeUns = homeStore.subscribe(() => setPost(homeStore.getState().posts[idx]))\r\n      return () => homeUns()\r\n\r\n    } else {\r\n      //post-page\r\n      setPost(pageStore.getState().commenterInfo[idx])\r\n      setActive(props.state.likes[postId])\r\n      setPoor(props.state.poors[postId])\r\n\r\n      let postUns = pageStore.subscribe(() => setPost(pageStore.getState().commenterInfo[idx]))\r\n      return () => postUns()\r\n    }\r\n\r\n  }, [idx])\r\n\r\n  let foldContent = useCallback(() => {\r\n    let p = document.querySelectorAll('[name=\"content\"] p')[idx]\r\n    let style = p.style.display\r\n    if (style === 'block') {\r\n      p.style.display = '-webkit-box'\r\n      setFold(true)\r\n    } else {\r\n      p.style.display = 'block'\r\n      setFold(false)\r\n    }\r\n  }, [idx])\r\n\r\n  let toAttention = useCallback(() => {\r\n    homeStore.dispatch({\r\n      type: 'toAttention',\r\n      postId,\r\n      like: postLike.qusLike,\r\n      idx,\r\n    })\r\n    setActive(homeStore.getState().attention[postId])\r\n  }, [postLike, idx])\r\n\r\n  let likeComment = useCallback(() => {\r\n    pageStore.dispatch({\r\n      type: 'likeComment',\r\n      commentId: postId,\r\n      like: postLike.like,\r\n      idx,\r\n    })\r\n    setActive(pageStore.getState().likes[postId])\r\n  }, [postLike, idx])\r\n\r\n  let poorButton = useCallback(() => {\r\n    if (ques) {\r\n      homeStore.dispatch({\r\n        type: 'poorButton',\r\n        postId: postId,\r\n        poor: postLike.poor,\r\n        idx,\r\n      })\r\n      setPoor(homeStore.getState().poors[postId])\r\n    } else {\r\n      pageStore.dispatch({\r\n        type: 'poorButton',\r\n        commentId: postId,\r\n        poor: postLike.poor,\r\n        idx,\r\n      })\r\n      setPoor(pageStore.getState().poors[postId])\r\n    }\r\n  }, [postLike, idx])\r\n  return (\r\n    <div className=\"postsfooter\">\r\n      <button type=\"button\" className={active ? 'likeActive' : ''} onClick={ques ? toAttention : likeComment} ><CaretUpFilled /> {ques ? `关注 ${postLike.qusLike}` : `赞同 ${postLike.like}`} </button>\r\n      <button type=\"button\" className={poorActive ? 'likeActive' : ''} onClick={poorButton}><CaretDownFilled />{ques ? ` 踩 ${postLike.poor}` : ` 反对 ${postLike.poor}`}</button>\r\n      <ul>\r\n        <li><MessageFilled /> {ques ? `${props.post.answerCount} 条回答` : `${props.comment.ansComments} 条评论`}</li>\r\n        <li><StarFilled /> 收藏</li>\r\n        <li><HeartFilled /> 喜欢</li>\r\n      </ul>\r\n      {hide && <>\r\n        {fold\r\n          ? <span onClick={foldContent}>全部展开 <DownOutlined /></span>\r\n          : <span onClick={foldContent}>收起 <UpOutlined /></span>\r\n        }</>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n// function poorButton() {\r\n\r\n// }\r\n\r\n*/\r\n","import React, { useCallback, useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { homeStore, pageStore } from '../redux/redux'\r\nimport PostsFooter from './postfooter'\r\nimport { useParams } from 'react-router-dom'\r\nimport moment from 'moment';\r\nimport { Link } from \"react-router-dom\"\r\n\r\nexport default function () {\r\n  // let [state, setState] = useState(homeStore.getState())\r\n\r\n  // useEffect(() => {\r\n  //   let uns = homeStore.subscribe(() => setState(homeStore.getState()))\r\n\r\n  //   return () => uns()\r\n  // }, [])\r\n  // debugger\r\n  return (\r\n    <div className=\"invitation\">\r\n      <PostMain />\r\n      <Over />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function Attachment(props) {\r\n  let { id } = useParams()\r\n  let mePost = props.state.cookieUser === props.post.name\r\n  let postId = props.type === 'post' ? props.post.postId : props.post.commentId\r\n  let [attachment, setAttachment] = useState(false)\r\n  // let [status, UpStatus] = useState(false)\r\n\r\n  useEffect(() => {\r\n    let attachmentClick = () => {\r\n      setAttachment(false)\r\n    }\r\n    window.addEventListener('click', attachmentClick)\r\n    return () => window.removeEventListener('click', attachmentClick)\r\n  }, [attachment])\r\n  let deletePost = useCallback(() => {\r\n    if (props.type === 'post') {\r\n      axios.post('/api/deletePost/', { postId, type: 'post' })\r\n        .then(res => {\r\n          homeStore.dispatch({\r\n            type: 'deletePost',\r\n            postCount: res.data.postNormal.length,\r\n            posts: res.data.posts,\r\n          })\r\n        })\r\n    } else {\r\n\r\n      axios.post('/api/deletePost/', { id, postId, type: 'comment' })\r\n        .then(res => {\r\n          pageStore.dispatch({\r\n            type: 'deleteComment',\r\n            // postCount: res.data.postNormal.length,\r\n            comments: res.data.comments,\r\n          })\r\n        })\r\n    }\r\n\r\n  }, [postId, props, id])\r\n\r\n  let changeAttachment = useCallback((e) => {\r\n    e.stopPropagation()\r\n    setAttachment(!attachment)\r\n  }, [attachment])\r\n\r\n  return (\r\n    <>\r\n      <span className=\"deletePost\" onClick={changeAttachment}>...</span>\r\n      {attachment && <i className=\"deletePost-flag\"></i>\r\n      }\r\n      <div className={attachment ? 'deAttachment deAttaHeight' : 'deAttachment'}>\r\n        <ul>\r\n          <li onClick={mePost ? deletePost : () => { }} >\r\n            <span className={mePost ? '' : 'disableDelete'}>删除</span>\r\n          </li>\r\n          <li><span>举报</span></li>\r\n        </ul>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nfunction PostMain() {\r\n  let [state, setState] = useState(homeStore.getState())\r\n  let [posts, upPosts] = useState([])\r\n  useEffect(() => {\r\n    axios.get('/api/home-data').then(res => {\r\n      let initial = res.data\r\n      homeStore.dispatch({\r\n        ...initial,\r\n        type: 'getData',\r\n        posts: initial.posts.filter(it => it.status !== 'delete'),\r\n      })\r\n    })\r\n    let uns = homeStore.subscribe(() => {\r\n      setState(homeStore.getState())\r\n      upPosts(homeStore.getState().posts || [])\r\n    })\r\n    return () => uns()\r\n  }, [])\r\n\r\n  let postIdx = -1\r\n  return (\r\n    <ul className=\"posts\">\r\n      {\r\n        posts.map(post => {\r\n          let time = post.createdAt * 1\r\n          let TIME = moment(time).endOf().fromNow(true) + '前'\r\n          ++postIdx\r\n          return (\r\n            <li key={post.postId}>\r\n              <div className=\"user-date\">\r\n                <Link to={`/user/${post.posterId}`}><img alt=\"\" style={{ backgroundImage: `url(${post.avatar})` }} className=\"userAvatar\" /></Link>\r\n                <span className=\"post-username\"><Link to={`/user/${post.posterId}`}>{post.name}</Link>  ,<span className=\"post-time\">  发布于\r\n                  {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\r\n                    moment(time).format(\"YYYY-MM-DD HH:mm:ss\")\r\n                    : TIME\r\n                  }\r\n                </span></span>\r\n                <Attachment state={state} post={post} type='post' />\r\n              </div>\r\n              <div className=\"content-div\" name=\"content\">\r\n                <Link className=\"post-title\" to={`/post-page/${post.postId}`}>{post.title}</Link>\r\n                <p className=\"post-content\">\r\n                  <span>{post.content}</span>\r\n                </p>\r\n              </div>\r\n              <PostsFooter post={post} idx={postIdx} type=\"question\" state={state} />\r\n            </li>\r\n          )\r\n        })\r\n      }\r\n    </ul>\r\n  )\r\n}\r\n// withRouter(PostMain)\r\n\r\n\r\n\r\nexport function Over() {\r\n  return (\r\n    <div className=\"over\">\r\n      <span>没有更多内容了...</span>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { SyncOutlined, EditOutlined, ProjectFilled, StarFilled, HeartFilled, FileFilled, } from '@ant-design/icons'\r\nimport { homeStore, userStore, navStore } from '../redux/redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Link } from \"react-router-dom\"\r\n\r\nexport default function () {\r\n  let [data, setData] = useState(homeStore.getState())\r\n  useEffect(() => {\r\n    let uns = homeStore.subscribe(() => setData(homeStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n  return (\r\n    <div className=\"toolbar\">\r\n      <div className=\"toolbar-user-data\">\r\n        <ToolbarHead data={data} />\r\n        <UserInfo cookieUser={data.cookieUser} user={data.user} />\r\n        <UserSign data={data} />\r\n      </div>\r\n      <Recommend data={data} />\r\n      <FooterBar />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction ToolbarHead(props) {\r\n  let cookieUser = props.data.cookieUser\r\n  let user = props.data.user || {}\r\n  let signOut = useCallback(() => {\r\n    axios.post('/api/clearCookie/')\r\n  }, [])\r\n  return (\r\n    <span>\r\n      {cookieUser !== undefined\r\n        ? <>欢迎用户 <Link to={'/user/' + user.userId} className=\"denglu-user\">{cookieUser}</Link>\r\n          <Link to=\"/sign\" className=\"dengchu\" onClick={signOut}>登出</Link></>\r\n        : <>当前处于未登录状态\r\n          <Link to=\"/sign\" className=\"dengchu\">登录/注册</Link></>\r\n      }\r\n    </span>\r\n  )\r\n}\r\n\r\nfunction Info(props) {\r\n  let user = props.user || {}\r\n  let [avatar, avatarChange] = useState(user.avatar)\r\n  //切换头像\r\n  let [hoverAvatar, setHover] = useState(false)\r\n  let avatarCutover = useCallback((e) => {\r\n    let data = new FormData()\r\n    data.append('avatar', e.target.files[0])\r\n    axios.post('/api/user-avatar/', data, {\r\n      headers: { \"Content-Type\": \"multipart/form-data\" }\r\n    }).then(res => {\r\n      avatarChange(res.data)\r\n    })\r\n  }, [])\r\n  let inputAvatar = useCallback(() => {\r\n    document.querySelector('[name=\"avatar\"]').click()\r\n  }, [])\r\n  useEffect(() => {\r\n    avatarChange(user.avatar)\r\n  }, [user])\r\n  let pushUserPage = useCallback((idx) => {\r\n    if (props.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n    } else {\r\n      props.history.push(`/user/${user.userId}`)\r\n      userStore.dispatch({\r\n        type: 'activeSwitch',\r\n        active: idx,\r\n      })\r\n    }\r\n\r\n  }, [user, props])\r\n  useEffect(() => {\r\n    function switchAvatar() {\r\n      homeStore.dispatch({\r\n        type: 'hoverAvatar',\r\n        hover: true,\r\n      })\r\n    }\r\n    function clearAvatarEvent() {\r\n      homeStore.dispatch({\r\n        type: 'hoverAvatar',\r\n        hover: false,\r\n      })\r\n    }\r\n    let userAvatarDiv = document.querySelector('.user-avatar')\r\n    userAvatarDiv.addEventListener('mouseenter', switchAvatar)\r\n    userAvatarDiv.addEventListener('mouseleave', clearAvatarEvent)\r\n\r\n    let uns = homeStore.subscribe(() => setHover(homeStore.getState().hover))\r\n    return () => {\r\n      uns()\r\n      userAvatarDiv.removeEventListener('mouseenter', switchAvatar)\r\n      userAvatarDiv.removeEventListener('mouseleave', clearAvatarEvent)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"user-info\">\r\n      {props.cookieUser\r\n        ? <div className=\"user-avatar\" onClick={inputAvatar} style={{ backgroundImage: `url(${avatar})` }}>\r\n          {/* <i className=\"switch\"> </i> */}\r\n          <input type=\"file\" name=\"avatar\" style={{ display: 'none' }} onChange={avatarCutover} />\r\n          {hoverAvatar &&\r\n            <div className=\"avatarMouseEnter\">\r\n              <SyncOutlined /><span>更换头像</span>\r\n            </div>\r\n          }\r\n        </div>\r\n        : <div className=\"user-avatar\" style={{ backgroundImage: `url('/images/default.jpg')` }}>\r\n        </div>\r\n      }\r\n      <ul className=\"user-bar\">\r\n        <li onClick={() => pushUserPage(0)}><span><ProjectFilled />全部动态</span></li>\r\n        <li onClick={() => pushUserPage(5)}><span><StarFilled />我的收藏</span></li>\r\n        <li onClick={() => pushUserPage(4)}><span><HeartFilled />我的关注</span></li>\r\n        <li onClick={() => pushUserPage(1)}><span><FileFilled />历史回答</span></li>\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const UserInfo = withRouter(Info)\r\nexport function UserSign(props) {\r\n  let data = props.data || {}\r\n  // debugger\r\n  //更新签名\r\n  let user = data.user || {}\r\n  let signChange = useCallback((e) => {\r\n    e.stopPropagation()\r\n    if (data.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n      return\r\n    }\r\n    let sign = document.querySelector('.user-sign-text')\r\n    sign.setAttribute('contenteditable', true)\r\n    sign.focus()\r\n    sign.onblur = () => {\r\n      axios.post('/api/sign-edit/', { user_sign: sign.textContent })\r\n      sign.setAttribute('contenteditable', false)\r\n    }\r\n  }, [data])\r\n  let lastSign = useRef('')\r\n  let signInput = useCallback((e) => {\r\n    let text = e.target.textContent\r\n    if (text.length === 30) {\r\n      lastSign.current = text\r\n    }\r\n    if (text.length > 30) {\r\n      e.target.innerText = lastSign.current\r\n    }\r\n  }, [])\r\n  return (\r\n    <div className=\"user-sign\">\r\n      <i className=\"el-icon-edit\" onClick={signChange}><EditOutlined style={{ fontSize: '16px', marginRight: '8px' }} /> </i>\r\n      {data.cookieUser\r\n        ? <span className=\"user-sign-text\" onInput={signInput}>{user ? user.sign : data.poster.sign}</span>\r\n        : <span>当前还未登录，赶快前往登录吧！</span>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport function Recommend() {\r\n  let [data, upData] = useState(homeStore.getState())\r\n  // debugger\r\n  // let [divTop, upTop] = useState(0)\r\n  useEffect(() => {\r\n    //请求数据\r\n    axios.get('/api/home-data').then(res => {\r\n      let initial = res.data\r\n      homeStore.dispatch({\r\n        type: 'getData',\r\n        ...initial\r\n      })\r\n    })\r\n\r\n    // upTop(window.innerHeight)\r\n    // recommendScoll()\r\n    // let recommendDIV = document.querySelector('.recommend')\r\n    // window.onmousewheel = (e) => {\r\n    //   if (e.wheelDelta > 0 && window.scrollY === 0) {\r\n    //     recommendDIV.scrollTop = 0\r\n    //   }\r\n    // }\r\n\r\n    let uns = homeStore.subscribe(() => upData(homeStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n\r\n  let recommend = data.recommend || []\r\n  let recommendList = recommend.filter(it => it.status !== 'delete')\r\n\r\n  return (\r\n    <div className=\"recommend\"  >\r\n      <h3>热门问题</h3>\r\n      <ul className=\"recommend-list\">\r\n        {recommendList.slice(0, 15).map(item => {\r\n          return (\r\n            <li key={item.postId}>\r\n              <Link to={\"/post-page/\" + item.postId} title={item.title}>{item.title}</Link>\r\n            </li>\r\n          )\r\n        })\r\n        }\r\n      </ul>\r\n      {/* <FooterBar /> */}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function FooterBar() {\r\n  return (\r\n    <div className=\"footer-bar\">\r\n      <p> 陈听水 然也指南 然也协议 然也隐私保护指引 <br />应用工作申请开通然也机构号<br />侵权举报网上有害信息举报专区<br />京 ICP 证 110745 号<br />京 ICP 备 13052560 号 - 1<br />京公网安备 11010802010035 号<br />互联网药品信息服务资格证书<br />（京）- 非经营性 - 2017 - 0067违法和不良信息举报：010-82716601<br /> 儿童色情信息举报专区<br />证照中心<br />联系我们 © 2020 然也</p>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport Invitation from './invitation'\r\nimport Toolbar from './toolbar'\r\n\r\nexport default function () {\r\n  return (\r\n    <div className=\"body-container\">\r\n      <Invitation />\r\n      <Toolbar />\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState, useCallback } from 'react'\r\nimport Nav from '../components/header-nav'\r\nimport Question from '../components/question'\r\nimport { homeStore, navStore } from '../redux/redux'\r\nimport Container from '../components/body-container'\r\nimport axios from 'axios'\r\nimport { SearchOutlined } from '@ant-design/icons'\r\nimport { Link } from \"react-router-dom\"\r\nexport default function () {\r\n  let [state, setState] = useState(homeStore.getState())\r\n  // debugger\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/home-data').then(res => {\r\n      let initial = res.data\r\n      homeStore.dispatch({\r\n        type: 'getData',\r\n        ...initial,\r\n        posts: initial.posts.filter(it => it.status !== 'delete'),\r\n        // postCount: initial.postCount,\r\n      })\r\n    })\r\n    let uns = homeStore.subscribe(() => setState(homeStore.getState()))\r\n\r\n    return () => uns()\r\n  }, [])\r\n\r\n  // useEffect(() => {\r\n  //   let uns = homeStore.subscribe(() => setState(homeStore.getState()))\r\n  //   console.log('shuxinle')\r\n  //   return () => uns()\r\n  // }, [])\r\n  return (\r\n    <>\r\n      <Nav>\r\n        <HomeNavChild state={state} />\r\n      </Nav>\r\n      {state.question &&\r\n        <Question />\r\n      }\r\n      <Container />\r\n    </>\r\n  )\r\n}\r\n\r\nfunction HomeNavChild({ state }) {\r\n  let postQuestion = useCallback(() => {\r\n    if (state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n      return\r\n    }\r\n    homeStore.dispatch({\r\n      type: 'question',\r\n      question: true,\r\n    })\r\n  }, [state])\r\n  return (\r\n    <div className=\"top-nav home-slider-nav\">\r\n      <Link to=\"/\" className=\"home-logo\">\r\n        <img src=\"/images/icon2.jpg\" alt=\"zhi 呼\" />\r\n      </Link>\r\n      <ul className=\"home-list\">\r\n        <li><Link to=\"/\">推荐</Link></li>\r\n        <li><Link to=\"/\">关注</Link></li>\r\n        <li><Link to=\"/\">热榜</Link></li>\r\n      </ul>\r\n      <div className=\"search-div\">\r\n        <label className=\"search-label\">\r\n          <input type=\"search\" name=\"search\" className=\"search\" placeholder=\"功能尚未完善\" />\r\n          <SearchOutlined style={{ fontSize: '20px', color: '#9AA3B5' }} />\r\n        </label>\r\n        <input type=\"button\" className=\"question\" value=\"发帖\" onClick={postQuestion} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n// import { Form, Input, Button, Checkbox, Space, message } from 'antd'\r\n// import { UserOutlined, LockOutlined } from '@ant-design/icons';\r\n// import { Redirect } from 'react-router-dom'\r\nimport { signStore } from '../redux/redux.js'\r\nimport './signin-component.css'\r\nimport Footer from './footer'\r\nimport Sign from './sign'\r\nimport { Link } from \"react-router-dom\"\r\n\r\nexport default function Login() {\r\n  let [state, setState] = useState(signStore.getState())\r\n\r\n  useEffect(() => {\r\n    let uns = signStore.subscribe(() => setState(signStore.getState()))\r\n    return () => uns()\r\n  })\r\n  return (\r\n    <div className=\"main\">\r\n      <img src=\"../images/login-top2.png\" alt=\"logo\" className=\"logo\" />\r\n      {state.sucessSignup &&\r\n        <Success props={state} />\r\n      }\r\n      <Sign state={state} />\r\n      <Footer />\r\n    </div>\r\n  )\r\n}\r\nfunction Success(props) {\r\n\r\n  return (\r\n    <div className=\"success-bg\">\r\n      <div className={'suc-transition success'}>\r\n        <img src=\"./images/loading.gif\" alt=\"注册成功\" />\r\n        <label className=\"label-visi\">\r\n          <span>注册成功！ </span> 点击 <Link to=\"/sign\">返回登陆界面</Link>\r\n        </label>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react'\r\nimport Signin from '../components/signin-component.js'\r\nimport './signin.css'\r\nexport default () => {\r\n  return (\r\n    <div className=\"login-container\">\r\n      <Signin />\r\n    </div>\r\n  )\r\n}\r\n","import React, { useCallback, useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport { UserInfo, FooterBar, Recommend, UserSign } from './toolbar'\r\n// import { HeartOutlined, CommentOutlined } from '@ant-design/icons';\r\nimport { pageStore, navStore, userStore } from '../redux/redux';\r\nimport PostsFooter from './postfooter'\r\nimport moment from 'moment';\r\nimport { Over, Attachment } from './invitation'\r\nimport axios from 'axios'\r\nimport CareMessage from './care-message'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Link } from \"react-router-dom\"\r\n\r\nexport default function () {\r\n  let [data, Update] = useState(pageStore.getState())\r\n  useEffect(() => {\r\n    let uns = pageStore.subscribe(() => Update(pageStore.getState()))\r\n    return () => uns()\r\n  })\r\n  return (\r\n    <div className=\"body-container post-container\">\r\n      <Comment data={data} />\r\n      <ToolBar data={data} />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction Comment(props) {\r\n  let commenterInfo = props.data.commenterInfo || []\r\n  let commentNoamal = commenterInfo.filter(it => it.status !== 'delete')\r\n  return (\r\n    <div className=\"invitation\">\r\n      {props.data.writeAnswer ? <AnswerDiv /> : ''}\r\n      <div className=\"comment-main\">\r\n        <ul className=\"comments-list\">\r\n          {commentNoamal.length !== 0\r\n            ? <CommentList commenterInfo={commenterInfo} />\r\n            : <li style={{ color: '#8590A6' }}>\r\n              当前帖子还没有回答，赶紧去添加回答吧！\r\n              </li>\r\n          }\r\n        </ul>\r\n      </div>\r\n      <Over />\r\n    </div>\r\n  )\r\n}\r\n//发评论\r\nfunction AnswerDiv() {\r\n  let { id } = useParams()\r\n  let submitAnswer = useCallback(() => {\r\n    let postAnswer = {\r\n      content: document.querySelector('.editing').value,\r\n      createdAt: Date.now(),\r\n    }\r\n    getNewCommenter()\r\n    async function getNewCommenter() {\r\n      await axios.post(`/api/post-page/${id}`, postAnswer)\r\n        .then(res => {\r\n          pageStore.dispatch({\r\n            type: 'postAnswer',\r\n            commenterInfo: res.data,\r\n          })\r\n        })\r\n        .catch(rej => {\r\n          if (rej.response.status === 401) {\r\n            navStore.dispatch({\r\n              type: 'toSign',\r\n              sign: false,\r\n            })\r\n          }\r\n        })\r\n\r\n    }\r\n  }, [id])\r\n  return (\r\n    <div className=\"answer-outer\">\r\n      <textarea className=\"editing\" placeholder=\"写回答...\"></textarea>\r\n      <div className=\"submit-answer\" >\r\n        <span onClick={submitAnswer}>提交回答</span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CommentList() {\r\n  let [data, Update] = useState(pageStore.getState())\r\n  useEffect(() => {\r\n    let uns = pageStore.subscribe(() => Update(pageStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n  // debugger\r\n\r\n  let commenterInfo = data.commenterInfo\r\n  let commentIdx = -1\r\n  return (\r\n    commenterInfo.map((item) => {\r\n      if (item.status !== 'delete') {\r\n        commentIdx++\r\n        return <CommentItem item={item} data={data} idx={commentIdx} key={item.createdAt} />\r\n      }\r\n      return ''\r\n    })\r\n  )\r\n}\r\n\r\nfunction CommentItem(props) {\r\n  let item = props.item\r\n  let data = props.data\r\n  let idx = props.idx\r\n  let time = item.createdAt * 1\r\n  let TIME = moment(time).endOf().fromNow(true) + '前'\r\n\r\n\r\n  return (\r\n    <li key={item.createdAt}>\r\n      <div className=\"commenter-info\" >\r\n        <Link to={`/user/${item.userId}`}><i className=\"commenter-avatar\" style={{ backgroundImage: `url(${item.avatar})` }}></i></Link>\r\n        <div className=\"commenter-flag\">\r\n          <Link className=\"commenter-name\" to={`/user/${item.userId}`}>{item.name}</Link>\r\n          <span className=\"commenter-sign\">{item.sign}</span>\r\n          <Attachment state={data} post={item} type='comment' />\r\n        </div>\r\n      </div>\r\n      <div className=\"content-div\" name=\"content\">\r\n        <p><span>{item.content}</span></p>\r\n        <span className=\"answerAt\">\r\n          发布于 &nbsp;\r\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\r\n            moment(item.createdAt * 1).format(\"YYYY-MM-DD HH:mm:ss\")\r\n            : TIME\r\n          }\r\n        </span>\r\n        <div className=\"commenter-footer\">\r\n          <PostsFooter comment={item} idx={idx} state={data} />\r\n        </div>\r\n      </div>\r\n\r\n    </li>\r\n  )\r\n}\r\n\r\nfunction ToolBar(props) {\r\n  let data = props.data || {}\r\n  let poster = data.poster || {}\r\n  return (\r\n    <div className=\"toolbar\">\r\n      <div className=\"toolbar-user-data\">\r\n        <h4 style={{ color: 'rgb(118,131,155)' }}>关于提问者</h4>\r\n        {poster.name === data.cookieUser\r\n          ? <>\r\n            <UserInfo cookieUser={data.cookieUser} user={data.poster} />\r\n            <UserSign data={data} />\r\n          </>\r\n          : <PosterInfo poster={poster} />\r\n        }\r\n      </div>\r\n      <Recommend />\r\n      <FooterBar />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Info(props) {\r\n\r\n  let poster = props.poster\r\n  let toUserPage = useCallback((one, sen) => {\r\n    props.history.push(`/user/${poster.userId}`)\r\n    userStore.dispatch({\r\n      type: 'activeSwitch',\r\n      active: one,\r\n    })\r\n    if (sen !== undefined) {\r\n      userStore.dispatch({\r\n        type: 'collectActive',\r\n        active: sen,\r\n      })\r\n    }\r\n  }, [poster, props.history])\r\n  return (\r\n    <div className=\"posterInfo\">\r\n      <div className=\"posterInfo-user\">\r\n        <Link to={`/user/${poster.userId}`}>\r\n          <i className=\"post-avatar\" style={{ backgroundImage: `url(${poster.avatar})` }}></i>\r\n        </Link>\r\n        <div className=\"poster-userInfo\">\r\n          <Link to={`/user/${poster.userId}`}><h3>{poster.name}</h3></Link>\r\n          <span>{poster.sign}</span>\r\n        </div>\r\n      </div>\r\n      <div >\r\n        <ul className=\"posterInfo-other\">\r\n          <li onClick={() => toUserPage(1)}><span>回答</span><br />{poster.commentCount}</li>\r\n          <li onClick={() => toUserPage(2)}><span>提问</span><br />{poster.postCount}</li>\r\n          <li onClick={() => toUserPage(4, 2)}><span>关注者</span><br />{poster.fans}</li>\r\n        </ul>\r\n        <CareMessage careInfo={poster} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nconst PosterInfo = withRouter(Info)\r\n\r\n// function PoseteSections(props) {\r\n//   return (\r\n//     <></>\r\n//   )\r\n// }\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { Link } from \"react-router-dom\"\r\nimport { Button } from 'antd'\r\nimport './user-page.css'\r\nimport { careStore, pageStore } from '../redux/redux'\r\nimport { useParams } from 'react-router-dom'\r\n\r\nexport default function ({ userId }) {\r\n  let { id } = useParams()\r\n  let [cares, setCare] = useState([])\r\n  useEffect(() => {\r\n    let uns = careStore.subscribe(() => setCare(careStore.getState().myCares))\r\n    return () => uns()\r\n  }, [])\r\n  let outerRef = useRef()\r\n  useEffect(() => {\r\n    //获取关注列表\r\n    axios.get(`/api/get-care/${userId}`)\r\n      .then(res => {\r\n        careStore.dispatch({\r\n          type: 'getCare',\r\n          myCares: res.data.myCares,\r\n        })\r\n      })\r\n    //获取邀请状态\r\n    axios.get(`/api/invite/${id}`)\r\n      .then(res => {\r\n        pageStore.dispatch({\r\n          type: 'getInitial',\r\n          inviteList: res.data.inviteList,\r\n        })\r\n      })\r\n\r\n  }, [id, userId])\r\n  useEffect(() => {\r\n    let foo = document.querySelector('.invite-outer')\r\n    foo.onmousewheel = (e) => {\r\n      e.preventDefault()\r\n    }\r\n\r\n    return () => foo.onmousewheel = null\r\n  }, [])\r\n  let inviteEnd = useCallback(() => {\r\n    pageStore.dispatch({\r\n      type: 'invite',\r\n      invite: false,\r\n    })\r\n  }, [])\r\n  useEffect(() => {\r\n    function clearInvite(e) {\r\n      e.stopPropagation()\r\n      if (e.target === outerRef.current || e.target === document.body) {\r\n        inviteEnd()\r\n      }\r\n    }\r\n    window.addEventListener('click', clearInvite)\r\n    return () => window.removeEventListener('click', clearInvite)\r\n  }, [inviteEnd])\r\n  return (\r\n    <div className=\"invite-outer\" ref={outerRef}>\r\n      <div className=\"invite-main\">\r\n        <div className=\"invite-header\"><h2>选择想要邀请的用户<span> * 只能邀请关注用户，请多多充实关注列表吧！</span></h2>\r\n          <Button type=\"primary\" size=\"middle\" onClick={inviteEnd}>完成</Button></div>\r\n        <ul className=\"invite-list\">\r\n          {cares.length === 0 && <li className=\"no-invite\"><span >还没有关注过用户，邀请列表太冷清啦！</span></li>}\r\n          {cares.map(invite => {\r\n            return <li key={invite.createdAt}><InviteItem invite={invite} /></li>\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction InviteItem({ invite }) {\r\n  let { id } = useParams()\r\n  let [complete, setComplete] = useState(false)\r\n  let [clear, setClear] = useState(false)\r\n  useEffect(() => {\r\n    function updateInvite() {\r\n      let inviteList = pageStore.getState().inviteList || []\r\n      let temp = inviteList.some(it => it.targetId === invite.careId)\r\n      setComplete(temp)\r\n    }\r\n    updateInvite()\r\n    let uns = pageStore.subscribe(() => updateInvite())\r\n    return () => uns()\r\n  }, [invite])\r\n\r\n  let toInvite = useCallback((type) => {\r\n    axios.post('/api/invite', {\r\n      type: type,\r\n      postId: id,\r\n      targetId: invite.careId,\r\n      targetName: invite.careName,\r\n    }).then(res => {\r\n      pageStore.dispatch({\r\n        type: 'upDateInvite',\r\n        inviteList: res.data.newInvites\r\n      })\r\n    })\r\n  }, [id, invite])\r\n  return (\r\n    <div className=\"invite-item\">\r\n      <Link to={`/user/${invite.careId}`}><i style={{ backgroundImage: `url(${invite.avatar})` }} className=\"invite-avatar\"></i></Link>\r\n      <div className=\"invite-userInfo\">\r\n        <Link to={`/user/${invite.careId}`}><h4>{invite.careName}<span>  -  {invite.industry}</span></h4></Link>\r\n        <span>{invite.sign}</span>\r\n      </div>\r\n      {complete\r\n        ? <Button type=\"ghost\" onClick={() => toInvite('revoke')} style={{ width: '100px', color: 'rgb(138 138 138)' }} onMouseEnter={() => setClear(true)} onMouseLeave={() => setClear(false)}>{clear ? '取消邀请' : '已邀请'}</Button>\r\n        : <Button type=\"ghost\" style={{ width: '100px', borderColor: '#40a9ff', color: '#40a9ff' }} onClick={() => toInvite('active')}>邀请回答</Button>\r\n      }\r\n\r\n    </div>\r\n  )\r\n}\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { useParams } from 'react-router-dom'\r\nimport './post.css'\r\nimport PostContainer from './post-container'\r\nimport { FormOutlined, MessageFilled, FireFilled, UserAddOutlined } from '@ant-design/icons';\r\nimport { pageStore, navStore } from '../redux/redux'\r\n// var POST_DATA\r\nimport Nav from '../components/header-nav'\r\nimport moment from 'moment';\r\nimport Invite from './invite'\r\n\r\n\r\nexport default function () {\r\n  let { id = 1 } = useParams()\r\n  let [data, Update] = useState(pageStore.getState())\r\n  let [invite, setInvite] = useState(false)\r\n  useEffect(() => {\r\n    let uns = pageStore.subscribe(() => setInvite(pageStore.getState().invite))\r\n    return () => uns()\r\n  }, [])\r\n  useEffect(() => {\r\n    const getInitial = async () => {\r\n      const result = await axios.get(`/api/post-page/${id}`)\r\n      pageStore.dispatch({\r\n        type: 'getInitial',\r\n        ...result.data,\r\n      })\r\n    }\r\n    getInitial()\r\n    let uns = pageStore.subscribe(() => Update(pageStore.getState()))\r\n\r\n    return () => uns()\r\n  }, [id])\r\n\r\n  return (\r\n    <>\r\n      <Nav page={\"post\"}>\r\n        <PostNavChild data={data} />\r\n      </Nav>\r\n      <PostInfo>\r\n        <PostTitle data={data} />\r\n        <Poster data={data} />\r\n      </PostInfo>\r\n      <PostContainer data={data} />\r\n      {invite && <Invite id={id} />}\r\n    </>\r\n  )\r\n}\r\nfunction PostNavChild({ data }) {\r\n  let post = data.post || {}\r\n  let writeAnswer = useCallback(() => {\r\n    pageStore.dispatch({\r\n      type: 'writeAnswer',\r\n      writeAnswer: !data.writeAnswer,\r\n    })\r\n    document.documentElement.scrollTop = 0\r\n    let sliderNav = document.querySelector('.nav-slider-outer')\r\n    sliderNav.style.top = '0px'\r\n  }, [data])\r\n\r\n  return (\r\n    <div className=\"post-nav-slider\">\r\n      <h1 title={post.title}>{post.title}</h1>\r\n      <div className=\"post-footer-list\">\r\n        <Attention data={data} />\r\n        <div className=\"answer\" onClick={writeAnswer}><FormOutlined />写回答</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction PostInfo(props) {\r\n  return <div className=\"post-info post-top\">{props.children}</div>\r\n}\r\n\r\nfunction PostTitle(props) {\r\n  // debugger\r\n  let data = props.data\r\n  let commenterInfo = data.commenterInfo || []\r\n  let post = props.data.post || {}\r\n  let [hide, upHide] = useState(false)\r\n  let [fold, setFlod] = useState(true)\r\n\r\n  let answerCount = commenterInfo.filter(it => it.status !== 'delete')\r\n\r\n  let writeAnswer = useCallback(() => {\r\n    pageStore.dispatch({\r\n      type: 'writeAnswer',\r\n      writeAnswer: !data.writeAnswer,\r\n    })\r\n  }, [data])\r\n\r\n  useEffect(() => {\r\n    let span = document.querySelector('.post-content span')\r\n    let p = document.querySelector('.post-content')\r\n    if (span.offsetHeight > 72) {\r\n      p.style.height = '72px'\r\n      upHide(true)\r\n    }\r\n  }, [data])\r\n  let foldCutover = useCallback(() => {\r\n    let p = document.querySelector('.post-content')\r\n    let span = document.querySelector('.post-content span')\r\n    if (fold) {\r\n      p.style.display = 'block'\r\n      p.style.height = span.offsetHeight + 3 + 'px'\r\n      setFlod(false)\r\n    } else {\r\n      p.style.display = '-webkit-box'\r\n      p.style.height = '72px'\r\n      setFlod(true)\r\n    }\r\n  }, [fold])\r\n  let toInvite = useCallback(() => {\r\n    if (data.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n      return\r\n    }\r\n    pageStore.dispatch({\r\n      type: 'invite',\r\n      invite: true,\r\n    })\r\n  }, [data])\r\n  return (\r\n    <div className=\"post-main\">\r\n      <h1>{post.title}</h1>\r\n      <p className=\"post-content\"><span>{post.content}</span></p>\r\n      <div className=\"post-footer-list\">\r\n        <Attention data={data} />\r\n        <div className=\"answer\" onClick={writeAnswer}><FormOutlined />写回答</div>\r\n        <div className=\"admire-qus\" onClick={toInvite}><UserAddOutlined />邀请回答</div>\r\n        <ul className=\"other-info\">\r\n          <li className=\"comments-count\">\r\n            <MessageFilled />\r\n            <span>{answerCount.length}&nbsp;条回答</span>\r\n          </li>\r\n          <li className=\"pageview\"><FireFilled /><span>{post.pageview}&nbsp;浏览量</span></li>\r\n          {/* <li className=\"unfold\"><span>...</span></li> */}\r\n          {hide &&\r\n            <li className=\"hide\" onClick={foldCutover}><span>{fold ? '展开' : '收起'}</span></li>\r\n          }\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction Attention({ data }) {\r\n  let { id } = useParams()\r\n  let [attention, upVoke] = useState(pageStore.getState().attention)\r\n  let attenRef = useRef()\r\n  //attention\r\n  let toAttention = useCallback(() => {\r\n    if (data.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n    } else {\r\n      pageStore.dispatch({\r\n        type: 'toAttention',\r\n        attention: !attention,\r\n        pageId: id,\r\n      })\r\n    }\r\n  }, [attention, id, data])\r\n\r\n  useEffect(() => {\r\n    let uns = pageStore.subscribe(() => upVoke(pageStore.getState().attention))\r\n\r\n    if (attention) {\r\n      attenRef.current.onmouseenter = () => {\r\n        attenRef.current.innerText = '取消关注'\r\n      }\r\n      attenRef.current.onmouseleave = () => {\r\n        attenRef.current.innerText = '已关注'\r\n      }\r\n    }\r\n    function clearMousevent() {\r\n      attenRef.current.onmouseenter = null;\r\n      attenRef.current.onmouseleave = null\r\n    }\r\n\r\n    return () => { uns(); clearMousevent() }\r\n  }, [attention, id])\r\n\r\n  return (\r\n    <div className={attention ? \"revoke\" : \"guanzhu\"} onClick={toAttention} ref={attenRef} >{attention ? \"已关注\" : \"关注问题\"}</div>\r\n  )\r\n}\r\n\r\nfunction Poster(props) {\r\n  let data = props.data\r\n  let commenterInfo = data.commenterInfo || []\r\n  let answerCount = commenterInfo.filter(it => it.status !== 'delete')\r\n  let time = data.post && data.post.createdAt * 1\r\n  let TIME = moment(time).endOf().fromNow(true) + '前'\r\n\r\n  return (\r\n    <div className=\"post-other\">\r\n      <ul>\r\n        <li className=\"post-other-line\"><span>关注数</span><br />{data.attentionLength}</li>\r\n        <li><span>回答数</span><br />{answerCount.length}</li>\r\n      </ul>\r\n      <div className=\"post-other-time\"><span>发帖时间：</span>\r\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\r\n          moment(time).format(\"YYYY-MM-DD HH:mm:ss\")\r\n          : TIME\r\n        }</div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState, useCallback } from 'react'\r\n// import Nav from '../components/header-nav'\r\nimport Question from '../components/question'\r\nimport Post from '../components/post-page'\r\nimport { homeStore } from '../redux/redux'\r\n\r\n\r\nexport default function () {\r\n  let [state, setState] = useState(homeStore.getState())\r\n\r\n  useEffect(() => {\r\n    let uns = homeStore.subscribe(() => setState(homeStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      {state.question &&\r\n        <Question />\r\n      }\r\n      <Post />\r\n    </>\r\n  )\r\n}\r\n\r\n","import React, { useEffect, useState, useCallback } from 'react'\r\nimport { Input, Radio, Button, DatePicker } from 'antd'\r\nimport { EditFilled } from '@ant-design/icons';\r\n// import { Redirect } from 'react-router-dom'\r\nimport { userStore } from '../redux/redux.js'\r\nimport './signin-component.css'\r\nimport 'antd/dist/antd.css'\r\nimport axios from 'axios'\r\n// import locale from 'antd/es/locale/zh_CN';\r\n// import Footer from './footer'\r\n// import Sign from './sign'\r\n\r\nexport default function () {\r\n  let [state, setState] = useState(userStore.getState())\r\n  let { userInfo = {} } = state\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n  let editEnd = useCallback(() => {\r\n    userStore.dispatch({\r\n      type: 'editEnd',\r\n      edit: false,\r\n    })\r\n  }, [])\r\n  return (\r\n    <div className=\"edit-container-bg\">\r\n      <div className=\"edit-outer\">\r\n        <form action=\"/api/edit-userInfo\" method=\"post\" className=\"edit-form\">\r\n          <ul>\r\n            <li><h2>王司徒</h2><span style={{ fontWeight: '100' }}>* 鼠标移到用户头像即可修改头像</span><Button onClick={editEnd} type=\"primary\">修改完成</Button></li>\r\n            <Sex sex={userInfo.sex} />\r\n            <Birthday birthday={userInfo.birthday} />\r\n            <Address address={userInfo.address} />\r\n            <Sign sign={userInfo.sign} />\r\n            <Industry industry={userInfo.industry} />\r\n            <Introduction introduction={userInfo.introduction} />\r\n            <Sociality sociality={userInfo.sociality} />\r\n          </ul>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Sex(props) {\r\n  let [state, setState] = useState(false)\r\n  let [sex, setSex] = useState(props.sex)\r\n  let editSex = useCallback(() => {\r\n    setState(!state)\r\n  }, [state])\r\n\r\n  let saveEdit = useCallback(() => {\r\n    axios.post('/api/edit-userInfo', {\r\n      type: 'sex',\r\n      sex,\r\n    }).then(res => {\r\n      userStore.dispatch({\r\n        type: 'editUserInfo',\r\n        sex,\r\n      })\r\n      setState(false)\r\n    })\r\n  }, [sex])\r\n  return (\r\n    <li className=\"edit-sex\">\r\n      <span>性别</span>\r\n      {state\r\n        ? <div>\r\n          <Radio.Group value={sex} onChange={() => sex === 'man' ? setSex('female') : setSex('man')}>\r\n            <Radio value={'man'} checked={props.sex === 'man'}>男</Radio>\r\n            <Radio value={'female'} checked={props.sex === 'female'}>女</Radio>\r\n          </Radio.Group>\r\n          <div className=\"saveEdit\">\r\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\r\n            <Button size=\"small\" onClick={() => setState(false)}>取消</Button>\r\n          </div>\r\n        </div>\r\n\r\n        : <div className=\"saveEdit\"><span>{sex === 'man' ? '男' : '女'}</span><EditFilled onClick={editSex} style={{ color: '#40a9ff' }} /></div>\r\n      }\r\n    </li>\r\n  )\r\n}\r\n\r\nfunction Sign(props) {\r\n  let [state, setState] = useState(false)\r\n  let [sign, setSign] = useState(props.sign)\r\n  let [limit, setLimit] = useState(false)\r\n  let editSign = useCallback(() => {\r\n    setState(!state)\r\n  }, [state])\r\n\r\n  let saveEdit = useCallback(() => {\r\n    axios.post('/api/edit-userInfo', {\r\n      type: 'sign',\r\n      sign,\r\n    }).then(res => {\r\n      userStore.dispatch({\r\n        type: 'editUserInfo',\r\n        sign,\r\n      })\r\n      setState(false)\r\n    })\r\n  }, [sign])\r\n\r\n  let editSignInput = useCallback((e) => {\r\n    if (e.target.value.length > 30) {\r\n      setLimit(true)\r\n      return\r\n    } else {\r\n      setLimit(false)\r\n      setSign(e.target.value)\r\n    }\r\n  }, [])\r\n  return (\r\n    <li className=\"edit-sign\">\r\n      <span>一句话介绍</span>\r\n      {state\r\n        ? <div>\r\n          <Input value={sign} onInput={editSignInput} style={limit ? { borderColor: 'red' } : {}} />\r\n          <div className=\"saveEdit\">\r\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\r\n            <Button size=\"small\" onClick={() => { setState(false); setSign(props.sign) }}>取消</Button>\r\n          </div>\r\n        </div>\r\n\r\n        : <div className=\"saveEdit\"><span>{sign}</span><EditFilled onClick={editSign} style={{ color: '#40a9ff' }} /></div>\r\n      }\r\n    </li >\r\n  )\r\n}\r\n\r\nfunction Address(props) {\r\n  let [state, setState] = useState(false)\r\n  let [address, setAddress] = useState(props.address)\r\n  let [limit, setLimit] = useState(false)\r\n  let editaddress = useCallback(() => {\r\n    setState(!state)\r\n  }, [state])\r\n\r\n  let saveEdit = useCallback(() => {\r\n    axios.post('/api/edit-userInfo', {\r\n      type: 'address',\r\n      address,\r\n    }).then(res => {\r\n      userStore.dispatch({\r\n        type: 'editUserInfo',\r\n        address,\r\n      })\r\n      setState(false)\r\n    })\r\n  }, [address])\r\n\r\n  let editAddressIput = useCallback((e) => {\r\n    if (e.target.value.length > 10) {\r\n      setLimit(true)\r\n      return\r\n    } else {\r\n      setLimit(false)\r\n      setAddress(e.target.value)\r\n    }\r\n  }, [])\r\n  return (\r\n    <li className=\"edit-address\">\r\n      <span>现居地</span>\r\n      {state\r\n        ? <div>\r\n          <Input value={address} onInput={editAddressIput} style={limit ? { borderColor: 'red' } : {}} />\r\n          <div className=\"saveEdit\">\r\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\r\n            <Button size=\"small\" onClick={() => { setState(false); setAddress(props.address) }}>取消</Button>\r\n          </div>\r\n        </div>\r\n\r\n        : <div className=\"saveEdit\"><span>{props.address}</span><EditFilled onClick={editaddress} style={{ color: '#40a9ff' }} /></div>\r\n      }\r\n    </li >\r\n  )\r\n}\r\n\r\nfunction Birthday(props) {\r\n  let [state, setState] = useState(false)\r\n  let [birthday, setBirthday] = useState(props.birthday)\r\n  let editState = useCallback(() => {\r\n    setState(!state)\r\n  }, [state])\r\n\r\n  let saveEdit = useCallback(() => {\r\n    axios.post('/api/edit-userInfo', {\r\n      type: 'birthday',\r\n      birthday,\r\n    }).then(res => {\r\n      userStore.dispatch({\r\n        type: 'editUserInfo',\r\n        birthday,\r\n      })\r\n      setState(false)\r\n    })\r\n  }, [birthday])\r\n\r\n  let editBirthday = useCallback((e) => {\r\n    let date = document.querySelector('.edit-birthday input')\r\n    setBirthday(date.value)\r\n  }, [])\r\n  return (\r\n    <li className=\"edit-birthday\">\r\n      <span>生日</span>\r\n      {state\r\n        ? <div>\r\n          <DatePicker onChange={editBirthday} />\r\n          <div className=\"saveEdit\">\r\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\r\n            <Button size=\"small\" onClick={() => { setState(false); setBirthday(props.birthday) }}>取消</Button>\r\n          </div>\r\n        </div>\r\n\r\n        : <div className=\"saveEdit\"><span>{birthday.slice(5)}</span><EditFilled onClick={editState} style={{ color: '#40a9ff' }} /></div>\r\n      }\r\n    </li >\r\n  )\r\n}\r\n\r\nfunction Industry(props) {\r\n  let [state, setState] = useState(false)\r\n  let [industry, setIndustry] = useState(props.industry)\r\n  let [limit, setLimit] = useState(false)\r\n  let editIndustry = useCallback(() => {\r\n    setState(!state)\r\n  }, [state])\r\n\r\n  let saveEdit = useCallback(() => {\r\n    axios.post('/api/edit-userInfo', {\r\n      type: 'industry',\r\n      industry,\r\n    }).then(res => {\r\n      userStore.dispatch({\r\n        type: 'editUserInfo',\r\n        industry,\r\n      })\r\n      setState(false)\r\n    })\r\n  }, [industry])\r\n\r\n  let editIndustryIput = useCallback((e) => {\r\n    if (e.target.value.length > 10) {\r\n      setLimit(true)\r\n      return\r\n    } else {\r\n      setLimit(false)\r\n      setIndustry(e.target.value)\r\n    }\r\n  }, [])\r\n  return (\r\n    <li className=\"edit-industry\">\r\n      <span>所在行业</span>\r\n      {state\r\n        ? <div>\r\n          <Input value={industry} onInput={editIndustryIput} style={limit ? { borderColor: 'red' } : {}} />\r\n          <div className=\"saveEdit\">\r\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\r\n            <Button size=\"small\" onClick={() => { setState(false); setIndustry(props.industry) }}>取消</Button>\r\n          </div>\r\n        </div>\r\n\r\n        : <div className=\"saveEdit\"><span>{props.industry}</span><EditFilled onClick={editIndustry} style={{ color: '#40a9ff' }} /></div>\r\n      }\r\n    </li >\r\n  )\r\n}\r\n\r\n\r\nconst { TextArea } = Input;\r\nfunction Introduction(props) {\r\n  let [state, setState] = useState(false)\r\n  let [summary, setSummary] = useState(props.introduction)\r\n  let [limit, setLimit] = useState(false)\r\n  let editSummary = useCallback(() => {\r\n    setState(!state)\r\n  }, [state])\r\n\r\n  let saveEdit = useCallback(() => {\r\n    axios.post('/api/edit-userInfo', {\r\n      type: 'introduction',\r\n      introduction: summary,\r\n    }).then(res => {\r\n      userStore.dispatch({\r\n        type: 'editUserInfo',\r\n        introduction: summary,\r\n      })\r\n      setState(false)\r\n    })\r\n  }, [summary])\r\n\r\n  let editIntroduction = useCallback((e) => {\r\n    if (e.target.value.length > 150) {\r\n      setLimit(true)\r\n      return\r\n    } else {\r\n      setLimit(false)\r\n      setSummary(e.target.value)\r\n    }\r\n  }, [])\r\n  return (\r\n    <li className=\"edit-introduction\">\r\n      <span>个人简介</span>\r\n      {state\r\n        ? <div>\r\n          <TextArea value={summary} onInput={editIntroduction} style={limit ? { borderColor: 'red' } : {}} />\r\n          <div className=\"saveEdit\">\r\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\r\n            <Button size=\"small\" onClick={() => { setState(false); setSummary(props.introduction) }}>取消</Button>\r\n          </div>\r\n        </div>\r\n\r\n        : <div className=\"saveEdit\"><span>{summary}</span><EditFilled onClick={editSummary} style={{ color: '#40a9ff' }} /></div>\r\n      }\r\n    </li >\r\n  )\r\n}\r\n\r\nfunction Sociality(props) {\r\n  let [state, setState] = useState(false)\r\n  let [sociality, setSociality] = useState(props.sociality)\r\n  let [limit, setLimit] = useState(false)\r\n  let editSociality = useCallback(() => {\r\n    setState(!state)\r\n  }, [state])\r\n\r\n  let saveEdit = useCallback(() => {\r\n    axios.post('/api/edit-userInfo', {\r\n      type: 'sociality',\r\n      sociality,\r\n    }).then(res => {\r\n      userStore.dispatch({\r\n        type: 'editUserInfo',\r\n        sociality,\r\n      })\r\n      setState(false)\r\n    })\r\n  }, [sociality])\r\n\r\n  let editSocialityIput = useCallback((e) => {\r\n    if (e.target.value.length > 50) {\r\n      setLimit(true)\r\n      return\r\n    } else {\r\n      setLimit(false)\r\n      setSociality(e.target.value)\r\n    }\r\n  }, [])\r\n  return (\r\n    <li className=\"edit-industry\">\r\n      <span>社交地址</span>\r\n      {state\r\n        ? <div>\r\n          <Input value={sociality} onInput={editSocialityIput} style={limit ? { borderColor: 'red' } : {}} />\r\n          <div className=\"saveEdit\">\r\n            <Button size=\"small\" type=\"primary\" onClick={saveEdit}>保存</Button>\r\n            <Button size=\"small\" onClick={() => { setState(false); setSociality(props.sociality) }}>取消</Button>\r\n          </div>\r\n        </div>\r\n\r\n        : <div className=\"saveEdit\"><span>{sociality}</span><EditFilled onClick={editSociality} style={{ color: '#40a9ff' }} /></div>\r\n      }\r\n    </li >\r\n  )\r\n}\r\n","import React, { useCallback, useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { ManOutlined, DownOutlined, UpOutlined, MailOutlined, WomanOutlined, CameraOutlined } from '@ant-design/icons'\r\nimport './user-page.css'\r\nimport { userStore, homeStore } from '../redux/redux'\r\nimport EditUser from './edit-userInfo'\r\nimport CareMessage from './care-message'\r\n\r\nexport default function () {\r\n\r\n  return (\r\n    <div className=\"user-page \">\r\n      <div className=\"user-header-bg\">\r\n        <UserHeader />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction UserHeader() {\r\n  let [state, setState] = useState({})\r\n  let userInfo = state.userInfo || {}\r\n\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n  let [avatar, avatarChange] = useState(userInfo.avatar)\r\n  //切换头像\r\n  let [hoverAvatar, setHover] = useState(false)\r\n  let avatarCutover = useCallback((e) => {\r\n    let data = new FormData()\r\n    data.append('avatar', e.target.files[0])\r\n    axios.post('/api/user-avatar/', data, {\r\n      headers: { \"Content-Type\": \"multipart/form-data\" }\r\n    }).then(res => {\r\n      avatarChange(res.data)\r\n    })\r\n  }, [])\r\n  let inputAvatar = useCallback(() => {\r\n    document.querySelector('[name=\"avatar\"]').click()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    avatarChange(userInfo.avatar)\r\n  }, [userInfo])\r\n  useEffect(() => {\r\n    function switchAvatar() {\r\n      homeStore.dispatch({\r\n        type: 'hoverAvatar',\r\n        hover: true,\r\n      })\r\n    }\r\n    function clearAvatarEvent() {\r\n      homeStore.dispatch({\r\n        type: 'hoverAvatar',\r\n        hover: false,\r\n      })\r\n    }\r\n    let userAvatarDiv = document.querySelector('.User-avatar')\r\n    userAvatarDiv.addEventListener('mouseenter', switchAvatar)\r\n    userAvatarDiv.addEventListener('mouseleave', clearAvatarEvent)\r\n    let uns = homeStore.subscribe(() => setHover(homeStore.getState().hover))\r\n    return () => {\r\n      uns()\r\n      userAvatarDiv.removeEventListener('mouseenter', switchAvatar)\r\n      userAvatarDiv.removeEventListener('mouseleave', clearAvatarEvent)\r\n    }\r\n  }, [userInfo])\r\n\r\n\r\n  let [flod, setFlod] = useState(false)\r\n  let flodClick = useCallback(() => {\r\n    setFlod(!flod)\r\n  }, [flod])\r\n\r\n  let editState = useCallback(() => {\r\n    userStore.dispatch({\r\n      type: 'editState',\r\n      edit: true\r\n    })\r\n  }, [])\r\n\r\n  // debugger\r\n  return (\r\n    <>\r\n      <div className=\"user-header\">\r\n        <div className=\"UserCover-bg\"></div>\r\n        <div className=\"User-avatar\" style={{ backgroundImage: `url(${avatar})` }} >\r\n          <input type=\"file\" name=\"avatar\" style={{ display: 'none' }} onChange={avatarCutover} />\r\n          {hoverAvatar && userInfo.name === state.cookieUser &&\r\n            <div className=\"avatarMouseEnter\" onClick={inputAvatar}>\r\n              <CameraOutlined style={{ fontSize: '18px' }} /><span>更换头像</span>\r\n            </div>\r\n          }\r\n        </div>\r\n        <div className={flod ? 'UserDetailed UserDetailed-flod' : 'UserDetailed'}>\r\n          <div className=\"User-data\">\r\n            <h2>{userInfo.name}</h2>\r\n            <span className=\"sign\">{userInfo.sign}</span>\r\n            <UserDataList flod={flod} />\r\n            <UserBaseData flod={flod} />\r\n          </div>\r\n          <div className=\"User-data-bottom\">\r\n            {flod\r\n              ? <span onClick={flodClick}><UpOutlined />  收起详细资料</span>\r\n              : <span onClick={flodClick}><DownOutlined />  查看详细资料</span>\r\n            }\r\n            {state.cookieUser === userInfo.name\r\n              ? <div className=\"user-editing\" onClick={editState}>编辑个人资料</div>\r\n              : <div className=\"other-user\"><CareMessage careInfo={state.userInfo} /></div>\r\n            }\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {state.edit && <EditUser />}\r\n\r\n    </>\r\n  )\r\n}\r\n\r\nfunction UserBaseData(props) {\r\n  let flod = props.flod\r\n  let [state, setState] = useState({})\r\n  let userInfo = state.userInfo || {}\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\r\n\r\n    return () => uns()\r\n  }, [])\r\n  return (\r\n    <>\r\n      <ul className={flod ? 'User-data-base' : 'User-data-base active'}>\r\n        <li><MailOutlined /><span> &nbsp; &nbsp;{userInfo.sociality}</span> </li>\r\n        <li><span style={{ color: '#cacaca' }}>|</span>\r\n          {userInfo.sex === 'man'\r\n            ? <ManOutlined style={{ marginLeft: '15px', color: '#0084FF' }} />\r\n            : <WomanOutlined style={{ marginLeft: '15px', color: '#e49eab' }} />\r\n          }\r\n        </li>\r\n      </ul>\r\n    </>\r\n  )\r\n}\r\n\r\nfunction UserDataList(props) {\r\n  let flod = props.flod\r\n  let [state, setState] = useState({})\r\n  let userInfo = state.userInfo || {}\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\r\n\r\n    return () => uns()\r\n  }, [])\r\n  return (\r\n    <ul className={flod ? 'User-data-list active' : 'User-data-list'} >\r\n      <li><span>现居地</span><span>{userInfo.address}</span></li>\r\n      <li><span>生日</span><span>{userInfo.birthday && userInfo.birthday.slice(5)}</span></li>\r\n      <li><span>所在行业</span><span>{userInfo.industry}</span></li>\r\n      <li><span>个人简介</span><span>{userInfo.introduction}</span></li>\r\n      <li><span>社交地址</span><span>{userInfo.sociality}</span></li>\r\n    </ul>\r\n  )\r\n}\r\n\r\n","import React, { useCallback, useEffect, useState } from 'react'\r\nimport { userStore } from '../redux/redux'\r\nimport { FooterBar } from './toolbar'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { LikeFilled } from '@ant-design/icons'\r\n\r\nexport default function UserBar() {\r\n  return (\r\n    <div className=\"toolbar\">\r\n      <Score />\r\n      <FooterBar />\r\n    </div>\r\n  )\r\n}\r\nfunction UserScore() {\r\n  let [state, setState] = useState(userStore.getState() || {})\r\n  let { userInfo = {} } = state\r\n  let isMe = state.cookieUser === userInfo.name\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n\r\n  let careQuestion = useCallback((one, sen) => {\r\n    userStore.dispatch({\r\n      type: 'activeSwitch',\r\n      active: one,\r\n    })\r\n    userStore.dispatch({\r\n      type: 'careActive',\r\n      careActive: sen,\r\n    })\r\n  }, [])\r\n  let collectActive = useCallback((one, sen) => {\r\n    userStore.dispatch({\r\n      type: 'activeSwitch',\r\n      active: one,\r\n    })\r\n    userStore.dispatch({\r\n      type: 'collectActive',\r\n      collectActive: sen,\r\n    })\r\n  }, [])\r\n  return (\r\n    <>\r\n      <div className=\"person-honor\">\r\n        <h4>个人成就</h4>\r\n        <ul>\r\n          <li><LikeFilled style={{ fontSize: '16px' }} /></li>\r\n          <li>\r\n            <span>获得了 {userInfo.agree} 次赞同</span>\r\n            <span>{userInfo.collect} 次收藏</span>\r\n            <span>{userInfo.favorite} 次喜欢</span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div className=\"user-score\">\r\n        <div className=\"likes\" onClick={() => careQuestion(4, 1)}><h4>关注了</h4><span>{userInfo.care}</span></div>\r\n        <div className=\"fans\" onClick={() => careQuestion(4, 2)}><h4>关注者</h4><span>{userInfo.fans}</span></div>\r\n      </div>\r\n      <div>\r\n        <ul className=\"user-bar-list\">\r\n          <li onClick={() => careQuestion(4, 0)}><span>关注的问题</span><span>{state.attentionDynamic && state.attentionDynamic.length}</span></li>\r\n          <li onClick={() => collectActive(5, 0)}><span>收藏的问题</span><span>{state.collectQues && state.collectQues.length}</span></li>\r\n          <li onClick={() => collectActive(5, 1)}><span>收藏的回答</span><span>{state.collectComment && state.collectComment.length}</span></li>\r\n          <li onClick={() => careQuestion(4, 1)}><span>{isMe ? '我' : userInfo.sex === 'man' ? '他' : '她'}关注的人</span><span>{userInfo.care}</span></li>\r\n        </ul>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst Score = withRouter(UserScore)\r\n","import React, { Fragment, useCallback, useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { CheckCircleFilled, ManOutlined, WomanOutlined } from '@ant-design/icons'\r\n// import { FooterBar } from './toolbar'\r\n// import { Over, Attachment } from './invitation'\r\n// import { homeStore } from '../redux/redux'\r\nimport './user-page.css'\r\nimport { careStore, userStore, navStore } from '../redux/redux'\r\nimport { useParams } from 'react-router-dom'\r\n// import PostsFooter from './postfooter'\r\nimport { AttentionQuestion } from './user-container'\r\nimport { Link } from \"react-router-dom\"\r\n\r\n\r\nexport default function AttentionDynamic(props) {\r\n  let dynamicList = props.dynamicList\r\n  let state = props.state\r\n  let isMe = state.cookieUser === state.userInfo.name\r\n  let [active, setActive] = useState(userStore.getState().careActive || 0)\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => setActive(userStore.getState().careActive))\r\n    return () => uns()\r\n  })\r\n  let changeView = useCallback((idx) => {\r\n    userStore.dispatch({\r\n      type: 'careActive',\r\n      careActive: idx,\r\n    })\r\n    // setActive(idx)\r\n  }, [])\r\n  let Idx = -1\r\n  return (\r\n    <>\r\n      <div className=\"dynamicCareList\">\r\n        <ul>\r\n          <li onClick={() => changeView(0)} className={active === 0 ? 'careListActive' : ''}>关注的问题</li>\r\n          <li onClick={() => changeView(1)} className={active === 1 ? 'careListActive' : ''}>{isMe ? '我' : state.userInfo.sex === 'man' ? '他' : '她'}关注的人</li>\r\n          <li onClick={() => changeView(2)} className={active === 2 ? 'careListActive' : ''}>关注{isMe ? '我' : state.userInfo.sex === 'man' ? '他' : '她'}的人</li>\r\n        </ul>\r\n      </div>\r\n      <div>\r\n        <ul className=\"posts user-Dynamic cares\">\r\n          {active === 0 &&\r\n            dynamicList.map((item, idx) => {\r\n              if (item.status !== 'delete') {\r\n                Idx++\r\n                return (\r\n                  <Fragment key={idx}>\r\n                    {item.style === 'attention' && <AttentionQuestion item={item} state={props.state} idx={Idx} />}\r\n                  </Fragment>\r\n                )\r\n              }\r\n              return \"\"\r\n            })\r\n          }\r\n          {active !== 0 && <CaresList active={active} />\r\n          }\r\n        </ul>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nfunction CaresList(props) {\r\n  let active = props.active\r\n  let { id } = useParams()\r\n  let [state, setState] = useState(careStore.getState() || {})\r\n  let { myCares = [] } = state\r\n  let careList = active === 1 ? state.itCaresList : state.recevies\r\n\r\n  useEffect(() => {\r\n    axios.get(`/api/get-care/${id}`)\r\n      .then(res => {\r\n        let data = res.data\r\n        careStore.dispatch({\r\n          type: 'getCare',\r\n          cares: data.myCares,\r\n          ...data\r\n        })\r\n      })\r\n\r\n    let uns = careStore.subscribe(() => setState(careStore.getState()))\r\n    return () => uns()\r\n  }, [id])\r\n\r\n  let enterText = useCallback((e) => {\r\n    e.target.innerText = '取消关注'\r\n  }, [])\r\n  let leaveTXet = useCallback((e) => {\r\n    e.target.innerText = '已关注'\r\n  }, [])\r\n  // debugger\r\n  let updateCare = useCallback(({ type, item }) => {\r\n    if (state.cookieUser === undefined) {\r\n      navStore.dispatch({\r\n        type: 'toSign',\r\n        sign: false,\r\n      })\r\n      return\r\n    }\r\n    careStore.dispatch({\r\n      type: 'updateCare',\r\n      id: item.userId,\r\n    })\r\n\r\n    axios.post('/api/care', { type, careId: item.userId })\r\n      .catch(rej => {\r\n        if (rej.response.status === 401) {\r\n          navStore.dispatch({\r\n            type: 'toSign',\r\n            sign: false,\r\n          })\r\n        }\r\n      })\r\n  }, [state])\r\n\r\n  return (\r\n    <>\r\n      {careList && careList.map(item => {\r\n        let careBloon = myCares.find(it => it.careId === item.userId)\r\n        return (\r\n          <li key={item.createdAt} className=\"careList\">\r\n            <div><Link to={'/user/' + item.userId}><i style={{ backgroundImage: `url(${item.avatar})` }} className=\"careAvatar\"></i></Link></div>\r\n            <div>\r\n              <Link to={'/user/' + item.userId} className=\"cares-name\">\r\n                <h3>{item.name}</h3>\r\n                {item.sex === 'man'\r\n                  ? <ManOutlined style={{ marginLeft: '15px', color: '#0084FF' }} />\r\n                  : <WomanOutlined style={{ marginLeft: '15px', color: '#e49eab' }} />\r\n                }\r\n              </Link>\r\n              <span className=\"careSign\">{item.sign}</span>\r\n              <ul className=\"careinfo\">\r\n                <li><span>{item.commentCount} 回答</span></li>\r\n                <li><span>{item.agree} 赞同</span></li>\r\n                <li><span>{item.fans} 关注者</span></li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"careButton\">\r\n              {careBloon\r\n                ? <button className=\"active\" onMouseEnter={enterText} onMouseLeave={leaveTXet} onClick={() => updateCare({ type: 'reCare', item: item })}>已关注</button>\r\n                : <button className=\"unactive\" onClick={() => updateCare({ type: 'toCare', item: item })}><CheckCircleFilled /> 关注{item.sex === 'man' ? '他' : '她'}</button>\r\n              }\r\n            </div>\r\n          </li>\r\n        )\r\n      })\r\n      }\r\n    </>\r\n  )\r\n}\r\n","import React, { Fragment, useCallback, useEffect, useState } from 'react'\r\nimport moment from 'moment';\r\nimport { Link } from \"react-router-dom\"\r\nimport { Attachment } from './invitation'\r\nimport './user-page.css'\r\nimport { userStore } from '../redux/redux'\r\nimport PostsFooter from './postfooter'\r\n\r\n\r\nexport default function CollectList(props) {\r\n  let [state, setState] = useState(userStore.getState() || {})\r\n  let [active, setActive] = useState(userStore.getState().collectActive || 0)\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => {\r\n      setActive(userStore.getState().collectActive)\r\n      setState(userStore.getState())\r\n    })\r\n    return () => uns()\r\n  }, [props])\r\n  let dynamicList = props.dynamicList\r\n\r\n  let changeView = useCallback((idx) => {\r\n    userStore.dispatch({\r\n      type: 'collectActive',\r\n      collectActive: idx,\r\n    })\r\n  }, [])\r\n\r\n  let quesIdx = -1\r\n  let coomIdx = -1\r\n  return (\r\n    <>\r\n      <div className=\"dynamicCareList collectHead\">\r\n        <ul>\r\n          <li onClick={() => changeView(0)} className={active === 0 ? 'careListActive' : ''}>收藏的问题</li>\r\n          <li onClick={() => changeView(1)} className={active === 1 ? 'careListActive' : ''}>收藏的回答</li>\r\n        </ul>\r\n      </div>\r\n      <div>\r\n        <ul className=\"posts user-Dynamic collect\">\r\n          {\r\n            dynamicList.map((item, idx) => {\r\n              if (active === 0 && item.status !== 'delete' && item.type === 'question') {\r\n                quesIdx++\r\n                return (\r\n                  <Fragment key={idx}>\r\n                    { <CollectQuestion item={item} state={state} idx={quesIdx} />}\r\n                  </Fragment>\r\n                )\r\n              } else if (active === 1 && item.status !== 'delete' && item.type === 'comment') {\r\n                coomIdx++\r\n                return (\r\n                  <Fragment key={idx}>\r\n                    {<CollectComment item={item} state={state} idx={coomIdx} />}\r\n                  </Fragment>\r\n                )\r\n              }\r\n              return \"\"\r\n            })\r\n          }\r\n        </ul>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport function CollectQuestion(props) {\r\n  let idx = props.idx\r\n  let [state, setState] = useState(userStore.getState() || {})\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\r\n    return () => uns()\r\n  }, [idx])\r\n  let item = props.item\r\n  let time = (item.likeAt || item.createdAt) * 1\r\n  let TIME = moment(time).endOf().fromNow(true) + '前'\r\n  return (\r\n    <li key={item.likeAt || item.createdAt}>\r\n      <div className=\"dynamicList-header\"><span>收藏了问题</span><span>\r\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\r\n          new Date(time).toLocaleDateString().slice(5)\r\n          : TIME\r\n        }</span></div>\r\n      <div className=\"content-div\" name=\"content\">\r\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\r\n        <p className=\"post-content\">\r\n          <span>{item.content}</span>\r\n        </p>\r\n      </div>\r\n      <PostsFooter type='question' post={item} idx={idx} state={state} />\r\n    </li>\r\n  )\r\n}\r\n\r\nexport function CollectComment(props) {\r\n  let idx = props.idx\r\n  let [state, setState] = useState(userStore.getState() || {})\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\r\n    return () => uns()\r\n  }, [idx])\r\n  let item = props.item\r\n  let avatar = item.avatar\r\n  let time = (item.likeAt || item.createdAt) * 1\r\n  let TIME = moment(time).endOf().fromNow(true) + '前'\r\n  let POST_TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\r\n  return (\r\n    <li key={item.likeAt || item.createdAt}>\r\n      <div className=\"dynamicList-header\"><span>收藏了回答</span><span>\r\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\r\n          new Date(time).toLocaleDateString().slice(5)\r\n          : TIME\r\n        }</span></div>\r\n      <div className=\"content-div\" name=\"content\">\r\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\r\n      </div>\r\n      <div className=\"commenter-info dynamic-comment\" >\r\n        <i className=\"commenter-avatar\" style={{ backgroundImage: `url(${avatar})` }}></i>\r\n        <div className=\"commenter-flag\">\r\n          <Link className=\"commenter-name\" to={`/user/${item.userId}`}>{item.name}</Link>\r\n          <span className=\"commenter-sign\">{item.sign}</span>\r\n          <Attachment state={state} post={item} type='comment' />\r\n        </div>\r\n      </div>\r\n      <div className=\"content-div\" name=\"content\">\r\n        <p><span>{item.content}</span></p>\r\n        <span className=\"answerAt\">发布于 &nbsp;\r\n        {parseInt(POST_TIME) >= 1 && /天/g.test(POST_TIME) ?\r\n            moment(item.createdAt * 1).format(\"YYYY-MM-DD HH:mm:ss\")\r\n            : POST_TIME\r\n          }\r\n        </span>\r\n        <div className=\"commenter-footer\">\r\n          <PostsFooter type={'comment'} comment={item} idx={idx} state={state} />\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n","import React, { useCallback, useEffect, useState, Fragment } from 'react'\r\nimport moment from 'moment';\r\nimport UserBar from './user-Bar'\r\nimport { Over, Attachment } from './invitation'\r\n// import { homeStore } from '../redux/redux'\r\nimport './user-page.css'\r\nimport { userStore } from '../redux/redux'\r\n// import { useParams } from 'react-router-dom'\r\nimport PostsFooter from './postfooter'\r\nimport AttentionDynamic from './caresList'\r\nimport CollectList, { CollectQuestion, CollectComment } from './collectList'\r\nimport { Link } from \"react-router-dom\"\r\n\r\nexport default function () {\r\n  return (\r\n    <div className=\" user-container\">\r\n      <div className=\"body-container\">\r\n        <UserMain />\r\n        <UserBar />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function UserMain({ dynamic = true }) {\r\n  let [flag, setFlag] = useState(20)\r\n  let [active, reActive] = useState(userStore.getState().active || 0)\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => reActive(userStore.getState().active))\r\n    return () => uns()\r\n  })\r\n  useEffect(() => {\r\n    setFlag(30 * active + 20 + 40 * active)\r\n  }, [active])\r\n  let getMain = useCallback((idx) => {\r\n    userStore.dispatch({\r\n      type: 'activeSwitch',\r\n      active: idx,\r\n    })\r\n    // reActive(idx)\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"invitation\">\r\n      <div className=\"user-main\">\r\n        <ul className=\"user-main-header\">\r\n          <li onClick={() => getMain(0)}>动态</li>\r\n          <li onClick={() => getMain(1)}>回答</li>\r\n          <li onClick={() => getMain(2)}>提问</li>\r\n          <li onClick={() => getMain(3)}>赞同</li>\r\n          <li onClick={() => getMain(4)}>关注</li>\r\n          <li onClick={() => getMain(5)}>收藏</li>\r\n        </ul>\r\n        <div className=\"user-main-flag\" style={{ left: flag + 'px' }}></div>\r\n        {dynamic && <DynamicList active={active} />}\r\n      </div>\r\n      {dynamic && <Over />}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction DynamicList(props) {\r\n  let [state, setState] = useState(userStore.getState() || {})\r\n  let { userInfo = {} } = state\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\r\n\r\n    return () => uns()\r\n  }, [])\r\n  // debugger\r\n  return (\r\n    <div className=\"dynamicList\">\r\n      { props.active !== 4 && props.active !== 5 &&\r\n        <div className=\"dynamic-head\">\r\n          <span>\r\n            {userInfo.name === state.cookieUser\r\n              ? <span>我的{['动态', '回答', '提问', '赞同'][props.active]}</span>\r\n              : <span>{userInfo.sex === 'man' ? '他' : '她'}的{['动态', '回答', '提问', '赞同'][props.active]}</span>\r\n            }\r\n          </span>\r\n        </div>\r\n      }\r\n      <div>\r\n        <PostMain active={props.active} />\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction PostMain(props) {\r\n  let active = props.active\r\n  let [state, setState] = useState(userStore.getState() || {})\r\n  let { attentionDynamic = [], commentDynamic = [], likeDynamic = [], postDynamic = [], collectComment = [], collectQues = [] } = state\r\n\r\n  let dynamic = [...attentionDynamic, ...commentDynamic, ...likeDynamic, ...postDynamic, ...collectComment, ...collectQues]\r\n  let dynamicArray = [commentDynamic, postDynamic, likeDynamic, attentionDynamic, [...collectComment, ...collectQues]]\r\n\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n\r\n  // console.log(state)\r\n  // debugger\r\n  let dynamicList\r\n  if (active === 0) {\r\n    dynamicList = sortAtTime(dynamic)\r\n  } else {\r\n    dynamicList = sortAtTime(dynamicArray[active - 1])\r\n  }\r\n  let Idx = -1\r\n  return (\r\n    <>\r\n      {active === 4\r\n        ? <AttentionDynamic dynamicList={dynamicList} state={state} />\r\n        : <>\r\n          {active === 5 && <CollectList dynamicList={dynamicList} state={state} />}\r\n          {active !== 4 && active !== 5 &&\r\n            <ul className=\"posts user-Dynamic\">\r\n              {\r\n                dynamicList.map((item, i) => {\r\n                  if (item.status !== 'delete') {\r\n                    Idx++\r\n                    return (\r\n                      <Fragment key={i}>\r\n                        {item.style === 'comment' && <AnswerDynamic item={item} state={state} idx={Idx} />}\r\n                        {item.style === 'post' && <PostDynamic item={item} state={state} idx={Idx} />}\r\n                        {item.style === 'likeComment' && <LikeDynamic item={item} state={state} idx={Idx} />}\r\n                        {item.style === 'attention' && <AttentionQuestion item={item} state={state} idx={Idx} />}\r\n                        {item.style === 'collect' &&\r\n                          <>\r\n                            {item.type === 'question' && <CollectQuestion item={item} state={state} idx={Idx} />}\r\n                            {item.type === 'comment' && <CollectComment item={item} state={state} idx={Idx} />}\r\n                          </ >\r\n                        }\r\n                      </Fragment>\r\n                    )\r\n                  }\r\n                  return \"\"\r\n                })\r\n              }\r\n            </ul>\r\n          }\r\n        </>\r\n\r\n      }\r\n\r\n    </>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction AnswerDynamic(props) {\r\n  let idx = props.idx\r\n  // let state = props.state\r\n  let state = props.state || {}\r\n  let { userInfo = {} } = state\r\n  let item = props.item\r\n  let avatar = userInfo.avatar\r\n  let time = (item.likeAt || item.createdAt) * 1\r\n  let TIME = moment(time).endOf().fromNow(true) + '前'\r\n  let POST_TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\r\n\r\n  return (\r\n    <li key={item.likeAt || item.createdAt}>\r\n      <div className=\"dynamicList-header\"><span>回答了问题</span><span>\r\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\r\n          new Date(time).toLocaleDateString().slice(5)\r\n          : TIME\r\n        }\r\n      </span></div>\r\n      <div className=\"content-div\" name=\"content\">\r\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\r\n      </div>\r\n      <div className=\"commenter-info dynamic-comment\" >\r\n        <i className=\"commenter-avatar\" style={{ backgroundImage: `url(${avatar})` }}></i>\r\n        <div className=\"commenter-flag\">\r\n          <Link className=\"commenter-name\" to=\".\">{userInfo.name}</Link>\r\n          <span className=\"commenter-sign\">{userInfo.sign}</span>\r\n          <Attachment state={state} post={item} type='comment' />\r\n        </div>\r\n      </div>\r\n      <div className=\"content-div\" name=\"content\">\r\n        <p><span>{item.content}</span></p>\r\n        <span className=\"answerAt\">发布于 &nbsp;\r\n        {parseInt(POST_TIME) * 1 >= 1 && /天/g.test(POST_TIME) ?\r\n            moment(item.createdAt * 1).format(\"YYYY-MM-DD HH:mm:ss\")\r\n            : POST_TIME\r\n          }</span>\r\n        <div className=\"commenter-footer\">\r\n          <PostsFooter type={'comment'} comment={item} idx={idx} state={state} />\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nfunction PostDynamic(props) {\r\n  let idx = props.idx\r\n  let state = props.state || {}\r\n\r\n  let item = props.item\r\n  let time = (item.likeAt || item.createdAt) * 1\r\n\r\n  let TIME = moment(time).endOf().fromNow(true) + '前'\r\n\r\n  return (\r\n    <li key={item.likeAt || item.createdAt}>\r\n      <div className=\"dynamicList-header User-post-time\"><span>发布了问题</span><span>&nbsp;&nbsp;:&nbsp;\r\n         {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\r\n          moment(item.createdAt * 1).format(\"YYYY-MM-DD HH:mm:ss\")\r\n          : TIME\r\n        }</span>\r\n        <Attachment state={state} post={item} type='post' />\r\n      </div>\r\n      <div className=\"content-div\" name=\"content\">\r\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\r\n        <p className=\"post-content\">\r\n          <span>{item.content}</span>\r\n        </p>\r\n      </div>\r\n      <PostsFooter type={'question'} post={item} idx={idx} state={state} />\r\n    </li>\r\n  )\r\n}\r\n\r\n\r\nfunction LikeDynamic(props) {\r\n  let idx = props.idx\r\n  let state = props.state || {}\r\n\r\n  let item = props.item\r\n  let avatar = item.avatar\r\n  let time = (item.likeAt || item.createdAt) * 1\r\n  let TIME = moment(time).endOf().fromNow(true) + '前'\r\n  let POST_TIME = moment(item.createdAt * 1).endOf().fromNow(true) + '前'\r\n  return (\r\n    <li key={item.likeAt || item.createdAt}>\r\n      <div className=\"dynamicList-header\"><span>赞同了回答</span><span>\r\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\r\n          new Date(time).toLocaleDateString().slice(5)\r\n          : TIME\r\n        }</span></div>\r\n      <div className=\"content-div\" name=\"content\">\r\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\r\n      </div>\r\n      <div className=\"commenter-info dynamic-comment\" >\r\n        <i className=\"commenter-avatar\" style={{ backgroundImage: `url(${avatar})` }}></i>\r\n        <div className=\"commenter-flag\">\r\n          <Link className=\"commenter-name\" to={`/user/${item.commenterId}`}>{item.name}</Link>\r\n          <span className=\"commenter-sign\">{item.sign}</span>\r\n          <Attachment state={state} post={item} type='comment' />\r\n        </div>\r\n      </div>\r\n      <div className=\"content-div\" name=\"content\">\r\n        <p><span>{item.content}</span></p>\r\n        <span className=\"answerAt\">发布于  &nbsp;\r\n        {parseInt(POST_TIME) * 1 >= 1 && /天/g.test(POST_TIME) ?\r\n            moment(item.createdAt * 1).format(\"YYYY-MM-DD HH:mm:ss\")\r\n            : POST_TIME\r\n          }\r\n        </span>\r\n        <div className=\"commenter-footer\">\r\n          <PostsFooter type={'comment'} comment={item} idx={idx} state={state} />\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport function AttentionQuestion(props) {\r\n  let idx = props.idx\r\n  let state = props.state || {}\r\n\r\n  let item = props.item\r\n  let time = (item.likeAt || item.createdAt) * 1\r\n  let TIME = moment(time).endOf().fromNow(true) + '前'\r\n\r\n  return (\r\n    <li key={item.likeAt || item.createdAt}>\r\n      <div className=\"dynamicList-header\"><span>关注了问题</span><span>\r\n        {parseInt(TIME) * 1 > 1 && /天/g.test(TIME) ?\r\n          new Date(time).toLocaleDateString().slice(5)\r\n          : TIME\r\n        }\r\n      </span></div>\r\n      <div className=\"content-div\" name=\"content\">\r\n        <Link className=\"post-title\" to={`/post-page/${item.postId}`}>{item.title}</Link>\r\n        <p className=\"post-content\">\r\n          <span>{item.content}</span>\r\n        </p>\r\n      </div>\r\n      <PostsFooter type={'question'} post={item} idx={idx} state={state} />\r\n    </li>\r\n  )\r\n}\r\n\r\n//根据时间排序\r\n\r\nfunction sortAtTime(array = []) {\r\n  return Array.from(array).sort((a, b) => {\r\n    let bCreated = b.likeAt ? b.likeAt * 1 : b.createdAt * 1\r\n    let aCreated = a.likeAt ? a.likeAt * 1 : a.createdAt * 1\r\n    return bCreated - aCreated\r\n  })\r\n}\r\n\r\n//处理时间 \r\n// function dateTime(time) {\r\n//   let org = \r\n// }\r\n\r\n\r\n\r\n","import React, { useEffect, useState ,useCallback} from 'react'\r\nimport Nav from '../components/header-nav'\r\nimport Question from '../components/question'\r\nimport { homeStore, pageStore, userStore } from '../redux/redux'\r\nimport UserHeader from '../components/user-header'\r\nimport UserContainer,{UserMain} from '../components/user-container'\r\nimport { useParams } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport CareMessage from '../components/care-message'\r\nexport default function () {\r\n  let { id } = useParams()\r\n  let [state, setState] = useState(homeStore.getState())\r\n  useEffect(() => {\r\n    let uns = homeStore.subscribe(() => {\r\n      let newData = homeStore.getState()\r\n      let { posts = [] } = newData\r\n      setState(newData)\r\n      userStore.dispatch({\r\n        type: 'getInitial',\r\n        attention: newData.attention,\r\n        poors: newData.poors,\r\n        favoriteQues: newData.favoriteQues,\r\n        collect_quesActive: newData.collect_quesActive,\r\n        attentionDynamic: posts.filter(it => it.style === 'attention'),\r\n        postDynamic: posts.filter(it => it.style === 'post'),\r\n        collectQues: posts.filter(it => it.style === 'collect'),\r\n      })\r\n    })\r\n    return () => uns()\r\n  }, [id])\r\n  useEffect(() => {\r\n    if (id === 'undefined') {\r\n      window.location.replace('/')\r\n      return\r\n    }\r\n    axios.get(`/api/user-data/${id}`)\r\n      .then(res => {\r\n        let initial = res.data\r\n        userStore.dispatch({\r\n          type: 'getInitial',\r\n          ...initial,\r\n        })\r\n        homeStore.dispatch({\r\n          type: 'getData',\r\n          ...initial,\r\n          posts: [...initial.postDynamic, ...initial.attentionDynamic, ...initial.collectQues]\r\n        })\r\n        pageStore.dispatch({\r\n          type: 'getInitial',\r\n          ...initial,\r\n          commenterInfo: [...initial.likeDynamic, ...initial.commentDynamic, ...initial.collectComment]\r\n        })\r\n      })\r\n\r\n    let pageuns = pageStore.subscribe(() => {\r\n      let newData = pageStore.getState()\r\n      userStore.dispatch({\r\n        type: 'getInitial',\r\n        ...newData,\r\n        favoriteComment: newData.favoriteComment,\r\n        collect_commActive: newData.collect_commActive,\r\n        likeDynamic: newData.commenterInfo.filter(it => it.style === 'likeComment'),\r\n        commentDynamic: newData.commenterInfo.filter(it => it.style === 'comment'),\r\n        collectComment: newData.commenterInfo.filter(it => it.style === 'collect'),\r\n      })\r\n    })\r\n    return () => pageuns()\r\n  }, [id])\r\n\r\n  return (\r\n    <>\r\n      <Nav page={'user'}><UserNavSlider /></Nav>\r\n      {state.question &&\r\n        <Question />\r\n      }\r\n      <UserHeader />\r\n      <UserContainer />\r\n    </>\r\n  )\r\n}\r\nfunction UserNavSlider(){\r\n  let [state, setState] = useState({})\r\n  let userInfo = state.userInfo || {}\r\n\r\n  useEffect(() => {\r\n    let uns = userStore.subscribe(() => setState(userStore.getState()))\r\n    return () => uns()\r\n  }, [])\r\n   let editState = useCallback(() => {\r\n    userStore.dispatch({\r\n      type: 'editState',\r\n      edit: true\r\n    })\r\n  }, [])\r\n  return (\r\n    <div className=\"user-ndv-slider\">\r\n    <UserMain dynamic={false}/>\r\n    {state.cookieUser === userInfo.name\r\n    ? <div className=\"user-editing\" onClick={editState}>编辑个人资料</div>\r\n    : <div className=\"other-user\"><CareMessage careInfo={state.userInfo} /></div>\r\n    }\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\r\n// import logo from './logo.svg';\r\nimport './App.css';\r\n// import { Button } from 'antd';\r\n// 由于 antd 组件的默认文案是英文，所以需要修改为中文\r\n\r\n// import 'antd/dist/antd.css';\r\nimport Home from './pages/home'\r\nimport './index.css';\r\nimport Signin from './pages/signin.js'\r\nimport Signup from './components/signup-component'\r\nimport PostPage from './pages/post'\r\nimport User from './pages/user'\r\n// import Edit from './components/edit-userInfo'\r\n// import Main from './layout'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\n\r\n\r\nconst App = () => (\r\n  <div className=\"App\">\r\n    <Router>\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          <Home />\r\n        </Route>\r\n        <Route path=\"/index\">\r\n          <Home />\r\n        </Route>\r\n        <Route path=\"/sign\">\r\n          <Signin />\r\n        </Route>\r\n        <Route path=\"/sign_up\">\r\n          <Signup />\r\n        </Route>\r\n        <Route path=\"/post-page/:id\">\r\n          <PostPage />\r\n        </Route>\r\n        {/* <Route path=\"/user/edit\">\r\n          <Edit />\r\n        </Route> */}\r\n        <Route path=\"/user/:id\">\r\n          <User />\r\n        </Route>\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    </Router>\r\n  </div>\r\n)\r\n\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport moment from 'moment';\nimport 'moment/locale/zh-cn';\nimport zhCN from 'antd/es/locale/zh_CN';\nimport { ConfigProvider } from 'antd'\n\nmoment.locale('zh-cn');\nReactDOM.render(\n  <React.StrictMode>\n    <ConfigProvider locale={zhCN}>\n      <App />\n    </ConfigProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}