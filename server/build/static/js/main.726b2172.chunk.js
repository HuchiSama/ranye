(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){},115:function(e,t,a){},163:function(e,t,a){e.exports=a(312)},168:function(e,t,a){},169:function(e,t,a){},214:function(e,t,a){},290:function(e,t,a){},291:function(e,t,a){},312:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(26),l=a.n(r),o=(a(115),a(168),a(4)),i=a(1),s=(a(169),a(322)),m=a(323),u=a(324),d=a(325),f=a(326),p=a(327),E=a(328),v=a(329),b=a(330),g=a(331),y=a(63),h=a(12),O=a(7),j=a.n(O),k={getInitial:function(e,t){return Object(h.a)(e,function(e){for(var a in t)e[a]=t[a]})},toSign:function(e,t){return Object(h.a)(e,function(e){e.sign=t.sign})},toChat:function(e,t){return Object(h.a)(e,function(e){e.chat=t.chat})}};var C=Object(y.a)(function(e,t){return t.type in k?k[t.type](e,t):e},{question:!1,sign:!0,invitedList:[],chat:!1,chatList:[],cares:{}}),N={formRedirect:function(e,t){return Object(h.a)(e,function(e){for(var a in t)e[a]=t[a]})},sucessSignup:function(e,t){return Object(h.a)(e,function(e){for(var a in t)e[a]=t[a]})},toSignin:function(e,t){return Object(h.a)(e,function(e){e.sucessSignup=t.sucessSignup,e.form="signin",e.captcha=!0,e.protocol="\u672a\u6ce8\u518c\u624b\u673a\u9a8c\u8bc1\u540e\u81ea\u52a8\u767b\u5f55\uff0c\u6ce8\u518c\u5373\u4ee3\u8868\u540c\u610f\u300a\u77e5\u4e4e\u534f\u8bae\u300b\u300a\u9690\u79c1\u4fdd\u62a4\u6307\u5f15\u300b",e.buttonText="\u767b\u5f55",e.other=!0})}};var I=Object(y.a)(function(e,t){return t.type in N?N[t.type](e,t):e},{form:"signin",captcha:!0,protocol:"\u672a\u6ce8\u518c\u624b\u673a\u9a8c\u8bc1\u540e\u81ea\u52a8\u767b\u5f55\uff0c\u6ce8\u518c\u5373\u4ee3\u8868\u540c\u610f\u300a\u77e5\u4e4e\u534f\u8bae\u300b\u300a\u9690\u79c1\u4fdd\u62a4\u6307\u5f15\u300b",buttonText:"\u767b\u5f55",other:!0}),S={postQuestion:function(e,t){return Object(h.a)(e,function(e){e.question=t.question,e.postCount=t.postCount,e.posts=t.posts})},question:function(e,t){return Object(h.a)(e,function(e){e.question=t.question})},getData:function(e,t){return Object(h.a)(e,function(e){for(var a in t)e[a]=t[a]})},toAttention:function(e,t){return Object(h.a)(e,function(e){e.attention[t.postId]?(j.a.post("/api/attention/",{qusId:t.postId,createdAt:Date.now(),type:"revoke"}),e.posts.forEach(function(e){e.postId===t.postId&&(e.qusLike=t.like-1)}),e.attention[t.postId]=!1):(j.a.post("/api/attention/",{qusId:t.postId,createdAt:Date.now(),type:"attention"}),e.posts.forEach(function(e){e.postId===t.postId&&(e.qusLike=t.like+1)}),e.attention[t.postId]=!0)})},poorButton:function(e,t){return Object(h.a)(e,function(e){e.poors[t.postId]?(j.a.post("/api/attention/",{qusId:t.postId,type:"revoke",style:"poor",createdAt:Date.now()}),e.poors[t.postId]=!1,e.posts.forEach(function(e){e.postId===t.postId&&(e.poor=t.poor-1)})):(j.a.post("/api/attention/",{qusId:t.postId,type:"attention",style:"poor",createdAt:Date.now()}),e.poors[t.postId]=!0,e.posts.forEach(function(e){e.postId===t.postId&&(e.poor=t.poor+1)}))})},deletePost:function(e,t){return Object(h.a)(e,function(e){e.postCount=t.postCount,e.posts=t.posts})},collect:function(e,t){return Object(h.a)(e,function(e){e.collect_quesActive[t.collectId]?(j.a.post("/api/collect/",{id:t.id,collectId:t.collectId,type:"revoke",style:"question"}),e.collect_quesActive[t.collectId]=!1):(j.a.post("/api/collect/",{id:t.id,collectId:t.collectId,type:"collect",style:"question"}),e.collect_quesActive[t.collectId]=!0)})},favorite:function(e,t){return Object(h.a)(e,function(e){e.favoriteQues[t.favoriteId]?(j.a.post("/api/favorite/",{id:t.id,favoriteId:t.favoriteId,type:"revoke",style:"question"}),e.favoriteQues[t.favoriteId]=!1):(j.a.post("/api/favorite/",{id:t.id,favoriteId:t.favoriteId,type:"favorite",style:"question"}),e.favoriteQues[t.favoriteId]=!0)})},hoverAvatar:function(e,t){return Object(h.a)(e,function(e){e.hover=t.hover})}};var A=Object(y.a)(function(e,t){return t.type in S?S[t.type](e,t):e},{question:!1,hover:!1}),w={writeAnswer:function(e,t){return Object(h.a)(e,function(e){e.writeAnswer=t.writeAnswer})},getInitial:function(e,t){return Object(h.a)(e,function(e){for(var a in t)e[a]=t[a]})},postAnswer:function(e,t){return Object(h.a)(e,function(e){e.commenterInfo=t.commenterInfo,e.writeAnswer=!1})},toAttention:function(e,t){return Object(h.a)(e,function(e){t.attention?(j.a.post("/api/attention/",{qusId:t.pageId,type:"attention",createdAt:Date.now()}),e.attention=t.attention,e.attentionLength++):(j.a.post("/api/attention/",{qusId:t.pageId,type:"revoke",createdAt:Date.now()}),e.attention=t.attention,e.attentionLength--)})},likeComment:function(e,t){return Object(h.a)(e,function(e){e.likes[t.commentId]?(j.a.post("/api/likeComment/",{commentId:t.commentId,type:"revoke",createdAt:Date.now()}),e.commenterInfo.forEach(function(e){e.commentId===t.commentId&&(e.like=t.like-1)}),e.poster?e.poster.agree-=1:e.userInfo.agree-=1,e.likes[t.commentId]=!1):(j.a.post("/api/likeComment/",{commentId:t.commentId,type:"active",createdAt:Date.now()}),e.commenterInfo.forEach(function(e){e.commentId===t.commentId&&(e.like=t.like+1)}),e.poster?e.poster.agree+=1:e.userInfo.agree+=1,e.likes[t.commentId]=!0)})},poorButton:function(e,t){return Object(h.a)(e,function(e){e.commentPoors[t.commentId]?(j.a.post("/api/likeComment/",{commentId:t.commentId,type:"revoke",style:"poor",createdAt:Date.now()}),e.commenterInfo.forEach(function(e){e.commentId===t.commentId&&(e.poor=t.poor-1)}),e.commentPoors[t.commentId]=!1):(j.a.post("/api/likeComment/",{commentId:t.commentId,type:"active",style:"poor",createdAt:Date.now()}),e.commenterInfo.forEach(function(e){e.commentId===t.commentId&&(e.poor=t.poor+1)}),e.commentPoors[t.commentId]=!0)})},deleteComment:function(e,t){return Object(h.a)(e,function(e){e.commenterInfo=t.comments})},collect:function(e,t){return Object(h.a)(e,function(e){e.collect_commActive[t.collectId]?(j.a.post("/api/collect/",{id:t.id,collectId:t.collectId,type:"revoke",style:"comment"}),e.collect_commActive[t.collectId]=!1):(j.a.post("/api/collect/",{id:t.id,collectId:t.collectId,type:"collect",style:"comment"}),e.collect_commActive[t.collectId]=!0)})},favorite:function(e,t){return Object(h.a)(e,function(e){e.favoriteComment[t.favoriteId]?(j.a.post("/api/favorite/",{id:t.id,favoriteId:t.favoriteId,type:"revoke",style:"comment"}),e.favoriteComment[t.favoriteId]=!1):(j.a.post("/api/favorite/",{id:t.id,favoriteId:t.favoriteId,type:"favorite",style:"comment"}),e.favoriteComment[t.favoriteId]=!0)})},ansCommentList:function(e,t){return Object(h.a)(e,function(e){e.commenterInfo.forEach(function(e){e.commentId===t.id&&e.ansComments++})})},invite:function(e,t){return Object(h.a)(e,function(e){e.invite=t.invite})},upDateInvite:function(e,t){return Object(h.a)(e,function(e){e.inviteList=t.inviteList})}};var L=Object(y.a)(function(e,t){return t.type in w?w[t.type](e,t):e},{writeAnswer:!1,invite:!1,inviteList:[]}),x={getInitial:function(e,t){return Object(h.a)(e,function(e){for(var a in t)e[a]=t[a]})},editState:function(e,t){return Object(h.a)(e,function(e){e.edit=t.edit})},editUserInfo:function(e,t){return Object(h.a)(e,function(e){for(var a in t)e.userInfo[a]=t[a]})},editEnd:function(e,t){return Object(h.a)(e,function(e){e.edit=t.edit})},updateActive:function(e,t){return Object(h.a)(e,function(e){e.attention=t.attention,e.poors=t.poors})},activeSwitch:function(e,t){return Object(h.a)(e,function(e){e.active=t.active})},careActive:function(e,t){return Object(h.a)(e,function(e){e.careActive=t.careActive})},collectActive:function(e,t){return Object(h.a)(e,function(e){e.collectActive=t.collectActive})}};var D=Object(y.a)(function(e,t){return t.type in x?x[t.type](e,t):e},{writeAnswer:!1,edit:!1,question:!1,active:0,careActive:0,collectActive:0}),q={updateCare:function(e,t){return Object(h.a)(e,function(e){var a=e.myCares.length;if(0!==a)for(var n=0;n<a;n++){if(e.myCares[n].careId===t.id){e.myCares[n].careId=null;break}n===a-1&&(e.myCares[a]={careId:t.id})}else e.myCares[a]={careId:t.id}})},getCare:function(e,t){return Object(h.a)(e,function(e){for(var a in t)e[a]=t[a]})}};var U=Object(y.a)(function(e,t){return t.type in q?q[t.type](e,t):e},{myCares:[]}),M={getInitial:function(e,t){return Object(h.a)(e,function(e){for(var a in t)"id"===a||"ansCommentList"===a?e.ansCommentList[t.id]=t.ansCommentList:e[a]=t[a]})},postComment:function(e,t){return Object(h.a)(e,function(e){e.ansCommentList[t.id]=t.newList})},likeAnsComment:function(e,t){return Object(h.a)(e,function(e){e.myLikeAnsComment[t.id]?(j.a.post("/api/ansCommentLike/".concat(t.id),{style:"like",type:"revoke"}),e.ansCommentList[t.commentId].forEach(function(e){e.ansCommentId===t.id&&(e.like-=1)}),e.myLikeAnsComment[t.id]=!1):(j.a.post("/api/ansCommentLike/".concat(t.id),{style:"like",type:"active"}),e.ansCommentList[t.commentId].forEach(function(e){e.ansCommentId===t.id&&(e.like+=1)}),e.myLikeAnsComment[t.id]=!0)})},poorAnsComment:function(e,t){return Object(h.a)(e,function(e){e.myPoorAnsComment[t.id]?(j.a.post("/api/ansCommentLike/".concat(t.id),{style:"poor",type:"revoke"}),e.ansCommentList[t.commentId].forEach(function(e){e.ansCommentId===t.id&&(e.poor-=1)}),e.myPoorAnsComment[t.id]=!1):(j.a.post("/api/ansCommentLike/".concat(t.id),{style:"poor",type:"active"}),e.ansCommentList[t.commentId].forEach(function(e){e.ansCommentId===t.id&&(e.poor+=1)}),e.myPoorAnsComment[t.id]=!0)})},postEndComment:function(e,t){return Object(h.a)(e,function(e){e.endCommentList[t.id]=t.newList,e.ansCommentList[t.commentId].forEach(function(e,a){e.ansCommentId===t.id&&(e.endComment+=1)})})},getEndCommentList:function(e,t){return Object(h.a)(e,function(e){for(var a in t)"id"===a||"endCommentList"===a?e.endCommentList[t.id]=t.endCommentList:e[a]=t[a]})},likeEndComment:function(e,t){return Object(h.a)(e,function(e){e.myLikeEndComment[t.id]?(j.a.post("/api/endCommentLike/".concat(t.id),{style:"like",type:"revoke"}),e.endCommentList[t.ansCommentId].forEach(function(e){e.endCommentId===t.id&&(e.like-=1)}),e.myLikeEndComment[t.id]=!1):(j.a.post("/api/endCommentLike/".concat(t.id),{style:"like",type:"active"}),e.endCommentList[t.ansCommentId].forEach(function(e){e.endCommentId===t.id&&(e.like+=1)}),e.myLikeEndComment[t.id]=!0)})},poorEndComment:function(e,t){return Object(h.a)(e,function(e){e.myPoorEndComment[t.id]?(j.a.post("/api/endCommentLike/".concat(t.id),{style:"poor",type:"revoke"}),e.endCommentList[t.ansCommentId].forEach(function(e){e.endCommentId===t.id&&(e.poor-=1)}),e.myPoorEndComment[t.id]=!1):(j.a.post("/api/endCommentLike/".concat(t.id),{style:"poor",type:"active"}),e.endCommentList[t.ansCommentId].forEach(function(e){e.endCommentId===t.id&&(e.poor+=1)}),e.myPoorEndComment[t.id]=!0)})}};var F=Object(y.a)(function(e,t){return t.type in M?M[t.type](e,t):e},{ansCommentList:{},endComment:!1,endCommentList:{}}),H=a(74),P=a(24),T=a(14),Y=a(16),z=a(19),R=a(38),_=a(8),Q=function(e){Object(z.a)(a,e);var t=Object(R.a)(a);function a(e){var c;return Object(T.a)(this,a),(c=t.call(this)).signTo=function(e){e.preventDefault();var t=e.target;if("signin"===c.props.form){var a={name:t.name.value,password:t.password.value,captcha:t.captcha.value};j.a.post("/api/clearCookie"),j.a.post("/api/login",a).then(function(e){0===e.data?(document.querySelector(".captcha").click(),c.errRef.current.innerHTML="\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"):1===e.data?"/sign"===window.location.pathname?c.props.history.push("/"):(C.dispatch({type:"toSign",sign:!0}),window.location.replace("")):(document.querySelector(".captcha").click(),c.errRef.current.innerHTML="\u9a8c\u8bc1\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165")}).catch(console.log)}else{if(t.password.value!==t.nextPassword.value)return c.errRef.current.innerHTML="\u5bc6\u7801\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165";var n={name:t.name.value.trim(),password:t.password.value.trim(),email:t.email.value.trim()};if(!n.name||!n.password||!n.email)return c.errRef.current.innerHTML="\u4e0d\u80fd\u8f93\u5165\u7a7a\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165";if(c.props.accQuery)return c.errRef.current.innerHTML="\u7528\u6237\u540d\u5df2\u88ab\u4f7f\u7528\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165";if(c.props.emailQuery)return c.errRef.current.innerHTML="\u90ae\u7bb1\u5df2\u88ab\u4f7f\u7528\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165";j.a.post("/api/sign_up",n).then(function(e){e.data?(I.dispatch({type:"sucessSignup",sucessSignup:!0}),setTimeout(function(){document.querySelector(".success").classList.remove("suc-transition")},200),setTimeout(function(){document.querySelector(".success img").classList.add("img-cslc"),document.querySelector(".success label").classList.remove("label-visi")},3e3)):c.errRef.current.innerHTML="\u6ce8\u518c\u5931\u8d25\uff0c\u8bf7\u518d\u6b21\u5c1d\u8bd5"}).catch(function(){c.errRef.current.innerHTML="\u6ce8\u518c\u5931\u8d25\uff0c\u8bf7\u518d\u6b21\u5c1d\u8bd5"})}},c.toSignUp=function(e){e.preventDefault(),I.dispatch({type:"formRedirect",form:"signup",captcha:!1,other:!1,protocol:"\u6ce8\u518c\u5373\u4ee3\u8868\u540c\u610f\u300a\u77e5\u4e4e\u534f\u8bae\u300b\u300a\u9690\u79c1\u4fdd\u62a4\u6307\u5f15\u300b",buttonText:"\u6ce8\u518c"})},c.toSignIn=function(e){e.preventDefault(),I.dispatch({type:"formRedirect",form:"signin",captcha:2,other:!0,protocol:"\u672a\u6ce8\u518c\u624b\u673a\u9a8c\u8bc1\u540e\u81ea\u52a8\u767b\u5f55\uff0c\u6ce8\u518c\u5373\u4ee3\u8868\u540c\u610f\u300a\u77e5\u4e4e\u534f\u8bae\u300b\u300a\u9690\u79c1\u4fdd\u62a4\u6307\u5f15\u300b",buttonText:"\u767b\u5f55"})},c.state=I.getState(),c.props=e,c.errRef=Object(n.createRef)(),c}return Object(Y.a)(a,null,[{key:"footer",value:function(e){var t=c.a.createElement(c.a.Fragment,null,c.a.createElement("hr",{className:"other-hr"}),c.a.createElement("div",{className:"other-Account"},c.a.createElement("span",null,"\u5176\u4ed6\u8d26\u53f7\u767b\u9646"),c.a.createElement("span",null,"\u5e7f\u544a\u4f4d\u62db\u79df"),c.a.createElement("span",null,"\u5e7f\u544a\u4f4d\u62db\u79df")));return c.a.createElement(c.a.Fragment,null,e.other&&t)}}]),Object(Y.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.onclick=function(){e.errRef.current.innerHTML=""}}},{key:"componentWillUnmount",value:function(){window.onclick=null}},{key:"render",value:function(){var e=this.props,t=e.children.props.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{action:"/api/login",method:"post",onSubmit:this.signTo},t.filter(function(e){return"div"!==e.type}),c.a.createElement("div",{className:"redirector"},"signin"===e.form?c.a.createElement(c.a.Fragment,null,c.a.createElement(_.b,{to:"/sign_up",className:"zhuce",onClick:this.toSignUp},"\u6ce8\u518c\u65b0\u7528\u6237"),c.a.createElement(_.b,{to:"/lossPas",className:"lossPas"},"\u5fd8\u8bb0\u5bc6\u7801\uff1f")):c.a.createElement(_.b,{to:"/sign",className:"zhuce",onClick:this.toSignIn},"\u8fd4\u56de\u767b\u9646\u754c\u9762")),t.filter(function(e){return"div"===e.type}),c.a.createElement("span",{className:"signin"===e.form?"sub-error":"lossPas sub-error",ref:this.errRef}),c.a.createElement("button",{type:"submit",className:"submit"},e.buttonText),c.a.createElement("span",{className:"xieyi"},this.state.protocol)),c.a.createElement(a.footer,{xieyi:e.xieyi,other:e.other}))}}]),a}(c.a.Component),B=Object(P.h)(Q);function W(e){var t=Object(n.useState)(I.getState()),a=Object(i.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),p=f[0],E=f[1],v=Object(n.useCallback)(function(e){"signin"===("\u7528\u6237\u767b\u5f55"===e.target.textContent?"signin":"signup")?I.dispatch({type:"formRedirect",form:"signin",captcha:2,other:!0,protocol:"\u672a\u6ce8\u518c\u624b\u673a\u9a8c\u8bc1\u540e\u81ea\u52a8\u767b\u5f55\uff0c\u6ce8\u518c\u5373\u4ee3\u8868\u540c\u610f\u300a\u77e5\u4e4e\u534f\u8bae\u300b\u300a\u9690\u79c1\u4fdd\u62a4\u6307\u5f15\u300b",buttonText:"\u767b\u5f55"}):I.dispatch({type:"formRedirect",form:"signup",captcha:!1,other:!1,protocol:"\u6ce8\u518c\u5373\u4ee3\u8868\u540c\u610f\u300a\u77e5\u4e4e\u534f\u8bae\u300b\u300a\u9690\u79c1\u4fdd\u62a4\u6307\u5f15\u300b",buttonText:"\u6ce8\u518c"})},[]);Object(n.useEffect)(function(){var e=I.subscribe(function(){return l(I.getState())});return function(){return e()}},[]);var b=Object(n.useCallback)(function(e){e.target.src="/api/captcha?t=".concat(Date.now())},[]),g=Object(n.useCallback)(function(e){j.a.post("/api/user-query/",{name:e.target.value}).then(function(e){0===e.data?u(!0):u(!1)})},[]),y=Object(n.useCallback)(function(e){j.a.post("/api/email-query/",{email:e.target.value}).then(function(e){0===e.data?E(!0):E(!1)})},[]);return c.a.createElement("div",{className:"outer"},c.a.createElement("div",{className:"form-header"},c.a.createElement("label",{className:"signin"===r.form?"form-action":"",onClick:v},"\u7528\u6237\u767b\u5f55"),c.a.createElement("label",{className:"signup"===r.form?"form-action signup-label":"signup-label",onClick:v},"\u6ce8\u518c\u8d26\u53f7")),c.a.createElement("hr",null),c.a.createElement(B,{captcha:r.captcha,other:r.other,form:r.form,xieyi:r.captcha,buttonText:r.buttonText,accQuery:m,emailQuery:p},"signin"===r.form?c.a.createElement("div",null,c.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u767b\u5f55\u8d26\u53f7",className:"name",name:"name"}),c.a.createElement("input",{type:"password",placeholder:"\u5bc6\u7801",className:"password",name:"password"}),c.a.createElement("div",{name:"captcha-div"},c.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",className:"captcha-input",name:"captcha"}),c.a.createElement("img",{src:"/api/captcha?t=".concat(Date.now()),title:"\u70b9\u51fb\u6362\u4e00\u5f20",className:"captcha",onClick:b,alt:"captcha"}))):c.a.createElement("div",null,c.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u6ce8\u518c\u8d26\u53f7",className:"name",name:"name",onChange:g}),m&&c.a.createElement("label",{className:"user-query"}),c.a.createElement("input",{type:"email",placeholder:"\u7ed1\u5b9a\u7535\u5b50\u90ae\u7bb1",className:"email",name:"email",onChange:y}),p&&c.a.createElement("label",{className:"email-query"}),c.a.createElement("input",{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",className:"password",name:"password"}),c.a.createElement("input",{type:"password",placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",className:"password",name:"nextPassword"}))))}var J=a(11),G=a.n(J),K=a(319),$=a(320),V=a(321),X=a(317),Z=a(80),ee=X.a.TextArea,te=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],l=a[1],s=e.careInfo,m=void 0===s?{}:s,u=Object(n.useState)(!1),d=Object(i.a)(u,2),f=d[0],p=d[1],E=Object(n.useState)(C.getState()),v=Object(i.a)(E,2),b=v[0],g=v[1];Object(n.useEffect)(function(){var e=C.subscribe(function(){return g(C.getState())});return function(){return e()}},[]),Object(n.useEffect)(function(){if(r){var e=document.querySelector(".recare");e.onmouseenter=function(){e.childNodes[1].innerText="\u53d6\u6d88"},e.onmouseleave=function(){e.childNodes[1].innerText="\u5df2\u5173\u6ce8"}}return function(){r&&(e.onmouseenter=null,e.onmouseleave=null)}},[r]),Object(n.useEffect)(function(){j.a.get("/api/care").then(function(e){var t=e.data;U.dispatch(Object(o.a)({type:"getCare"},t))}).catch(function(e){});var e=U.subscribe(function(){l(Array.from(U.getState().myCares).some(function(e){return e.careId===m.userId}))});return function(){return e()}},[m]);var y=Object(n.useCallback)(function(){void 0!==b.cookieUser?(U.dispatch({type:"updateCare",id:m.userId}),j.a.post("/api/care",{type:r?"reCare":"toCare",careId:m.userId}).catch(function(e){401===e.response.status&&C.dispatch({type:"toSign",sign:!1})})):C.dispatch({type:"toSign",sign:!1})},[r,m,b]),h=Object(n.useCallback)(function(){void 0!==b.cookieUser?p(!f):C.dispatch({type:"toSign",sign:!1})},[f,b]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:"poster-interactive"},r?c.a.createElement("li",{onClick:y,className:"recare"},c.a.createElement(K.a,null),c.a.createElement("span",null,"\u5df2\u5173\u6ce8")):c.a.createElement("li",{onClick:y},c.a.createElement(K.a,null),c.a.createElement("span",null,"\u5173\u6ce8\u4ed6")),c.a.createElement("li",{onClick:h},c.a.createElement($.a,null),"\u53d1\u79c1\u4fe1")),f&&c.a.createElement(ae,{targetInfo:m,setChat:p,state:b}))};function ae(e){var t=e.targetInfo,a=e.setChat,r=e.state,l=Object(n.useState)(""),o=Object(i.a)(l,2),s=o[0],m=o[1],u=Object(n.useState)([]),d=Object(i.a)(u,2),f=d[0],p=d[1],E=Object(n.useState)(null),v=Object(i.a)(E,2),b=v[0],g=v[1];Object(n.useEffect)(function(){null===b&&g(new WebSocket("ws://47.111.233.71:8080/targetId=".concat(t.userId,"&&userId=").concat(r.userInfo.userId)))},[t,r,b]);var y=Object(n.useCallback)(function(){""!==s&&(b.send(JSON.stringify([{content:s,targetName:t.name,targetId:t.userId,targetAvatar:t.avatar}])),m(""))},[s,t,b]);Object(n.useEffect)(function(){b&&(b.onopen=function(e){console.log("WebSocket opened!")},b.onclose=function(){console.log("WebSocket closed!")},b.onmessage=function(e){var t=JSON.parse(e.data);t=t.flat(),console.log(t),p(t)})},[b]);var h=Object(n.useCallback)(function(e){m(e.target.value)},[]),O=Object(n.useCallback)(function(){a(!1),b.close()},[b,a]);Object(n.useEffect)(function(){document.querySelector(".chat-section").scrollTop=document.querySelector(".chat-section-ul").offsetHeight},[f]);var j=Object(n.useCallback)(function(e){e.shiftKey||13!==e.keyCode||(e.preventDefault(),document.querySelector(".chat-edit-footer button").click())},[]);return c.a.createElement("div",{className:"chat-outer",style:{width:"".concat(window.innerWidth,"px"),height:"".concat(window.innerHeight,"px")}},c.a.createElement("div",{className:"chat-container"},c.a.createElement("div",{className:"chat-user-head"},c.a.createElement("label",{onClick:O},c.a.createElement(V.a,null)),c.a.createElement("h2",null,t.name)),c.a.createElement("div",{className:"chat-section"},c.a.createElement("ul",{className:"chat-section-ul"},f.map(function(e,a){if(e.targetName!==r.cookieUser){var l=G()(Date.now()).format("YY"),o=G()(1*e.createdAt).format("YY");return c.a.createElement(n.Fragment,{key:e.createdAt},c.a.createElement("li",{className:"chat-time"},(0===a||e.createdAt-f[a-1].createdAt>=18e4)&&c.a.createElement("span",null,1*l>1*o?G()(1*e.createdAt).format("YY-MM-DD HH:mm:ss"):G()(1*e.createdAt).format("MM-DD HH:mm:ss"))),c.a.createElement("li",{className:"chat-section-me",key:e.createdAt},c.a.createElement("p",{className:"chat-msg-content"},e.content),c.a.createElement("i",{style:{backgroundImage:"url(".concat(e.userAvatar,")")},className:"chat-msg-avatar"})))}var i=G()(Date.now()).format("YY"),s=G()(1*e.createdAt).format("YY");return c.a.createElement(n.Fragment,{key:e.createdAt},c.a.createElement("li",{className:"chat-time"},(0===a||e.createdAt-f[a-1].createdAt>=18e4)&&c.a.createElement("span",null,1*i>1*s?G()(1*e.createdAt).format("YY-MM-DD HH:mm:ss"):G()(1*e.createdAt).format("MM-DD HH:mm:ss"))),c.a.createElement("li",{className:"chat-section-target",key:e.createdAt},c.a.createElement("i",{style:{backgroundImage:"url(".concat(t.avatar,")")},className:"chat-msg-avatar"}),c.a.createElement("p",{className:"chat-msg-content"},e.content)))}))),c.a.createElement("div",{className:"chat-footer"},c.a.createElement("div",{className:"chat-edit"},c.a.createElement(ee,{rows:6,value:s,onChange:h,onKeyDown:j})),c.a.createElement("div",{className:"chat-edit-footer"},c.a.createElement("span",null,"\u6309Enter \u53d1\u9001"),c.a.createElement(Z.a,{type:"primary",onClick:y},"\u53d1\u9001")))))}a(103);function ne(e){return c.a.createElement("div",{className:"signup"===e.type?"signup-footer footer":"footer"},c.a.createElement("span",null," \xa9 2020 \u77e5\u4e4e\u4eac ICP \u8bc1 110745 \u53f7\u4eac ICP \u5907 13052560 \u53f7 - 1\u4eac\u516c\u7f51\u5b89\u5907 11010802010035 \u53f7\u51fa\u7248\u7269\u7ecf\u8425\u8bb8\u53ef\u8bc1"),c.a.createElement("br",null),c.a.createElement("span",null,"\u4fb5\u6743\u4e3e\u62a5\u7f51\u4e0a\u6709\u5bb3\u4fe1\u606f\u4e3e\u62a5\u4e13\u533a\u513f\u7ae5\u8272\u60c5\u4fe1\u606f\u4e3e\u62a5\u4e13\u533a\u8fdd\u6cd5\u548c\u4e0d\u826f\u4fe1\u606f\u4e3e\u62a5\uff1a010-82716601 "))}function ce(){var e=Object(n.useState)({form:"signup",captcha:!1,other:!1,protocol:"\u6ce8\u518c\u5373\u4ee3\u8868\u540c\u610f\u300a\u77e5\u4e4e\u534f\u8bae\u300b\u300a\u9690\u79c1\u4fdd\u62a4\u6307\u5f15\u300b",buttonText:"\u6ce8\u518c",sucessSignup:!1}),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(function(){var e=I.subscribe(function(){return r(I.getState())});return function(){return e()}}),c.a.createElement("div",{className:"main"},a.sucessSignup&&c.a.createElement(re,{props:a}),c.a.createElement("img",{src:"../images/login-top.png",alt:"logo",className:"logo"}),c.a.createElement(W,{state:a}),c.a.createElement(ne,{type:"signup"}))}function re(e){var t=Object(n.useCallback)(function(e){e.preventDefault(),I.dispatch({type:"toSignin",sucessSignup:!1})},[]);return c.a.createElement("div",{className:"success-bg"},c.a.createElement("div",{className:e.sucessSignup?"success":"suc-transition success"},c.a.createElement("img",{src:"/images/loading.gif",alt:"\u6ce8\u518c\u6210\u529f"}),c.a.createElement("label",{className:"label-visi"},c.a.createElement("span",null,"\u6ce8\u518c\u6210\u529f\uff01 ")," \u70b9\u51fb ",c.a.createElement(_.b,{to:"/sign",onClick:t},"\u8fd4\u56de\u767b\u9646"))))}var le=function(e){var t=Object(n.useState)("none"),a=Object(i.a)(t,2),r=a[0],l=a[1],f=Object(n.useState)(C.getState()||{}),p=Object(i.a)(f,2),E=p[0],v=p[1],b=function(){var e=Object(n.useState)(C.getState().invitedList||[]),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(C.getState().byCareList||[]),l=Object(i.a)(r,2),s=l[0],m=l[1],u=Object(n.useState)(C.getState().byCommentLike||[]),d=Object(i.a)(u,2),f=d[0],p=d[1],E=Object(n.useState)(0),v=Object(i.a)(E,2),b=v[0],g=v[1],y=Object(n.useState)(!1),h=Object(i.a)(y,2),O=h[0],k=h[1];return Object(n.useEffect)(function(){j.a.get("/api/invite").then(function(e){var t=e.data;C.dispatch(Object(o.a)({type:"getInitial"},t))})},[]),Object(n.useEffect)(function(){var e=a.filter(function(e){return"view"!==e.status}).length,t=s.filter(function(e){return"view"!==e.status}).length,n=f.filter(function(e){return"view"!==e.status}).length;g(e+t+n)},[a,s,f]),Object(n.useEffect)(function(){var e=C.subscribe(function(){c(C.getState().invitedList||[]),m(C.getState().byCareList||[]),p(C.getState().byCommentLike||[])});return function(){return e()}},[]),Object(n.useEffect)(function(){var e=document.querySelector(".nav-invited-outer"),t=function(e){k(!1)};function a(){window.addEventListener("click",t)}function n(){window.removeEventListener("click",t)}return e.addEventListener("mouseleave",a),e.addEventListener("mouseenter",n),function(){e.removeEventListener("mouseleave",a),e.removeEventListener("mouseenter",n)}},[]),{invitePull:Object(n.useCallback)(function(e,t){var a=Object(i.a)(e,2),n=a[0],c=a[1];t.stopPropagation(),k(!O),n(!1),c("none"),j.a.post("/api/clear-invited"),g(0)},[O]),inviteMsg:a,byCareMsg:s,byCommentMsg:f,msgSum:b,invited:O,setInvited:k}}(),g=b.invitePull,y=b.inviteMsg,h=b.byCareMsg,O=b.byCommentMsg,k=b.msgSum,N=b.invited,S=b.setInvited,w=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(0),s=Object(i.a)(l,2),m=s[0],u=s[1],d=Object(n.useState)(C.getState().chatList),f=Object(i.a)(d,2),p=f[0],E=f[1];Object(n.useEffect)(function(){j.a.get("/api/chat-list").then(function(e){var t=e.data;C.dispatch(Object(o.a)({type:"getInitial"},t))}).catch(function(e){console.dir(e)})},[]),Object(n.useEffect)(function(){var e=C.subscribe(function(){return E(C.getState().chatList)});return function(){return e()}},[]);var v=Object(n.useCallback)(function(e,t){var a=Object(i.a)(e,2),n=a[0],l=a[1];t.stopPropagation(),n("none"),r(!c),l(!1),u(0)},[c]);return Object(n.useEffect)(function(){e.cookieUser&&u(p.flat().filter(function(t){return"normal"===t.status&&t.userName!==e.cookieUser}).length)},[p,e]),Object(n.useEffect)(function(){var e=document.querySelector(".nav-chat-outer"),t=function(e){r(!1)};function a(){window.addEventListener("click",t)}function n(){window.removeEventListener("click",t)}return e.addEventListener("mouseleave",a),e.addEventListener("mouseenter",n),function(){e.removeEventListener("mouseleave",a),e.removeEventListener("mouseenter",n)}},[]),{chat:c,setChat:r,chatSum:m,chatList:p,chatPull:v}}(E),L=w.chat,x=w.chatSum,D=w.chatList,q=w.chatPull,U=w.setChat,M=Object(n.useState)(I.getState()),F=Object(i.a)(M,2),H=F[0],P=F[1];Object(n.useEffect)(function(){var e=I.subscribe(function(){return P(I.getState()||{})}),t=C.subscribe(function(){return v(C.getState()||{})});return function(){t(),e()}},[]);var T=Object(n.useCallback)(function(){void 0!==E.cookieUser?A.dispatch({type:"question",question:!0}):C.dispatch({type:"toSign",sign:!1})},[E]);Object(n.useEffect)(function(){j.a.get("/api/nav-data").then(function(e){var t=e.data;C.dispatch(Object(o.a)({type:"getInitial"},t))});var e=function(){l("none")};return window.addEventListener("click",e),function(){return window.removeEventListener("click",e)}},[r]),Object(n.useEffect)(function(){if(!E.sign){function e(e){var t=document.querySelector(".user-not-sign");e.target===t&&C.dispatch({type:"toSign",sign:!0})}return window.addEventListener("click",e),function(){return window.removeEventListener("click",e)}}},[E]);var Y=Object(n.useCallback)(function(e,t){var a=Object(i.a)(e,2),n=a[0],c=a[1];t.stopPropagation(),l("none"===r?"block":"none"),n(!1),c(!1)},[r]);return Object(n.useEffect)(function(){var t=document.querySelector(".nav-slider-outer");function a(a){"post"===e.page&&document.documentElement.scrollTop<100||"user"===e.page&&document.documentElement.scrollTop<300||(a.wheelDelta>0?t.style.top="0px":t.style.top="-50px")}return window.addEventListener("mousewheel",a),function(){return window.removeEventListener("mousewheel",a)}},[e]),c.a.createElement(c.a.Fragment,null,c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-slider-outer"},c.a.createElement("div",{className:"top-nav"},c.a.createElement(_.b,{to:"/",className:"home-logo"},c.a.createElement("img",{src:"/images/icon2.jpg",alt:"zhi \u547c"})),c.a.createElement("ul",{className:"home-list"},c.a.createElement("li",null,c.a.createElement(_.b,{to:"/"},"\u9996\u9875")),c.a.createElement("li",null,c.a.createElement(_.b,{to:"/"},"\u53d1\u73b0")),c.a.createElement("li",null,c.a.createElement(_.b,{to:"/"},"\u7b49\u4f60\u6765\u7b54"))),c.a.createElement("div",{className:"search-div"},c.a.createElement("label",{className:"search-label"},c.a.createElement("input",{type:"search",name:"search",className:"search",placeholder:"\u529f\u80fd\u5c1a\u672a\u5b8c\u5584"}),c.a.createElement(s.a,{style:{fontSize:"20px",color:"#9AA3B5"}})),c.a.createElement("input",{type:"button",className:"question",value:"\u53d1\u5e16",onClick:T})),c.a.createElement("ul",{className:"persen-list"},c.a.createElement("li",null,c.a.createElement(m.a,{style:{fontSize:"22px"},onClick:function(e){return g([U,l],e)}}),0!==k&&c.a.createElement("label",{className:"nav-message-icon",onClick:function(e){return g([U,l],e)}},k)),c.a.createElement("li",null,c.a.createElement(u.a,{style:{fontSize:"20px"},onClick:function(e){return q([l,S],e)}}),0!==x&&c.a.createElement("label",{className:"nav-message-icon",onClick:function(e){return q([l,S],e)}},x)),c.a.createElement("li",{onClick:function(e){return Y([U,S],e)}},c.a.createElement(d.a,{style:{fontSize:"20px"}})))),e.children)),c.a.createElement("div",{className:"nav-pull-container"},c.a.createElement(ie,{inviteMsg:y,byCareMsg:h,byCommentMsg:O,className:N?"":"nav-message-hidden"}),c.a.createElement(de,{className:L?"":"nav-message-hidden",chatList:D}),c.a.createElement(oe,{display:r}),!E.sign&&c.a.createElement("div",{className:"user-not-sign"},c.a.createElement(W,null)),H.sucessSignup&&c.a.createElement(re,{props:H})))};var oe=Object(P.h)(function(e){var t=Object(n.useState)(C.getState().cookieUser),a=Object(i.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(C.getState().userInfo||{}),s=Object(i.a)(o,2),m=s[0],u=s[1];Object(n.useEffect)(function(){var e=C.subscribe(function(){u(C.getState().userInfo||{}),l(C.getState().cookieUser)});return function(){return e()}},[]);var d=Object(n.useCallback)(function(){j.a.post("/api/clearCookie/")},[]),v=Object(n.useCallback)(function(){void 0===r?C.dispatch({type:"toSign",sign:!1}):(e.history.push("/user/".concat(m.userId)),D.dispatch({type:"editState",edit:!0}))},[m,r,e.history]),b=Object(n.useCallback)(function(){void 0===r?C.dispatch({type:"toSign",sign:!1}):e.history.push("/user/".concat(m.userId))},[m,r,e.history]);return c.a.createElement("div",{className:"pull-down",style:{display:e.display}},c.a.createElement("span",{className:"flag"},c.a.createElement("i",null)),c.a.createElement("ul",{className:"home-pull"},c.a.createElement("li",{onClick:b},c.a.createElement(f.a,null),"\u6211\u7684\u9996\u9875"),c.a.createElement("li",{onClick:v},c.a.createElement(p.a,null),"\u7f16\u8f91\u8d44\u6599"),c.a.createElement("li",{onClick:d},c.a.createElement(_.b,{to:"/sign"},c.a.createElement(E.a,null),"\u9000\u51fa\u767b\u9646"))))});function ie(e){var t=e.inviteMsg,a=e.byCareMsg,r=e.byCommentMsg,l=e.className,o=Object(n.useState)(0),s=Object(i.a)(o,2),m=s[0],u=s[1],d=[t,a,r][m],f=Object(n.useState)(!1),p=Object(i.a)(f,2),E=p[0],y=p[1];return Object(n.useEffect)(function(){document.querySelector(".nav-invited-list").offsetHeight>=430&&y(!0)},[m]),c.a.createElement("div",{className:"nav-invited-outer ".concat(l)},c.a.createElement("span",{className:"flag"},c.a.createElement("i",null)),c.a.createElement("div",{className:"nav-invited-head"},c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){return u(0)}},c.a.createElement(v.a,{className:0===m?"active-msgList":""})),c.a.createElement("li",{onClick:function(){return u(1)}},c.a.createElement(b.a,{className:1===m?"active-msgList":""})),c.a.createElement("li",{onClick:function(){return u(2)}},c.a.createElement(g.a,{className:2===m?"active-msgList":""})))),c.a.createElement("ul",{className:E?"nav-invited-list nav-invited-scroll":"nav-invited-list"},1===m&&c.a.createElement("div",{className:"msgList-care-head"},c.a.createElement("span",null,"\u6700\u8fd1\u8fd9\u4e9b\u4eba\u5173\u6ce8\u4e86\u4f60")),0!==d.length&&d.map(function(e,t){return c.a.createElement(n.Fragment,{key:t},0===m&&c.a.createElement(se,{item:e}),1===m&&c.a.createElement(me,{item:e}),2===m&&c.a.createElement(ue,{item:e}))}),0===d.length&&c.a.createElement("li",{className:"nav-invited-item"},c.a.createElement(H.a,{image:H.a.PRESENTED_IMAGE_SIMPLE,description:"\u8fd8\u6ca1\u6709\u65b0\u7684\u52a8\u6001\u54e6\uff01"}))))}function se(e){var t=e.item;return c.a.createElement("li",{className:"nav-invited-item",key:t.createdAt},c.a.createElement(_.b,{to:"/user/".concat(t.userId)},t.userName),c.a.createElement("span",null,"\xa0\u9080\u8bf7\u60a8\u56de\u7b54\u95ee\u9898\xa0"),c.a.createElement(_.b,{to:"/post-page/".concat(t.postId)},t.title))}function me(e){var t=e.item;return c.a.createElement("li",{className:"nav-cares-item",key:t.createdAt},c.a.createElement(_.b,{to:"/user/".concat(t.userId)},c.a.createElement("i",{style:{backgroundImage:"url(".concat(t.avatar,")")},className:"msgList-care-avatar"}),c.a.createElement("div",null,c.a.createElement("h4",null,t.name),c.a.createElement("span",null,t.sign))))}function ue(e){var t=e.item,a=G()(1*t.createdAt).endOf().fromNow(!0)+"\u524d",n=1*parseInt(a)>1&&/\u5929/g.test(a)?G()(1*t.createdAt).format("MM-DD HH:mm"):a;return c.a.createElement("li",{className:"nav-invited-item",key:t.createdAt},c.a.createElement(_.b,{to:"/user/".concat(t.userId)},t.userName),c.a.createElement("span",null,"\xa0\u70b9\u8d5e\u4e86\u60a8\u7684\u56de\u7b54:\xa0",c.a.createElement("span",{className:"nav-comment-item-time"},n)),c.a.createElement(_.b,{to:"/post-page/".concat(t.postId),className:"nav-comment-item-content"},t.content),c.a.createElement(_.b,{to:"/post-page/".concat(t.postId),className:"nav-comment-item-title",title:t.title},t.title))}function de(e){var t=e.className,a=e.chatList,r=Object(n.useState)(0),l=Object(i.a)(r,2),s=l[0],m=l[1],u=Object(n.useState)(C.getState().cares||{}),d=Object(i.a)(u,2),f=d[0],p=d[1],E=Object(n.useState)(!1),v=Object(i.a)(E,2),b=v[0],g=v[1],y=Object(n.useState)(C.getState()),h=Object(i.a)(y,2),O=h[0],k=h[1],N=Object(n.useState)({}),I=Object(i.a)(N,2),S=I[0],A=I[1],w=Object(n.useState)(!1),L=Object(i.a)(w,2),x=L[0],D=L[1],q=Object(n.useState)(!1),U=Object(i.a)(q,2),M=U[0],F=U[1];Object(n.useEffect)(function(){var e=C.subscribe(function(){k(C.getState()),p(C.getState().cares)});return function(){return e()}},[]);var P=a.filter(function(e){return e[0].userName===O.cookieUser?f[e[0].targetId]:f[e[0].userId]}),T=a.filter(function(e){return e[0].userName===O.cookieUser?!f[e[0].targetId]:!f[e[0].userId]}),Y=Object(n.useCallback)(function(e,t,a){g(!b),A(a),j.a.post("/api/clear-chat",{targetName:e.name}),t(0)},[b]);return Object(n.useEffect)(function(){b||j.a.get("/api/chat-list").then(function(e){var t=e.data;C.dispatch(Object(o.a)({type:"getInitial"},t))})},[b]),Object(n.useEffect)(function(){if(O.cookieUser){var e=0;P.forEach(function(t){var a=t.filter(function(e){return"normal"===e.status&&e.userName!==O.cookieUser});e+=a.length}),D(!!e);var t=0;T.forEach(function(e){var a=e.filter(function(e){return"normal"===e.status&&e.userName!==O.cookieUser});t+=a.length}),F(!!t)}},[P,T,O]),c.a.createElement("div",{className:"nav-invited-outer ".concat(t," nav-chat-outer")},c.a.createElement("span",{className:"flag"},c.a.createElement("i",null)),c.a.createElement("div",{className:"nav-invited-head"},c.a.createElement("ul",{className:"nav-chat-head"},c.a.createElement("li",{onClick:function(){return m(0)},className:0===s?"nav-chat-active":"nav-chat"},c.a.createElement("span",null,"\u6700\u8fd1\u8054\u7cfb"),x&&c.a.createElement("label",{className:"chat-head-label"})),c.a.createElement("li",{onClick:function(){return m(1)},className:1===s?"nav-chat-active":"nav-chat"},c.a.createElement("span",null,"\u964c\u751f\u4eba\u79c1\u4fe1"),M&&c.a.createElement("label",{className:"chat-head-label"})))),c.a.createElement("ul",{className:"nav-chat-list nav-invited-list"},0===s&&0!==P.length&&P.map(function(e){var t,a=e.filter(function(e){return"normal"===e.status&&e.userName!==O.cookieUser}).length;return t=e[0].targetName===O.cookieUser?e[0].userId:e[0].targetId,c.a.createElement(n.Fragment,{key:e[0].createdAt},c.a.createElement(fe,{item:e[0],targetId:t,unread:a,onClick:Y}))}),1===s&&0!==T.length&&T.map(function(e){var t,a=e.filter(function(e){return"normal"===e.status&&e.userName!==O.cookieUser}).length;return t=e[0].targetName===O.cookieUser?e[0].userId:e[0].targetId,c.a.createElement(n.Fragment,{key:e[0].createdAt},c.a.createElement(pe,{item:e[0],unread:a,targetId:t,onClick:Y}))}),(0===T.length&&1===s||0===P.length&&0===s)&&c.a.createElement("li",{className:"nav-invited-item"},c.a.createElement(H.a,{image:H.a.PRESENTED_IMAGE_SIMPLE,description:"\u8fd8\u6ca1\u6709\u79c1\u4fe1\u54e6\uff01"}))),b&&c.a.createElement(ae,{targetInfo:S,state:O,setChat:g}))}function fe(e){var t=e.item,a=e.unread,r=e.onClick,l=e.targetId,o=t.userId===l?t.userAvatar:t.targetAvatar,s=t.userId===l?t.userName:t.targetName,m=Object(n.useState)(a),u=Object(i.a)(m,2),d=u[0],f=u[1],p=Object(n.useState)({}),E=Object(i.a)(p,2),v=E[0],b=E[1];return Object(n.useEffect)(function(){j.a.post("/api/userInfo-serach",{id:l}).then(function(e){b(e.data.userInfo)})},[l]),c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"nav-chat-item",key:t.createdAt,onClick:function(){return r(v,f,v)}},0!==d&&c.a.createElement("label",{className:"nav-message-icon chat-unred"},d),c.a.createElement("div",null,c.a.createElement("i",{style:{backgroundImage:"url(".concat(o,")")},className:"msgList-care-avatar"}),c.a.createElement("div",null,c.a.createElement("h4",null,s),c.a.createElement("span",null,t.content)))))}function pe(e){var t=e.item,a=e.unread,r=e.onClick,l=e.targetId,o=t.userId===l?t.userAvatar:t.targetAvatar,s=t.userId===l?t.userName:t.targetName,m=Object(n.useState)(a),u=Object(i.a)(m,2),d=u[0],f=u[1],p=Object(n.useState)({}),E=Object(i.a)(p,2),v=E[0],b=E[1];return Object(n.useEffect)(function(){j.a.post("/api/userInfo-serach",{id:l}).then(function(e){b(e.data.userInfo)})},[l]),c.a.createElement("li",{className:"nav-chat-item",key:t.createdAt,onClick:function(){return r(v,f,v)}},0!==d&&c.a.createElement("label",{className:"nav-message-icon chat-unred"},d),c.a.createElement("div",null,c.a.createElement("i",{style:{backgroundImage:"url(".concat(o,")")},className:"msgList-care-avatar"}),c.a.createElement("div",null,c.a.createElement("h4",null,s),c.a.createElement("span",null,t.content))))}a(214);var Ee=function(){var e=Object(n.useCallback)(function(){var e=document.querySelector(".neirong").value,t={title:document.querySelector("#fileName").value,content:e};""!==t.title.trim()&&""!==t.content.trim()&&j.a.post("/api/home_Page/",t).then(function(e){A.dispatch({type:"postQuestion",question:!1,postCount:e.data.postCount,posts:e.data.posts})}).catch(function(e){401===e.response.status&&(C.dispatch({type:"toSign",sign:!1}),A.dispatch({type:"question",question:!1}))})},[]),t=Object(n.useCallback)(function(){A.dispatch({type:"question",question:!1})},[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{className:"clear-qus",onClick:t},"x"),c.a.createElement("div",{id:"questionDiv"},c.a.createElement("div",{className:"question-outer"},c.a.createElement("div",{className:"header"},c.a.createElement("input",{type:"text",id:"fileName",placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",name:"title"})),c.a.createElement("section",null,c.a.createElement("textarea",{className:"neirong",contentEditable:!0,name:"content"})),c.a.createElement("label",{className:"qst-submit",onClick:e},"\u53d1\u5e03\u95ee\u9898"))))},ve=a(334),be=a(335),ge=a(336),ye=a(337),he=a(338),Oe=a(315),je=a(313),ke=a(332),Ce=a(333),Ne=X.a.TextArea;function Ie(e){var t=e.item,a=e.commentId,r=e.state,l=e.ansCommentId,o=r.myLikeEndComment,s=void 0===o?{}:o,m=r.myPoorEndComment,d=void 0===m?{}:m,f=Object(n.useState)(""),p=Object(i.a)(f,2),E=p[0],v=p[1],b=Object(n.useState)(!1),y=Object(i.a)(b,2),h=y[0],O=y[1],k=t.endCommentId,N=Object(n.useCallback)(function(e){v(e.target.value)},[]),I=Object(n.useCallback)(function(){O(!h)},[h]),S=Object(n.useCallback)(function(e){"\u8d5e"===e?F.dispatch({type:"likeEndComment",id:k,ansCommentId:t.ansCommentId}):F.dispatch({type:"poorEndComment",id:k,ansCommentId:t.ansCommentId})},[k,t]),A=Object(n.useCallback)(function(){void 0!==r.cookieUser?""!==E.trim()&&(j.a.post("/api/endComment/".concat(l),{content:E,targetUserId:t.userId,commentId:a}).then(function(e){F.dispatch({type:"postEndComment",id:l,newList:e.data.newEndCommentList})}),v("")):C.dispatch({type:"toSign",sign:!1})},[l,E,t,a,r]),w=c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:"ansComment-action"},c.a.createElement("li",{onClick:function(){return S("\u8d5e")},className:s[k]?"activeAnsComment":""},c.a.createElement(g.a,null)," ",t.like),c.a.createElement("li",{onClick:function(){return S("\u8e29")},className:d[k]?"activeAnsComment":""},c.a.createElement(ke.a,null)," \u8e29"),c.a.createElement("li",{onClick:I},c.a.createElement(u.a,null)," ",h?"\u53d6\u6d88\u56de\u590d":"\u56de\u590d")),h&&c.a.createElement(Oe.a.Item,null,c.a.createElement(Ne,{autoSize:!0,placeholder:" \u56de\u590d "+t.name,className:"endComment",style:{width:"490px",marginRight:"15px"},onInput:N,value:E}),c.a.createElement(Z.a,{htmlType:"submit",type:"primary",onClick:A},"\u53d1\u9001"))),L=c.a.createElement("div",{className:"ansComment-header"},c.a.createElement("i",{style:{backgroundImage:"url(".concat(t.avatar,")")},className:"endComment-avatar"}),c.a.createElement(_.b,{to:"/user/".concat(t.userId)},t.name,t.userId===a?"(\u4f5c\u8005)":""),"\xa0\xa0\u56de\u590d\xa0\xa0",c.a.createElement(_.b,{to:"/user/".concat(t.targetUserId)},t.targetName,t.targetUserId===a?"(\u4f5c\u8005)":"")),x=G()(1*t.createdAt).endOf().fromNow(!0)+"\u524d";return c.a.createElement(je.a,{actions:[w],author:[L],datetime:1*parseInt(x)>1&&/\u5929/g.test(x)?G()(1*t.createdAt).format("MM-DD HH:mm:ss"):x,content:c.a.createElement("p",null,t.content)})}var Se=X.a.TextArea,Ae=function(e){var t=e.id,a=Object(n.useState)({ansCommentList:[]}),r=Object(i.a)(a,2),l=r[0],o=r[1];Object(n.useEffect)(function(){j.a.get("/api/ansComment/".concat(t)).then(function(e){var a=e.data;F.dispatch({type:"getInitial",id:t,ansCommentList:a.ansCommentList,myLikeAnsComment:a.myLikeAnsComment,myPoorAnsComment:a.myPoorAnsComment,cookieUser:a.cookieUser})})},[t]);var s=l.ansCommentList[t]||[];return Object(n.useEffect)(function(){var e=F.subscribe(function(){return o(F.getState())});return function(){return e()}},[]),c.a.createElement("div",{className:"ansComment-outer"},c.a.createElement("div",{className:"ansComment-head"},c.a.createElement("h4",null,s.length," \u6761\u8bc4\u8bba")),c.a.createElement("ul",{className:"ansComment-container"},s.map(function(e,t){return c.a.createElement(n.Fragment,{key:t},c.a.createElement(we,{item:e,state:l}))})),c.a.createElement("div",{className:"ansComment-put"},c.a.createElement(Le,{state:l,id:t})))};function we(e){var t=e.item,a=t.ansCommentId,r=e.state,l=r.myLikeAnsComment,o=void 0===l?{}:l,s=r.myPoorAnsComment,m=void 0===s?{}:s,d=Object(n.useState)(!1),f=Object(i.a)(d,2),p=f[0],E=f[1],v=Object(n.useState)(""),b=Object(i.a)(v,2),y=b[0],h=b[1],O=Object(n.useState)(!1),k=Object(i.a)(O,2),N=k[0],I=k[1],S=Object(n.useState)(!0),A=Object(i.a)(S,2),w=A[0],L=A[1],x=Object(n.useState)(e.state.endCommentList[a]||[]),D=Object(i.a)(x,2),q=D[0],U=D[1],M=Object(n.useState)(!1),H=Object(i.a)(M,2),P=H[0],T=H[1];Object(n.useEffect)(function(){t.endComment>0?T(!0):T(!1)},[t]),Object(n.useEffect)(function(){var e=F.subscribe(function(){var t=F.getState().endCommentList[a];return U(t),function(){return e()}})},[a]);var Y=Object(n.useCallback)(function(e){h(e.target.value)},[]);Object(n.useEffect)(function(){j.a.get("/api/endComment/".concat(a)).then(function(e){var t=e.data;F.dispatch({type:"getEndCommentList",id:a,endCommentList:t.endCommentList,myLikeEndComment:t.myLikeEndComment,myPoorEndComment:t.myPoorEndComment,cookieUser:t.cookieUser})})},[a]);var z=Object(n.useCallback)(function(e){"\u8d5e"===e?F.dispatch({type:"likeAnsComment",id:a,commentId:t.commentId}):F.dispatch({type:"poorAnsComment",id:a,commentId:t.commentId})},[a,t]),R=Object(n.useCallback)(function(){E(!p)},[p]),Q=Object(n.useCallback)(function(){void 0!==e.state.cookieUser?""!==y.trim()&&(j.a.post("/api/endComment/".concat(a),{content:y,targetUserId:t.userId,commentId:t.commentId}).then(function(e){F.dispatch({type:"postEndComment",id:a,newList:e.data.newEndCommentList,commentId:t.commentId}),L(!1),I(!0)}),h("")):C.dispatch({type:"toSign",sign:!1})},[a,y,e,t]),B=Object(n.useCallback)(function(){L(!w),!0===w&&I(!1)},[w]),W=c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:"ansComment-action"},c.a.createElement("li",{onClick:function(){return z("\u8d5e")},className:o[a]?"activeAnsComment":""},c.a.createElement(g.a,null)," ",t.like),c.a.createElement("li",{onClick:function(){return z("\u8e29")},className:m[a]?"activeAnsComment":""},c.a.createElement(ke.a,null)," \u8e29"),P&&c.a.createElement("li",{onClick:B},c.a.createElement(Ce.a,null),w?" \u67e5\u770b\u56de\u590d":" \u9690\u85cf\u56de\u590d"," "),c.a.createElement("li",{onClick:R},c.a.createElement(u.a,null)," ",p?"\u53d6\u6d88\u56de\u590d":"\u56de\u590d")),p&&c.a.createElement(Oe.a.Item,null,c.a.createElement(Se,{autoSize:!0,placeholder:" \u56de\u590d "+t.name,className:"endComment",style:{width:"535px",marginRight:"15px"},onInput:Y,value:y}),c.a.createElement(Z.a,{htmlType:"submit",type:"primary",onClick:Q},"\u53d1\u9001"))),J=c.a.createElement("div",{className:"ansComment-header"},c.a.createElement("i",{className:"endComment-avatar",style:{backgroundImage:"url(".concat(t.avatar,")")}}),c.a.createElement(_.b,{to:"/user/".concat(t.userId)},t.name,t.userId===t.commentId?"(\u4f5c\u8005)":"")),K=G()(1*t.createdAt).endOf().fromNow(!0)+"\u524d";return c.a.createElement(c.a.Fragment,null,c.a.createElement(je.a,{actions:[W],author:[J],datetime:1*parseInt(K)>1&&/\u5929/g.test(K)?G()(1*t.createdAt).format("MM-DD HH:mm:ss"):K,content:c.a.createElement("p",null,t.content)},!w&&c.a.createElement(c.a.Fragment,null,!N&&q.slice(0,2).map(function(n){return c.a.createElement(Ie,{item:n,commentId:t.commentId,state:e.state,ansCommentId:a})}),q.length>2&&c.a.createElement("span",{className:"all-endComment",onClick:function(){return I(!0)},style:{display:N?"none":"block"}},"\u67e5\u770b\u5168\u90e8",q.length,"\u6761\u56de\u590d"),N&&q.map(function(n){return c.a.createElement(Ie,{item:n,commentId:t.commentId,state:e.state,ansCommentId:a})}))))}function Le(e){var t=e.id,a=Object(n.useState)(""),r=Object(i.a)(a,2),l=r[0],o=r[1],s=Object(n.useCallback)(function(e){o(e.target.value)},[]),m=Object(n.useCallback)(function(){void 0!==e.state.cookieUser?""!==l.trim()&&j.a.post("/api/ansComment/".concat(t),{content:l}).then(function(e){F.dispatch({type:"postComment",id:t,newList:e.data.newAnsCommentList}),L.dispatch({type:"ansCommentList",id:t}),o("")}):C.dispatch({type:"toSign",sign:!1})},[t,l,e]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Oe.a.Item,null,c.a.createElement(Se,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u8bc4\u8bba\u5185\u5bb9",onInput:s,value:l})),c.a.createElement(Oe.a.Item,null,c.a.createElement(Z.a,{htmlType:"submit",type:"primary",onClick:m},"\u6dfb\u52a0\u8bc4\u8bba")))}function xe(e){var t=e.idx,a="question"===e.type,r=function(e){var t="question"===e.type,a=Object(n.useState)(e.post||e.comment),c=Object(i.a)(a,2),r=c[0],l=c[1],o=t?r.postId:r.commentId,s=Object(n.useState)(),m=Object(i.a)(s,2),u=m[0],d=m[1],f=Object(n.useState)(),p=Object(i.a)(f,2),E=p[0],v=p[1],b=Object(n.useState)(),g=Object(i.a)(b,2),y=g[0],h=g[1],O=Object(n.useState)(),j=Object(i.a)(O,2),k=j[0],N=j[1];Object(n.useEffect)(function(){if(t){d(e.state.attention[o]),v(e.state.poors[o]),h(e.state.collect_quesActive[o]),N(e.state.favoriteQues[o]);var a=A.subscribe(function(){var e=A.getState().posts.find(function(e){return e.postId===o});l(e)});return function(){return a()}}d(e.state.likes[o]),v(e.state.commentPoors[o]),h(e.state.collect_commActive[o]),N(e.state.favoriteComment[o]);var n=L.subscribe(function(){var e=L.getState().commenterInfo.find(function(e){return e.commentId===o});l(e||{})});return function(){return n()}},[o,t,e]);var I=Object(n.useCallback)(function(){void 0===e.state.cookieUser?C.dispatch({type:"toSign",sign:!1}):A.dispatch({type:"toAttention",postId:o,like:r.qusLike})},[r,o,e]),S=Object(n.useCallback)(function(){void 0===e.state.cookieUser?C.dispatch({type:"toSign",sign:!1}):t?A.dispatch({type:"poorButton",postId:o,poor:r.poor}):L.dispatch({type:"poorButton",commentId:o,poor:r.poor})},[o,r,t,e]),w=Object(n.useCallback)(function(){void 0===e.state.cookieUser?C.dispatch({type:"toSign",sign:!1}):L.dispatch({type:"likeComment",commentId:o,like:r.like})},[r,o,e]),x=Object(n.useCallback)(function(){void 0===e.state.cookieUser?C.dispatch({type:"toSign",sign:!1}):t?A.dispatch({type:"collect",collectId:o,id:r.posterId}):L.dispatch({type:"collect",collectId:o,id:r.commenterId})},[t,r,e,o]),D=Object(n.useCallback)(function(){void 0===e.state.cookieUser?C.dispatch({type:"toSign",sign:!1}):t?A.dispatch({type:"favorite",favoriteId:o,id:r.posterId}):L.dispatch({type:"favorite",favoriteId:o,id:r.commenterId})},[t,r,e,o]);return{post:r,active:u,poorActive:E,toAttention:I,poorButton:S,likeComment:w,getCollect:x,collectActive:y,getFavorite:D,favoriteActive:k}}(e),l=r.post,o=void 0===l?{}:l,s=r.active,m=r.poorActive,d=r.toAttention,f=r.likeComment,p=r.poorButton,E=r.getCollect,v=r.collectActive,g=r.getFavorite,y=r.favoriteActive,h=Object(n.useState)(!0),O=Object(i.a)(h,2),j=O[0],k=O[1],N=Object(n.useState)(!1),I=Object(i.a)(N,2),S=I[0],w=I[1];Object(n.useEffect)(function(){var e=document.querySelectorAll('[name="content"] p span');if(e[t]&&e[t].offsetHeight>50){var n=document.querySelectorAll('[name="content"] p')[t];n.classList.add("flodContent"),n.style.height=a?"3.2em":"2.68em",w(!0)}},[t,a]);var x=Object(n.useCallback)(function(){var e=document.querySelectorAll('[name="content"] p')[t],n=Array.from(e.classList),c=document.querySelectorAll('[name="content"] p span');n.includes("flodContent")?(e.classList.remove("flodContent"),e.style.height=c[t].offsetHeight+5+"px",k(!1)):(e.classList.add("flodContent"),e.style.height=a?"3.2em":"2.68em",k(!0))},[t]),D=Object(n.useState)(!1),q=Object(i.a)(D,2),U=q[0],M=q[1],F=Object(n.useCallback)(function(){M(!U)},[U]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"postsfooter"},c.a.createElement("button",{type:"button",className:s?"likeActive":"",onClick:a?d:f},c.a.createElement(ve.a,null)," ",a?"\u5173\u6ce8 ".concat(o.qusLike):"\u8d5e\u540c ".concat(o.like)," "),c.a.createElement("button",{type:"button",className:m?"likeActive":"",onClick:p},c.a.createElement(be.a,null),a?" \u8e29 ".concat(o.poor):" \u53cd\u5bf9 ".concat(o.poor)),c.a.createElement("ul",null,c.a.createElement("li",{onClick:F},c.a.createElement(u.a,null)," ",a?"".concat(e.post.answerCount," \u6761\u56de\u7b54"):U?"\u6536\u8d77\u8bc4\u8bba":"".concat(e.comment.ansComments," \u6761\u8bc4\u8bba")),c.a.createElement("li",{onClick:E},c.a.createElement(ge.a,null),v?"\u5df2\u6536\u85cf":"\u6536\u85cf"," "),c.a.createElement("li",{onClick:g},c.a.createElement(b.a,null),y?" \u5df2\u559c\u6b22":" \u559c\u6b22"," ")),S&&c.a.createElement(c.a.Fragment,null,j?c.a.createElement("span",{onClick:x},"\u5168\u90e8\u5c55\u5f00 ",c.a.createElement(ye.a,null)):c.a.createElement("span",{onClick:x},"\u6536\u8d77 ",c.a.createElement(he.a,null)))),U&&!a&&c.a.createElement(Ae,{id:o.commentId}))}var De=a(316),qe=function(){return c.a.createElement("div",{className:"invitation"},c.a.createElement(Ke,null),c.a.createElement(Me,null),c.a.createElement(Fe,null))};function Ue(e){var t=Object(P.g)().id,a=e.state.cookieUser===e.post.name,r="post"===e.type?e.post.postId:e.post.commentId,l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],m=o[1];Object(n.useEffect)(function(){var e=function(){m(!1)};return window.addEventListener("click",e),function(){return window.removeEventListener("click",e)}},[s]);var u=Object(n.useCallback)(function(){"post"===e.type?j.a.post("/api/deletePost/",{postId:r,type:"post"}).then(function(e){A.dispatch({type:"deletePost",postCount:e.data.postNormal.length,posts:e.data.posts})}):j.a.post("/api/deletePost/",{id:t,postId:r,type:"comment"}).then(function(e){L.dispatch({type:"deleteComment",comments:e.data.comments})})},[r,e,t]),d=Object(n.useCallback)(function(e){e.stopPropagation(),m(!s)},[s]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"deletePost",onClick:d},"..."),s&&c.a.createElement("i",{className:"deletePost-flag"}),c.a.createElement("div",{className:s?"deAttachment deAttaHeight":"deAttachment"},c.a.createElement("ul",null,c.a.createElement("li",{onClick:a?u:function(){}},c.a.createElement("span",{className:a?"":"disableDelete"},"\u5220\u9664")),c.a.createElement("li",null,c.a.createElement("span",null,"\u4e3e\u62a5")))))}function Me(){var e=Object(n.useState)(A.getState()),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(new Array(6).fill("")),s=Object(i.a)(l,2),m=s[0],u=s[1],d=Object(n.useState)(!0),f=Object(i.a)(d,2),p=f[0],E=f[1];Object(n.useEffect)(function(){j.a.get("/api/home-data").then(function(e){var t=e.data;A.dispatch(Object(o.a)(Object(o.a)({},t),{},{type:"getData",posts:t.posts.filter(function(e){return"delete"!==e.status})})),E(!1)});var e=A.subscribe(function(){r(A.getState()),u(A.getState().posts||[])});return function(){return e()}},[]);var v=-1;return c.a.createElement("ul",{className:"posts"},m.map(function(e){var t=1*e.createdAt,n=G()(t).endOf().fromNow(!0)+"\u524d";return"delete"!==e.status?(++v,c.a.createElement("li",{key:e.postId},c.a.createElement(De.a,{active:!0,round:!0,loading:p},c.a.createElement("div",{className:"user-date"},c.a.createElement(_.b,{to:"/user/".concat(e.posterId)},c.a.createElement("img",{alt:"",style:{backgroundImage:"url(".concat(e.avatar,")")},className:"userAvatar"})),c.a.createElement("span",{className:"post-username"},c.a.createElement(_.b,{to:"/user/".concat(e.posterId)},e.name),"  ,",c.a.createElement("span",{className:"post-time"},"  \u53d1\u5e03\u4e8e",1*parseInt(n)>1&&/\u5929/g.test(n)?G()(t).format("YYYY-MM-DD HH:mm:ss"):n)),c.a.createElement(Ue,{state:a,post:e,type:"post"})),c.a.createElement("div",{className:"content-div",name:"content"},c.a.createElement(_.b,{className:"post-title",to:"/post-page/".concat(e.postId)},e.title),c.a.createElement("p",{className:"post-content flodContent"},c.a.createElement("span",null,e.content))),c.a.createElement(xe,{post:e,idx:v,type:"question",state:a})))):null}))}function Fe(){return c.a.createElement("div",{className:"over"},c.a.createElement("span",null,"\u6ca1\u6709\u66f4\u591a\u5185\u5bb9\u4e86..."))}var He=a(339),Pe=a(340),Te=a(341),Ye=function(){var e=Object(n.useState)(A.getState()),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(function(){var e=A.subscribe(function(){return r(A.getState())});return function(){return e()}},[]),c.a.createElement("div",{className:"toolbar"},c.a.createElement("div",{className:"toolbar-user-data"},c.a.createElement(ze,{data:a}),c.a.createElement(Re,{cookieUser:a.cookieUser,user:a.user}),c.a.createElement(_e,{data:a})),c.a.createElement(Qe,{data:a}),c.a.createElement(Be,null))};function ze(e){var t=e.data.cookieUser,a=e.data.user||{},r=Object(n.useCallback)(function(){j.a.post("/api/clearCookie/")},[]);return c.a.createElement("span",null,void 0!==t?c.a.createElement(c.a.Fragment,null,"\u6b22\u8fce\u7528\u6237 ",c.a.createElement(_.b,{to:"/user/"+a.userId,className:"denglu-user"},t),c.a.createElement(_.b,{to:"/sign",className:"dengchu",onClick:r},"\u767b\u51fa")):c.a.createElement(c.a.Fragment,null,"\u5f53\u524d\u5904\u4e8e\u672a\u767b\u5f55\u72b6\u6001",c.a.createElement(_.b,{to:"/sign",className:"dengchu"},"\u767b\u5f55/\u6ce8\u518c")))}var Re=Object(P.h)(function(e){var t=e.user||{},a=Object(n.useState)(t.avatar),r=Object(i.a)(a,2),l=r[0],o=r[1],s=Object(n.useState)(!1),m=Object(i.a)(s,2),u=m[0],d=m[1],f=Object(n.useCallback)(function(e){var t=new FormData;t.append("avatar",e.target.files[0]),j.a.post("/api/user-avatar/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){o(e.data)})},[]),p=Object(n.useCallback)(function(){document.querySelector('[name="avatar"]').click()},[]);Object(n.useEffect)(function(){o(t.avatar)},[t]);var E=Object(n.useCallback)(function(a){void 0===e.cookieUser?C.dispatch({type:"toSign",sign:!1}):(e.history.push("/user/".concat(t.userId)),D.dispatch({type:"activeSwitch",active:a}))},[t,e]);return Object(n.useEffect)(function(){function e(){A.dispatch({type:"hoverAvatar",hover:!0})}function t(){A.dispatch({type:"hoverAvatar",hover:!1})}var a=document.querySelector(".user-avatar");a.addEventListener("mouseenter",e),a.addEventListener("mouseleave",t);var n=A.subscribe(function(){return d(A.getState().hover)});return function(){n(),a.removeEventListener("mouseenter",e),a.removeEventListener("mouseleave",t)}},[]),c.a.createElement("div",{className:"user-info"},e.cookieUser?c.a.createElement("div",{className:"user-avatar",onClick:p,style:{backgroundImage:"url(".concat(l,")")}},c.a.createElement("input",{type:"file",name:"avatar",style:{display:"none"},onChange:f}),u&&c.a.createElement("div",{className:"avatarMouseEnter"},c.a.createElement(He.a,null),c.a.createElement("span",null,"\u66f4\u6362\u5934\u50cf"))):c.a.createElement("div",{className:"user-avatar",style:{backgroundImage:"url('/images/default.jpg')"}}),c.a.createElement("ul",{className:"user-bar"},c.a.createElement("li",{onClick:function(){return E(0)}},c.a.createElement("span",null,c.a.createElement(v.a,null),"\u5168\u90e8\u52a8\u6001")),c.a.createElement("li",{onClick:function(){return E(5)}},c.a.createElement("span",null,c.a.createElement(ge.a,null),"\u6211\u7684\u6536\u85cf")),c.a.createElement("li",{onClick:function(){return E(4)}},c.a.createElement("span",null,c.a.createElement(b.a,null),"\u6211\u7684\u5173\u6ce8")),c.a.createElement("li",{onClick:function(){return E(1)}},c.a.createElement("span",null,c.a.createElement(Pe.a,null),"\u5386\u53f2\u56de\u7b54"))))});function _e(e){var t=e.data||{},a=t.user||{},r=Object(n.useCallback)(function(e){if(e.stopPropagation(),void 0!==t.cookieUser){var a=document.querySelector(".user-sign-text");a.setAttribute("contenteditable",!0),a.focus(),a.onblur=function(){j.a.post("/api/sign-edit/",{user_sign:a.textContent}),a.setAttribute("contenteditable",!1)}}else C.dispatch({type:"toSign",sign:!1})},[t]),l=Object(n.useRef)(""),o=Object(n.useCallback)(function(e){var t=e.target.textContent;30===t.length&&(l.current=t),t.length>30&&(e.target.innerText=l.current)},[]);return c.a.createElement("div",{className:"user-sign"},c.a.createElement("i",{className:"el-icon-edit",onClick:r},c.a.createElement(Te.a,{style:{fontSize:"16px",marginRight:"8px"}})," "),t.cookieUser?c.a.createElement("span",{className:"user-sign-text",onInput:o},a?a.sign:t.poster.sign):c.a.createElement("span",null,"\u5f53\u524d\u8fd8\u672a\u767b\u5f55\uff0c\u8d76\u5feb\u524d\u5f80\u767b\u5f55\u5427\uff01"))}function Qe(){var e=Object(n.useState)(A.getState()),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),s=Object(i.a)(l,2),m=s[0],u=s[1];Object(n.useEffect)(function(){j.a.get("/api/home-data").then(function(e){var t=e.data;A.dispatch(Object(o.a)({type:"getData"},t)),u(!1)});var e=A.subscribe(function(){return r(A.getState())});return function(){return e()}},[]);var d=(a.recommend||new Array(15).fill("")).filter(function(e){return"delete"!==e.status});return c.a.createElement("div",{className:"recommend"},c.a.createElement("h3",null,"\u70ed\u95e8\u95ee\u9898"),c.a.createElement("ul",{className:"recommend-list"},d.slice(0,15).map(function(e){return c.a.createElement("li",{key:e.postId},c.a.createElement(De.a,{active:!0,round:!0,paragraph:!1,loading:m},c.a.createElement(_.b,{to:"/post-page/"+e.postId,title:e.title},e.title)))})))}function Be(){return c.a.createElement("div",{className:"footer-bar"},c.a.createElement("p",null," \u9648\u542c\u6c34 \u7136\u4e5f\u6307\u5357 \u7136\u4e5f\u534f\u8bae \u7136\u4e5f\u9690\u79c1\u4fdd\u62a4\u6307\u5f15 ",c.a.createElement("br",null),"\u5e94\u7528\u5de5\u4f5c\u7533\u8bf7\u5f00\u901a\u7136\u4e5f\u673a\u6784\u53f7",c.a.createElement("br",null),"\u4fb5\u6743\u4e3e\u62a5\u7f51\u4e0a\u6709\u5bb3\u4fe1\u606f\u4e3e\u62a5\u4e13\u533a",c.a.createElement("br",null),"\u4eac ICP \u8bc1 110745 \u53f7",c.a.createElement("br",null),"\u4eac ICP \u5907 13052560 \u53f7 - 1",c.a.createElement("br",null),"\u4eac\u516c\u7f51\u5b89\u5907 11010802010035 \u53f7",c.a.createElement("br",null),"\u4e92\u8054\u7f51\u836f\u54c1\u4fe1\u606f\u670d\u52a1\u8d44\u683c\u8bc1\u4e66",c.a.createElement("br",null),"\uff08\u4eac\uff09- \u975e\u7ecf\u8425\u6027 - 2017 - 0067\u8fdd\u6cd5\u548c\u4e0d\u826f\u4fe1\u606f\u4e3e\u62a5\uff1a010-82716601",c.a.createElement("br",null)," \u513f\u7ae5\u8272\u60c5\u4fe1\u606f\u4e3e\u62a5\u4e13\u533a",c.a.createElement("br",null),"\u8bc1\u7167\u4e2d\u5fc3",c.a.createElement("br",null),"\u8054\u7cfb\u6211\u4eec \xa9 2020 \u7136\u4e5f"))}var We=function(){return c.a.createElement("div",{className:"body-container"},c.a.createElement(qe,null),c.a.createElement(Ye,null))},Je=function(){var e=Object(n.useState)(A.getState()),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(function(){j.a.get("/api/home-data").then(function(e){var t=e.data;A.dispatch(Object(o.a)(Object(o.a)({type:"getData"},t),{},{posts:t.posts.filter(function(e){return"delete"!==e.status})}))});var e=A.subscribe(function(){return r(A.getState())});return function(){return e()}},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(le,null,c.a.createElement(Ge,{state:a})),a.question&&c.a.createElement(Ee,null),c.a.createElement(We,null))};function Ge(e){var t=e.state,a=Object(n.useCallback)(function(){void 0!==t.cookieUser?A.dispatch({type:"question",question:!0}):C.dispatch({type:"toSign",sign:!1})},[t]);return c.a.createElement("div",{className:"top-nav home-slider-nav"},c.a.createElement(_.b,{to:"/",className:"home-logo"},c.a.createElement("img",{src:"/images/icon2.jpg",alt:"zhi \u547c"})),c.a.createElement(Ke,null),c.a.createElement("div",{className:"search-div"},c.a.createElement("label",{className:"search-label"},c.a.createElement("input",{type:"search",name:"search",className:"search",placeholder:"\u529f\u80fd\u5c1a\u672a\u5b8c\u5584"}),c.a.createElement(s.a,{style:{fontSize:"20px",color:"#9AA3B5"}})),c.a.createElement("input",{type:"button",className:"question",value:"\u53d1\u5e16",onClick:a})))}function Ke(){return c.a.createElement("ul",{className:"home-list"},c.a.createElement("li",null,c.a.createElement(_.b,{to:"/"},"\u63a8\u8350")),c.a.createElement("li",null,c.a.createElement(_.b,{to:"/"},"\u5173\u6ce8")),c.a.createElement("li",null,c.a.createElement(_.b,{to:"/"},"\u70ed\u699c")))}function $e(){var e=Object(n.useState)(I.getState()),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(function(){var e=I.subscribe(function(){return r(I.getState())});return function(){return e()}}),c.a.createElement("div",{className:"main"},c.a.createElement("img",{src:"../images/login-top2.png",alt:"logo",className:"logo"}),a.sucessSignup&&c.a.createElement(Ve,{props:a}),c.a.createElement(W,{state:a}),c.a.createElement(ne,null))}function Ve(e){return c.a.createElement("div",{className:"success-bg"},c.a.createElement("div",{className:"suc-transition success"},c.a.createElement("img",{src:"./images/loading.gif",alt:"\u6ce8\u518c\u6210\u529f"}),c.a.createElement("label",{className:"label-visi"},c.a.createElement("span",null,"\u6ce8\u518c\u6210\u529f\uff01 ")," \u70b9\u51fb ",c.a.createElement(_.b,{to:"/sign"},"\u8fd4\u56de\u767b\u9646\u754c\u9762"))))}a(290);var Xe=function(){return c.a.createElement("div",{className:"login-container"},c.a.createElement($e,null))},Ze=a(32),et=a.n(Ze),tt=a(53),at=(a(291),function(e){var t=Object(n.useState)(L.getState()),a=Object(i.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)(function(){var e=L.subscribe(function(){return l(L.getState())});return function(){return e()}}),c.a.createElement("div",{className:"body-container post-container"},c.a.createElement(nt,{data:r,loading:e.loading}),c.a.createElement(ot,{data:r}))});function nt(e){var t=e.data.commenterInfo||[];return c.a.createElement("div",{className:"invitation"},e.data.writeAnswer?c.a.createElement(ct,null):"",c.a.createElement("div",{className:"comment-main"},c.a.createElement("ul",{className:"comments-list"},c.a.createElement(rt,{commenterInfo:t,loading:e.loading}))),c.a.createElement(Fe,null))}function ct(){var e=Object(P.g)().id,t=Object(n.useCallback)(function(){var t={content:document.querySelector(".editing").value,createdAt:Date.now()};function a(){return(a=Object(tt.a)(et.a.mark(function a(){return et.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.a.post("/api/post-page/".concat(e),t).then(function(e){L.dispatch({type:"postAnswer",commenterInfo:e.data})}).catch(function(e){401===e.response.status&&C.dispatch({type:"toSign",sign:!1})});case 2:case"end":return a.stop()}},a)}))).apply(this,arguments)}!function(){a.apply(this,arguments)}()},[e]);return c.a.createElement("div",{className:"answer-outer"},c.a.createElement("textarea",{className:"editing",placeholder:"\u5199\u56de\u7b54..."}),c.a.createElement("div",{className:"submit-answer"},c.a.createElement("span",{onClick:t},"\u63d0\u4ea4\u56de\u7b54")))}function rt(e){var t=Object(n.useState)(L.getState()),a=Object(i.a)(t,2),r=a[0],l=a[1];Object(n.useEffect)(function(){var e=L.subscribe(function(){return l(L.getState())});return function(){return e()}},[]);var o=(r.commenterInfo||new Array(5).fill("")).filter(function(e){return"delete"!==e.status}),s=-1;return e.loading||0!==o.length?o.map(function(t){return s++,c.a.createElement(De.a,{loading:e.loading},c.a.createElement(lt,{item:t,data:r,idx:s,key:t.createdAt}))}):c.a.createElement("li",{style:{color:"#8590A6"}},"\u5f53\u524d\u5e16\u5b50\u8fd8\u6ca1\u6709\u56de\u7b54\uff0c\u8d76\u7d27\u53bb\u6dfb\u52a0\u56de\u7b54\u5427\uff01")}function lt(e){var t=e.item,a=e.data,n=e.idx,r=1*t.createdAt,l=G()(r).endOf().fromNow(!0)+"\u524d";return c.a.createElement("li",{key:t.createdAt},c.a.createElement("div",{className:"commenter-info"},c.a.createElement(_.b,{to:"/user/".concat(t.userId)},c.a.createElement("i",{className:"commenter-avatar",style:{backgroundImage:"url(".concat(t.avatar,")")}})),c.a.createElement("div",{className:"commenter-flag"},c.a.createElement(_.b,{className:"commenter-name",to:"/user/".concat(t.userId)},t.name),c.a.createElement("span",{className:"commenter-sign"},t.sign),c.a.createElement(Ue,{state:a,post:t,type:"comment"}))),c.a.createElement("div",{className:"content-div ",name:"content"},c.a.createElement("p",{className:"flodContent"},c.a.createElement("span",null,t.content)),c.a.createElement("span",{className:"answerAt"},"\u53d1\u5e03\u4e8e \xa0",1*parseInt(l)>1&&/\u5929/g.test(l)?G()(1*t.createdAt).format("YYYY-MM-DD HH:mm:ss"):l),c.a.createElement("div",{className:"commenter-footer"},c.a.createElement(xe,{comment:t,idx:n,state:a}))))}function ot(e){var t=e.data||{},a=t.poster||{};return c.a.createElement("div",{className:"toolbar"},c.a.createElement("div",{className:"toolbar-user-data"},c.a.createElement("h4",{style:{color:"rgb(118,131,155)"}},"\u5173\u4e8e\u63d0\u95ee\u8005"),a.name===t.cookieUser?c.a.createElement(c.a.Fragment,null,c.a.createElement(Re,{cookieUser:t.cookieUser,user:t.poster}),c.a.createElement(_e,{data:t})):c.a.createElement(it,{poster:a})),c.a.createElement(Qe,null),c.a.createElement(Be,null))}var it=Object(P.h)(function(e){var t=e.poster,a=Object(n.useCallback)(function(a,n){e.history.push("/user/".concat(t.userId)),D.dispatch({type:"activeSwitch",active:a}),void 0!==n&&D.dispatch({type:"collectActive",active:n})},[t,e.history]);return c.a.createElement("div",{className:"posterInfo"},c.a.createElement("div",{className:"posterInfo-user"},c.a.createElement(_.b,{to:"/user/".concat(t.userId)},c.a.createElement("i",{className:"post-avatar",style:{backgroundImage:"url(".concat(t.avatar,")")}})),c.a.createElement("div",{className:"poster-userInfo"},c.a.createElement(_.b,{to:"/user/".concat(t.userId)},c.a.createElement("h3",null,t.name)),c.a.createElement("span",null,t.sign))),c.a.createElement("div",null,c.a.createElement("ul",{className:"posterInfo-other"},c.a.createElement("li",{onClick:function(){return a(1)}},c.a.createElement("span",null,"\u56de\u7b54"),c.a.createElement("br",null),t.commentCount),c.a.createElement("li",{onClick:function(){return a(2)}},c.a.createElement("span",null,"\u63d0\u95ee"),c.a.createElement("br",null),t.postCount),c.a.createElement("li",{onClick:function(){return a(4,2)}},c.a.createElement("span",null,"\u5173\u6ce8\u8005"),c.a.createElement("br",null),t.fans)),c.a.createElement(te,{careInfo:t})))}),st=a(342),mt=a(343),ut=(a(76),function(e){var t=e.userId,a=Object(P.g)().id,r=Object(n.useState)([]),l=Object(i.a)(r,2),o=l[0],s=l[1];Object(n.useEffect)(function(){var e=U.subscribe(function(){return s(U.getState().myCares)});return function(){return e()}},[]);var m=Object(n.useRef)();Object(n.useEffect)(function(){j.a.get("/api/get-care/".concat(t)).then(function(e){U.dispatch({type:"getCare",myCares:e.data.myCares})}),j.a.get("/api/invite/".concat(a)).then(function(e){L.dispatch({type:"getInitial",inviteList:e.data.inviteList})})},[a,t]),Object(n.useEffect)(function(){var e=document.querySelector(".invite-outer");return e.onmousewheel=function(e){e.preventDefault()},function(){return e.onmousewheel=null}},[]);var u=Object(n.useCallback)(function(){L.dispatch({type:"invite",invite:!1})},[]);return Object(n.useEffect)(function(){function e(e){e.stopPropagation(),e.target!==m.current&&e.target!==document.body||u()}return window.addEventListener("click",e),function(){return window.removeEventListener("click",e)}},[u]),c.a.createElement("div",{className:"invite-outer",ref:m},c.a.createElement("div",{className:"invite-main"},c.a.createElement("div",{className:"invite-header"},c.a.createElement("h2",null,"\u9009\u62e9\u60f3\u8981\u9080\u8bf7\u7684\u7528\u6237",c.a.createElement("span",null," * \u53ea\u80fd\u9080\u8bf7\u5173\u6ce8\u7528\u6237\uff0c\u8bf7\u591a\u591a\u5145\u5b9e\u5173\u6ce8\u5217\u8868\u5427\uff01")),c.a.createElement(Z.a,{type:"primary",size:"middle",onClick:u},"\u5b8c\u6210")),c.a.createElement("ul",{className:"invite-list"},0===o.length&&c.a.createElement("li",{className:"no-invite"},c.a.createElement("span",null,"\u8fd8\u6ca1\u6709\u5173\u6ce8\u8fc7\u7528\u6237\uff0c\u9080\u8bf7\u5217\u8868\u592a\u51b7\u6e05\u5566\uff01")),o.map(function(e){return c.a.createElement("li",{key:e.createdAt},c.a.createElement(dt,{invite:e}))}))))});function dt(e){var t=e.invite,a=Object(P.g)().id,r=Object(n.useState)(!1),l=Object(i.a)(r,2),o=l[0],s=l[1],m=Object(n.useState)(!1),u=Object(i.a)(m,2),d=u[0],f=u[1];Object(n.useEffect)(function(){function e(){var e=(L.getState().inviteList||[]).some(function(e){return e.targetId===t.careId});s(e)}e();var a=L.subscribe(function(){return e()});return function(){return a()}},[t]);var p=Object(n.useCallback)(function(e){j.a.post("/api/invite",{type:e,postId:a,targetId:t.careId,targetName:t.careName}).then(function(e){L.dispatch({type:"upDateInvite",inviteList:e.data.newInvites})})},[a,t]);return c.a.createElement("div",{className:"invite-item"},c.a.createElement(_.b,{to:"/user/".concat(t.careId)},c.a.createElement("i",{style:{backgroundImage:"url(".concat(t.avatar,")")},className:"invite-avatar"})),c.a.createElement("div",{className:"invite-userInfo"},c.a.createElement(_.b,{to:"/user/".concat(t.careId)},c.a.createElement("h4",null,t.careName,c.a.createElement("span",null,"  -  ",t.industry))),c.a.createElement("span",null,t.sign)),o?c.a.createElement(Z.a,{type:"ghost",onClick:function(){return p("revoke")},style:{width:"100px",color:"rgb(138 138 138)"},onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)}},d?"\u53d6\u6d88\u9080\u8bf7":"\u5df2\u9080\u8bf7"):c.a.createElement(Z.a,{type:"ghost",style:{width:"100px",borderColor:"#40a9ff",color:"#40a9ff"},onClick:function(){return p("active")}},"\u9080\u8bf7\u56de\u7b54"))}var ft=function(){var e=Object(P.g)().id,t=void 0===e?1:e,a=Object(n.useState)(L.getState()),r=Object(i.a)(a,2),l=r[0],s=r[1],m=Object(n.useState)(!1),u=Object(i.a)(m,2),d=u[0],f=u[1],p=Object(n.useState)(!0),E=Object(i.a)(p,2),v=E[0],b=E[1];return Object(n.useEffect)(function(){var e=L.subscribe(function(){return f(L.getState().invite)});return function(){return e()}},[]),Object(n.useEffect)(function(){(function(){var e=Object(tt.a)(et.a.mark(function e(){var a;return et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/post-page/".concat(t));case 2:a=e.sent,L.dispatch(Object(o.a)({type:"getInitial"},a.data)),b(!1);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()();var e=L.subscribe(function(){return s(L.getState())});return function(){return e()}},[t]),c.a.createElement(c.a.Fragment,null,c.a.createElement(le,{page:"post"},c.a.createElement(pt,{data:l})),c.a.createElement(Et,null,c.a.createElement(vt,{data:l,loading:v}),c.a.createElement(gt,{data:l})),c.a.createElement(at,{data:l,loading:v}),d&&c.a.createElement(ut,{id:t}))};function pt(e){var t=e.data,a=t.post||{},r=Object(n.useCallback)(function(){L.dispatch({type:"writeAnswer",writeAnswer:!t.writeAnswer}),document.documentElement.scrollTop=0,document.querySelector(".nav-slider-outer").style.top="0px"},[t]);return c.a.createElement("div",{className:"post-nav-slider"},c.a.createElement("h1",{title:a.title},a.title),c.a.createElement("div",{className:"post-footer-list"},c.a.createElement(bt,{data:t}),c.a.createElement("div",{className:"answer",onClick:r},c.a.createElement(p.a,null),"\u5199\u56de\u7b54")))}function Et(e){return c.a.createElement("div",{className:"post-info post-top"},e.children)}function vt(e){var t=e.data,a=t.commenterInfo||[],r=e.data.post||{},l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],m=o[1],d=Object(n.useState)(!0),f=Object(i.a)(d,2),E=f[0],v=f[1],b=a.filter(function(e){return"delete"!==e.status}),g=Object(n.useCallback)(function(){L.dispatch({type:"writeAnswer",writeAnswer:!t.writeAnswer})},[t]);Object(n.useEffect)(function(){var e=document.querySelector(".post-content span"),t=document.querySelector(".post-content");e&&e.offsetHeight>=72&&(t.style.height="72px",m(!0))},[e.loading]);var y=Object(n.useCallback)(function(){var e=document.querySelector(".post-content"),t=document.querySelector(".post-content span");E?(e.style.display="block",e.style.height=t.offsetHeight+3+"px",v(!1)):(e.style.display="-webkit-box",e.style.height="72px",v(!0))},[E]),h=Object(n.useCallback)(function(){void 0!==t.cookieUser?L.dispatch({type:"invite",invite:!0}):C.dispatch({type:"toSign",sign:!1})},[t]);return c.a.createElement("div",{className:"post-main"},c.a.createElement(De.a,{title:{width:300},paragraph:!1,loading:e.loading,round:!0},c.a.createElement("h1",null,r.title)),c.a.createElement(De.a,{active:!0,loading:e.loading,paragraph:{rows:2},round:!0,title:!1},c.a.createElement("p",{className:"post-content"},c.a.createElement("span",null,r.content))),c.a.createElement("div",{className:"post-footer-list"},c.a.createElement(bt,{data:t}),c.a.createElement("div",{className:"answer",onClick:g},c.a.createElement(p.a,null),"\u5199\u56de\u7b54"),c.a.createElement("div",{className:"admire-qus",onClick:h},c.a.createElement(st.a,null),"\u9080\u8bf7\u56de\u7b54"),c.a.createElement("ul",{className:"other-info"},c.a.createElement("li",{className:"comments-count"},c.a.createElement(u.a,null),c.a.createElement("span",null,b.length,"\xa0\u6761\u56de\u7b54")),c.a.createElement("li",{className:"pageview"},c.a.createElement(mt.a,null),c.a.createElement("span",null,r.pageview,"\xa0\u6d4f\u89c8\u91cf")),s&&c.a.createElement("li",{className:"hide",onClick:y},c.a.createElement("span",null,E?"\u5c55\u5f00":"\u6536\u8d77")))))}function bt(e){var t=e.data,a=Object(P.g)().id,r=Object(n.useState)(L.getState().attention),l=Object(i.a)(r,2),o=l[0],s=l[1],m=Object(n.useRef)(),u=Object(n.useCallback)(function(){void 0===t.cookieUser?C.dispatch({type:"toSign",sign:!1}):L.dispatch({type:"toAttention",attention:!o,pageId:a})},[o,a,t]);return Object(n.useEffect)(function(){var e=L.subscribe(function(){return s(L.getState().attention)});return o&&(m.current.onmouseenter=function(){m.current.innerText="\u53d6\u6d88\u5173\u6ce8"},m.current.onmouseleave=function(){m.current.innerText="\u5df2\u5173\u6ce8"}),function(){e(),m.current.onmouseenter=null,m.current.onmouseleave=null}},[o,a]),c.a.createElement("div",{className:o?"revoke":"guanzhu",onClick:u,ref:m},o?"\u5df2\u5173\u6ce8":"\u5173\u6ce8\u95ee\u9898")}function gt(e){var t=e.data,a=(t.commenterInfo||[]).filter(function(e){return"delete"!==e.status}),n=t.post&&1*t.post.createdAt,r=G()(n).endOf().fromNow(!0)+"\u524d";return c.a.createElement("div",{className:"post-other"},c.a.createElement("ul",null,c.a.createElement("li",{className:"post-other-line"},c.a.createElement("span",null,"\u5173\u6ce8\u6570"),c.a.createElement("br",null),t.attentionLength),c.a.createElement("li",null,c.a.createElement("span",null,"\u56de\u7b54\u6570"),c.a.createElement("br",null),a.length)),c.a.createElement("div",{className:"post-other-time"},c.a.createElement("span",null,"\u53d1\u5e16\u65f6\u95f4\uff1a"),1*parseInt(r)>1&&/\u5929/g.test(r)?G()(n).format("YYYY-MM-DD HH:mm:ss"):r))}var yt=function(){var e=Object(n.useState)(A.getState()),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(function(){var e=A.subscribe(function(){return r(A.getState())});return function(){return e()}},[]),c.a.createElement(c.a.Fragment,null,a.question&&c.a.createElement(Ee,null),c.a.createElement(ft,null))},ht=a(10),Ot=a(345),jt=a(346),kt=a(347),Ct=a(348),Nt=a(318),It=a(314),St=a(344),At=(a(292),function(){var e=Object(n.useState)(D.getState()),t=Object(i.a)(e,2),a=t[0],r=t[1],l=a.userInfo,o=void 0===l?{}:l;Object(n.useEffect)(function(){var e=D.subscribe(function(){return r(D.getState())});return function(){return e()}},[]);var s=Object(n.useCallback)(function(){D.dispatch({type:"editEnd",edit:!1})},[]);return c.a.createElement("div",{className:"edit-container-bg"},c.a.createElement("div",{className:"edit-outer"},c.a.createElement("form",{action:"/api/edit-userInfo",method:"post",className:"edit-form"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("h2",null,"\u738b\u53f8\u5f92"),c.a.createElement("span",{style:{fontWeight:"100"}},"* \u9f20\u6807\u79fb\u5230\u7528\u6237\u5934\u50cf\u5373\u53ef\u4fee\u6539\u5934\u50cf"),c.a.createElement(Z.a,{onClick:s,type:"primary"},"\u4fee\u6539\u5b8c\u6210")),c.a.createElement(wt,{sex:o.sex}),c.a.createElement(Dt,{birthday:o.birthday}),c.a.createElement(xt,{address:o.address}),c.a.createElement(Lt,{sign:o.sign}),c.a.createElement(qt,{industry:o.industry}),c.a.createElement(Mt,{introduction:o.introduction}),c.a.createElement(Ft,{sociality:o.sociality})))))});function wt(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(e.sex),s=Object(i.a)(o,2),m=s[0],u=s[1],d=Object(n.useCallback)(function(){l(!r)},[r]),f=Object(n.useCallback)(function(){j.a.post("/api/edit-userInfo",{type:"sex",sex:m}).then(function(e){D.dispatch({type:"editUserInfo",sex:m}),l(!1)})},[m]);return c.a.createElement("li",{className:"edit-sex"},c.a.createElement("span",null,"\u6027\u522b"),r?c.a.createElement("div",null,c.a.createElement(Nt.a.Group,{value:m,onChange:function(){return u("man"===m?"female":"man")}},c.a.createElement(Nt.a,{value:"man",checked:"man"===e.sex},"\u7537"),c.a.createElement(Nt.a,{value:"female",checked:"female"===e.sex},"\u5973")),c.a.createElement("div",{className:"saveEdit"},c.a.createElement(Z.a,{size:"small",type:"primary",onClick:f},"\u4fdd\u5b58"),c.a.createElement(Z.a,{size:"small",onClick:function(){return l(!1)}},"\u53d6\u6d88"))):c.a.createElement("div",{className:"saveEdit"},c.a.createElement("span",null,"man"===m?"\u7537":"\u5973"),c.a.createElement(St.a,{onClick:d,style:{color:"#40a9ff"}})))}function Lt(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(e.sign),s=Object(i.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),p=f[0],E=f[1],v=Object(n.useCallback)(function(){l(!r)},[r]),b=Object(n.useCallback)(function(){j.a.post("/api/edit-userInfo",{type:"sign",sign:m}).then(function(e){D.dispatch({type:"editUserInfo",sign:m}),l(!1)})},[m]),g=Object(n.useCallback)(function(e){e.target.value.length>30?E(!0):(E(!1),u(e.target.value))},[]);return c.a.createElement("li",{className:"edit-sign"},c.a.createElement("span",null,"\u4e00\u53e5\u8bdd\u4ecb\u7ecd"),r?c.a.createElement("div",null,c.a.createElement(X.a,{value:m,onInput:g,style:p?{borderColor:"red"}:{}}),c.a.createElement("div",{className:"saveEdit"},c.a.createElement(Z.a,{size:"small",type:"primary",onClick:b},"\u4fdd\u5b58"),c.a.createElement(Z.a,{size:"small",onClick:function(){l(!1),u(e.sign)}},"\u53d6\u6d88"))):c.a.createElement("div",{className:"saveEdit"},c.a.createElement("span",null,m),c.a.createElement(St.a,{onClick:v,style:{color:"#40a9ff"}})))}function xt(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(e.address),s=Object(i.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),p=f[0],E=f[1],v=Object(n.useCallback)(function(){l(!r)},[r]),b=Object(n.useCallback)(function(){j.a.post("/api/edit-userInfo",{type:"address",address:m}).then(function(e){D.dispatch({type:"editUserInfo",address:m}),l(!1)})},[m]),g=Object(n.useCallback)(function(e){e.target.value.length>10?E(!0):(E(!1),u(e.target.value))},[]);return c.a.createElement("li",{className:"edit-address"},c.a.createElement("span",null,"\u73b0\u5c45\u5730"),r?c.a.createElement("div",null,c.a.createElement(X.a,{value:m,onInput:g,style:p?{borderColor:"red"}:{}}),c.a.createElement("div",{className:"saveEdit"},c.a.createElement(Z.a,{size:"small",type:"primary",onClick:b},"\u4fdd\u5b58"),c.a.createElement(Z.a,{size:"small",onClick:function(){l(!1),u(e.address)}},"\u53d6\u6d88"))):c.a.createElement("div",{className:"saveEdit"},c.a.createElement("span",null,e.address),c.a.createElement(St.a,{onClick:v,style:{color:"#40a9ff"}})))}function Dt(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(e.birthday),s=Object(i.a)(o,2),m=s[0],u=s[1],d=Object(n.useCallback)(function(){l(!r)},[r]),f=Object(n.useCallback)(function(){j.a.post("/api/edit-userInfo",{type:"birthday",birthday:m}).then(function(e){D.dispatch({type:"editUserInfo",birthday:m}),l(!1)})},[m]),p=Object(n.useCallback)(function(e){var t=document.querySelector(".edit-birthday input");u(t.value)},[]);return c.a.createElement("li",{className:"edit-birthday"},c.a.createElement("span",null,"\u751f\u65e5"),r?c.a.createElement("div",null,c.a.createElement(It.a,{onChange:p}),c.a.createElement("div",{className:"saveEdit"},c.a.createElement(Z.a,{size:"small",type:"primary",onClick:f},"\u4fdd\u5b58"),c.a.createElement(Z.a,{size:"small",onClick:function(){l(!1),u(e.birthday)}},"\u53d6\u6d88"))):c.a.createElement("div",{className:"saveEdit"},c.a.createElement("span",null,m.slice(5)),c.a.createElement(St.a,{onClick:d,style:{color:"#40a9ff"}})))}function qt(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(e.industry),s=Object(i.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),p=f[0],E=f[1],v=Object(n.useCallback)(function(){l(!r)},[r]),b=Object(n.useCallback)(function(){j.a.post("/api/edit-userInfo",{type:"industry",industry:m}).then(function(e){D.dispatch({type:"editUserInfo",industry:m}),l(!1)})},[m]),g=Object(n.useCallback)(function(e){e.target.value.length>10?E(!0):(E(!1),u(e.target.value))},[]);return c.a.createElement("li",{className:"edit-industry"},c.a.createElement("span",null,"\u6240\u5728\u884c\u4e1a"),r?c.a.createElement("div",null,c.a.createElement(X.a,{value:m,onInput:g,style:p?{borderColor:"red"}:{}}),c.a.createElement("div",{className:"saveEdit"},c.a.createElement(Z.a,{size:"small",type:"primary",onClick:b},"\u4fdd\u5b58"),c.a.createElement(Z.a,{size:"small",onClick:function(){l(!1),u(e.industry)}},"\u53d6\u6d88"))):c.a.createElement("div",{className:"saveEdit"},c.a.createElement("span",null,e.industry),c.a.createElement(St.a,{onClick:v,style:{color:"#40a9ff"}})))}var Ut=X.a.TextArea;function Mt(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(e.introduction),s=Object(i.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),p=f[0],E=f[1],v=Object(n.useCallback)(function(){l(!r)},[r]),b=Object(n.useCallback)(function(){j.a.post("/api/edit-userInfo",{type:"introduction",introduction:m}).then(function(e){D.dispatch({type:"editUserInfo",introduction:m}),l(!1)})},[m]),g=Object(n.useCallback)(function(e){e.target.value.length>150?E(!0):(E(!1),u(e.target.value))},[]);return c.a.createElement("li",{className:"edit-introduction"},c.a.createElement("span",null,"\u4e2a\u4eba\u7b80\u4ecb"),r?c.a.createElement("div",null,c.a.createElement(Ut,{value:m,onInput:g,style:p?{borderColor:"red"}:{}}),c.a.createElement("div",{className:"saveEdit"},c.a.createElement(Z.a,{size:"small",type:"primary",onClick:b},"\u4fdd\u5b58"),c.a.createElement(Z.a,{size:"small",onClick:function(){l(!1),u(e.introduction)}},"\u53d6\u6d88"))):c.a.createElement("div",{className:"saveEdit"},c.a.createElement("span",null,m),c.a.createElement(St.a,{onClick:v,style:{color:"#40a9ff"}})))}function Ft(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(e.sociality),s=Object(i.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),p=f[0],E=f[1],v=Object(n.useCallback)(function(){l(!r)},[r]),b=Object(n.useCallback)(function(){j.a.post("/api/edit-userInfo",{type:"sociality",sociality:m}).then(function(e){D.dispatch({type:"editUserInfo",sociality:m}),l(!1)})},[m]),g=Object(n.useCallback)(function(e){e.target.value.length>50?E(!0):(E(!1),u(e.target.value))},[]);return c.a.createElement("li",{className:"edit-industry"},c.a.createElement("span",null,"\u793e\u4ea4\u5730\u5740"),r?c.a.createElement("div",null,c.a.createElement(X.a,{value:m,onInput:g,style:p?{borderColor:"red"}:{}}),c.a.createElement("div",{className:"saveEdit"},c.a.createElement(Z.a,{size:"small",type:"primary",onClick:b},"\u4fdd\u5b58"),c.a.createElement(Z.a,{size:"small",onClick:function(){l(!1),u(e.sociality)}},"\u53d6\u6d88"))):c.a.createElement("div",{className:"saveEdit"},c.a.createElement("span",null,m),c.a.createElement(St.a,{onClick:v,style:{color:"#40a9ff"}})))}var Ht=function(){return c.a.createElement("div",{className:"user-page "},c.a.createElement("div",{className:"user-header-bg"},c.a.createElement(Pt,null)))};function Pt(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],r=t[1],l=a.userInfo||{},o=Object(n.useState)(!0),s=Object(i.a)(o,2),m=s[0],u=s[1];Object(n.useEffect)(function(){a.userInfo&&u(!1)},[a.userInfo]),Object(n.useEffect)(function(){var e=D.subscribe(function(){return r(D.getState())});return function(){return e()}},[]);var d=Object(n.useState)(l.avatar),f=Object(i.a)(d,2),p=f[0],E=f[1],v=Object(n.useState)(!1),b=Object(i.a)(v,2),g=b[0],y=b[1],h=Object(n.useCallback)(function(e){var t=new FormData;t.append("avatar",e.target.files[0]),j.a.post("/api/user-avatar/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){E(e.data)})},[]),O=Object(n.useCallback)(function(){document.querySelector('[name="avatar"]').click()},[]);Object(n.useEffect)(function(){E(l.avatar)},[l]),Object(n.useEffect)(function(){function e(){A.dispatch({type:"hoverAvatar",hover:!0})}function t(){A.dispatch({type:"hoverAvatar",hover:!1})}var a=document.querySelector(".User-avatar");a.addEventListener("mouseenter",e),a.addEventListener("mouseleave",t);var n=A.subscribe(function(){return y(A.getState().hover)});return function(){n(),a.removeEventListener("mouseenter",e),a.removeEventListener("mouseleave",t)}},[l]);var k=Object(n.useState)(!1),C=Object(i.a)(k,2),N=C[0],I=C[1],S=Object(n.useCallback)(function(){I(!N)},[N]),w=Object(n.useCallback)(function(){D.dispatch({type:"editState",edit:!0})},[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"user-header"},c.a.createElement("div",{className:"UserCover-bg"}),c.a.createElement("div",{className:"User-avatar",style:{backgroundImage:"url(".concat(p,")")}},c.a.createElement(De.a,{loading:m,active:!0,avatar:{size:140,shape:"square"}},c.a.createElement("input",{type:"file",name:"avatar",style:{display:"none"},onChange:h}),g&&l.name===a.cookieUser&&c.a.createElement("div",{className:"avatarMouseEnter",onClick:O},c.a.createElement(Ot.a,{style:{fontSize:"18px"}}),c.a.createElement("span",null,"\u66f4\u6362\u5934\u50cf")))),c.a.createElement("div",{className:N?"UserDetailed UserDetailed-flod":"UserDetailed"},c.a.createElement("div",{className:"User-data"},c.a.createElement(De.a,{loading:m,active:!0,round:!0},c.a.createElement("h2",null,l.name),c.a.createElement("span",{className:"sign"},l.sign),c.a.createElement(Yt,{flod:N}),c.a.createElement(Tt,{flod:N}))),c.a.createElement("div",{className:"User-data-bottom"},c.a.createElement(De.a,{loading:m,active:!0,round:!0,title:!1,paragraph:{width:[300,600]}},N?c.a.createElement("span",{onClick:S},c.a.createElement(he.a,null),"  \u6536\u8d77\u8be6\u7ec6\u8d44\u6599"):c.a.createElement("span",{onClick:S},c.a.createElement(ye.a,null),"  \u67e5\u770b\u8be6\u7ec6\u8d44\u6599"),a.cookieUser===l.name?c.a.createElement("div",{className:"user-editing",onClick:w},"\u7f16\u8f91\u4e2a\u4eba\u8d44\u6599"):c.a.createElement("div",{className:"other-user"},c.a.createElement(te,{careInfo:a.userInfo})))))),a.edit&&c.a.createElement(At,null))}function Tt(e){var t=e.flod,a=Object(n.useState)({}),r=Object(i.a)(a,2),l=r[0],o=r[1],s=l.userInfo||{};return Object(n.useEffect)(function(){var e=D.subscribe(function(){return o(D.getState())});return function(){return e()}},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:t?"User-data-base":"User-data-base active"},c.a.createElement("li",null,c.a.createElement(jt.a,null),c.a.createElement("span",null," \xa0 \xa0",s.sociality)," "),c.a.createElement("li",null,c.a.createElement("span",{style:{color:"#cacaca"}},"|"),"man"===s.sex?c.a.createElement(kt.a,{style:{marginLeft:"15px",color:"#0084FF"}}):c.a.createElement(Ct.a,{style:{marginLeft:"15px",color:"#e49eab"}}))))}function Yt(e){var t=e.flod,a=Object(n.useState)({}),r=Object(i.a)(a,2),l=r[0],o=r[1],s=l.userInfo||{};return Object(n.useEffect)(function(){var e=D.subscribe(function(){return o(D.getState())});return function(){return e()}},[]),c.a.createElement("ul",{className:t?"User-data-list active":"User-data-list"},c.a.createElement("li",null,c.a.createElement("span",null,"\u73b0\u5c45\u5730"),c.a.createElement("span",null,s.address)),c.a.createElement("li",null,c.a.createElement("span",null,"\u751f\u65e5"),c.a.createElement("span",null,s.birthday&&s.birthday.slice(5))),c.a.createElement("li",null,c.a.createElement("span",null,"\u6240\u5728\u884c\u4e1a"),c.a.createElement("span",null,s.industry)),c.a.createElement("li",null,c.a.createElement("span",null,"\u4e2a\u4eba\u7b80\u4ecb"),c.a.createElement("span",null,s.introduction)),c.a.createElement("li",null,c.a.createElement("span",null,"\u793e\u4ea4\u5730\u5740"),c.a.createElement("span",null,s.sociality)))}function zt(){return c.a.createElement("div",{className:"toolbar"},c.a.createElement(Rt,null),c.a.createElement(Be,null))}var Rt=Object(P.h)(function(){var e=Object(n.useState)(D.getState()||{}),t=Object(i.a)(e,2),a=t[0],r=t[1],l=a.userInfo,o=void 0===l?{}:l,s=a.cookieUser===o.name;Object(n.useEffect)(function(){var e=D.subscribe(function(){return r(D.getState())});return function(){return e()}},[]);var m=Object(n.useCallback)(function(e,t){D.dispatch({type:"activeSwitch",active:e}),D.dispatch({type:"careActive",careActive:t})},[]),u=Object(n.useCallback)(function(e,t){D.dispatch({type:"activeSwitch",active:e}),D.dispatch({type:"collectActive",collectActive:t})},[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"person-honor"},c.a.createElement("h4",null,"\u4e2a\u4eba\u6210\u5c31"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(g.a,{style:{fontSize:"16px"}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u83b7\u5f97\u4e86 ",o.agree," \u6b21\u8d5e\u540c"),c.a.createElement("span",null,o.collect," \u6b21\u6536\u85cf"),c.a.createElement("span",null,o.favorite," \u6b21\u559c\u6b22")))),c.a.createElement("div",{className:"user-score"},c.a.createElement("div",{className:"likes",onClick:function(){return m(4,1)}},c.a.createElement("h4",null,"\u5173\u6ce8\u4e86"),c.a.createElement("span",null,o.care)),c.a.createElement("div",{className:"fans",onClick:function(){return m(4,2)}},c.a.createElement("h4",null,"\u5173\u6ce8\u8005"),c.a.createElement("span",null,o.fans))),c.a.createElement("div",null,c.a.createElement("ul",{className:"user-bar-list"},c.a.createElement("li",{onClick:function(){return m(4,0)}},c.a.createElement("span",null,"\u5173\u6ce8\u7684\u95ee\u9898"),c.a.createElement("span",null,a.attentionDynamic&&a.attentionDynamic.length)),c.a.createElement("li",{onClick:function(){return u(5,0)}},c.a.createElement("span",null,"\u6536\u85cf\u7684\u95ee\u9898"),c.a.createElement("span",null,a.collectQues&&a.collectQues.length)),c.a.createElement("li",{onClick:function(){return u(5,1)}},c.a.createElement("span",null,"\u6536\u85cf\u7684\u56de\u7b54"),c.a.createElement("span",null,a.collectComment&&a.collectComment.length)),c.a.createElement("li",{onClick:function(){return m(4,1)}},c.a.createElement("span",null,s?"\u6211":"man"===o.sex?"\u4ed6":"\u5979","\u5173\u6ce8\u7684\u4eba"),c.a.createElement("span",null,o.care)))))}),_t=a(349);function Qt(e){var t=e.dynamicList,a=e.state,r=a.userInfo||{},l=a.cookieUser===r.name,o=Object(n.useState)(D.getState().careActive||0),s=Object(i.a)(o,2),m=s[0],u=s[1];Object(n.useEffect)(function(){var e=D.subscribe(function(){return u(D.getState().careActive)});return function(){return e()}});var d=Object(n.useCallback)(function(e){D.dispatch({type:"careActive",careActive:e})},[]),f=-1;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"dynamicCareList"},c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){return d(0)},className:0===m?"careListActive":""},"\u5173\u6ce8\u7684\u95ee\u9898"),c.a.createElement("li",{onClick:function(){return d(1)},className:1===m?"careListActive":""},l?"\u6211":"man"===a.userInfo.sex?"\u4ed6":"\u5979","\u5173\u6ce8\u7684\u4eba"),c.a.createElement("li",{onClick:function(){return d(2)},className:2===m?"careListActive":""},"\u5173\u6ce8",l?"\u6211":"man"===a.userInfo.sex?"\u4ed6":"\u5979","\u7684\u4eba"))),c.a.createElement("div",null,c.a.createElement("ul",{className:"posts user-Dynamic cares"},0===m&&t.map(function(t,a){return"delete"!==t.status?(f++,c.a.createElement(n.Fragment,{key:a},"attention"===t.style&&c.a.createElement(aa,{item:t,state:e.state,idx:f}))):""}),0!==m&&c.a.createElement(Bt,{active:m}))))}function Bt(e){var t=e.active,a=Object(P.g)().id,r=Object(n.useState)(U.getState()||{}),l=Object(i.a)(r,2),s=l[0],m=l[1],u=s.myCares,d=void 0===u?[]:u,f=1===t?s.itCaresList:s.recevies;Object(n.useEffect)(function(){j.a.get("/api/get-care/".concat(a)).then(function(e){var t=e.data;U.dispatch(Object(o.a)({type:"getCare",cares:t.myCares},t))});var e=U.subscribe(function(){return m(U.getState())});return function(){return e()}},[a]);var p=Object(n.useCallback)(function(e){e.target.innerText="\u53d6\u6d88\u5173\u6ce8"},[]),E=Object(n.useCallback)(function(e){e.target.innerText="\u5df2\u5173\u6ce8"},[]),v=Object(n.useCallback)(function(e){var t=e.type,a=e.item;void 0!==s.cookieUser?(U.dispatch({type:"updateCare",id:a.userId}),j.a.post("/api/care",{type:t,careId:a.userId}).catch(function(e){401===e.response.status&&C.dispatch({type:"toSign",sign:!1})})):C.dispatch({type:"toSign",sign:!1})},[s]);return c.a.createElement(c.a.Fragment,null,f&&f.map(function(e){var t=d.find(function(t){return t.careId===e.userId});return c.a.createElement("li",{key:e.createdAt,className:"careList"},c.a.createElement("div",null,c.a.createElement(_.b,{to:"/user/"+e.userId},c.a.createElement("i",{style:{backgroundImage:"url(".concat(e.avatar,")")},className:"careAvatar"}))),c.a.createElement("div",null,c.a.createElement(_.b,{to:"/user/"+e.userId,className:"cares-name"},c.a.createElement("h3",null,e.name),"man"===e.sex?c.a.createElement(kt.a,{style:{marginLeft:"15px",color:"#0084FF"}}):c.a.createElement(Ct.a,{style:{marginLeft:"15px",color:"#e49eab"}})),c.a.createElement("span",{className:"careSign"},e.sign),c.a.createElement("ul",{className:"careinfo"},c.a.createElement("li",null,c.a.createElement("span",null,e.commentCount," \u56de\u7b54")),c.a.createElement("li",null,c.a.createElement("span",null,e.agree," \u8d5e\u540c")),c.a.createElement("li",null,c.a.createElement("span",null,e.fans," \u5173\u6ce8\u8005")))),c.a.createElement("div",{className:"careButton"},t?c.a.createElement("button",{className:"active",onMouseEnter:p,onMouseLeave:E,onClick:function(){return v({type:"reCare",item:e})}},"\u5df2\u5173\u6ce8"):c.a.createElement("button",{className:"unactive",onClick:function(){return v({type:"toCare",item:e})}},c.a.createElement(_t.a,null)," \u5173\u6ce8","man"===e.sex?"\u4ed6":"\u5979")))}))}function Wt(e){var t=Object(n.useState)(D.getState()||{}),a=Object(i.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(D.getState().collectActive||0),s=Object(i.a)(o,2),m=s[0],u=s[1];Object(n.useEffect)(function(){var e=D.subscribe(function(){u(D.getState().collectActive),l(D.getState())});return function(){return e()}},[e]);var d=e.dynamicList,f=Object(n.useCallback)(function(e){D.dispatch({type:"collectActive",collectActive:e})},[]),p=-1,E=-1;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"dynamicCareList collectHead"},c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){return f(0)},className:0===m?"careListActive":""},"\u6536\u85cf\u7684\u95ee\u9898"),c.a.createElement("li",{onClick:function(){return f(1)},className:1===m?"careListActive":""},"\u6536\u85cf\u7684\u56de\u7b54"))),c.a.createElement("div",null,c.a.createElement("ul",{className:"posts user-Dynamic collect"},d.map(function(e,t){return 0===m&&"delete"!==e.status&&"question"===e.type?(p++,c.a.createElement(n.Fragment,{key:t},c.a.createElement(Jt,{item:e,state:r,idx:p}))):1===m&&"delete"!==e.status&&"comment"===e.type?(E++,c.a.createElement(n.Fragment,{key:t},c.a.createElement(Gt,{item:e,state:r,idx:E}))):""}))))}function Jt(e){var t=e.idx,a=Object(n.useState)(D.getState()||{}),r=Object(i.a)(a,2),l=r[0],o=r[1];Object(n.useEffect)(function(){var e=D.subscribe(function(){return o(D.getState())});return function(){return e()}},[t]);var s=e.item,m=1*(s.likeAt||s.createdAt),u=G()(m).endOf().fromNow(!0)+"\u524d";return c.a.createElement("li",{key:s.likeAt||s.createdAt},c.a.createElement("div",{className:"dynamicList-header"},c.a.createElement("span",null,"\u6536\u85cf\u4e86\u95ee\u9898"),c.a.createElement("span",null,1*parseInt(u)>1&&/\u5929/g.test(u)?new Date(m).toLocaleDateString().slice(5):u)),c.a.createElement("div",{className:"content-div",name:"content"},c.a.createElement(_.b,{className:"post-title",to:"/post-page/".concat(s.postId)},s.title),c.a.createElement("p",{className:"post-content"},c.a.createElement("span",null,s.content))),c.a.createElement(xe,{type:"question",post:s,idx:t,state:l}))}function Gt(e){var t=e.idx,a=Object(n.useState)(D.getState()||{}),r=Object(i.a)(a,2),l=r[0],o=r[1];Object(n.useEffect)(function(){var e=D.subscribe(function(){return o(D.getState())});return function(){return e()}},[t]);var s=e.item,m=s.avatar,u=1*(s.likeAt||s.createdAt),d=G()(u).endOf().fromNow(!0)+"\u524d",f=G()(1*s.createdAt).endOf().fromNow(!0)+"\u524d";return c.a.createElement("li",{key:s.likeAt||s.createdAt},c.a.createElement("div",{className:"dynamicList-header"},c.a.createElement("span",null,"\u6536\u85cf\u4e86\u56de\u7b54"),c.a.createElement("span",null,1*parseInt(d)>1&&/\u5929/g.test(d)?new Date(u).toLocaleDateString().slice(5):d)),c.a.createElement("div",{className:"content-div",name:"content"},c.a.createElement(_.b,{className:"post-title",to:"/post-page/".concat(s.postId)},s.title)),c.a.createElement("div",{className:"commenter-info dynamic-comment"},c.a.createElement("i",{className:"commenter-avatar",style:{backgroundImage:"url(".concat(m,")")}}),c.a.createElement("div",{className:"commenter-flag"},c.a.createElement(_.b,{className:"commenter-name",to:"/user/".concat(s.userId)},s.name),c.a.createElement("span",{className:"commenter-sign"},s.sign),c.a.createElement(Ue,{state:l,post:s,type:"comment"}))),c.a.createElement("div",{className:"content-div",name:"content"},c.a.createElement("p",null,c.a.createElement("span",null,s.content)),c.a.createElement("span",{className:"answerAt"},"\u53d1\u5e03\u4e8e \xa0",parseInt(f)>=1&&/\u5929/g.test(f)?G()(1*s.createdAt).format("YYYY-MM-DD HH:mm:ss"):f),c.a.createElement("div",{className:"commenter-footer"},c.a.createElement(xe,{type:"comment",comment:s,idx:t,state:l}))))}var Kt=function(){return c.a.createElement("div",{className:" user-container"},c.a.createElement("div",{className:"body-container"},c.a.createElement($t,null),c.a.createElement(zt,null)))};function $t(e){var t=e.dynamic,a=void 0===t||t,r=Object(n.useState)(20),l=Object(i.a)(r,2),o=l[0],s=l[1],m=Object(n.useState)(D.getState().active||0),u=Object(i.a)(m,2),d=u[0],f=u[1];Object(n.useEffect)(function(){var e=D.subscribe(function(){return f(D.getState().active)});return function(){return e()}}),Object(n.useEffect)(function(){s(30*d+20+40*d)},[d]);var p=Object(n.useCallback)(function(e){D.dispatch({type:"activeSwitch",active:e})},[]);return c.a.createElement("div",null,c.a.createElement("div",{className:"user-main"},c.a.createElement("ul",{className:"user-main-header"},c.a.createElement("li",{onClick:function(){return p(0)}},"\u52a8\u6001"),c.a.createElement("li",{onClick:function(){return p(1)}},"\u56de\u7b54"),c.a.createElement("li",{onClick:function(){return p(2)}},"\u63d0\u95ee"),c.a.createElement("li",{onClick:function(){return p(3)}},"\u8d5e\u540c"),c.a.createElement("li",{onClick:function(){return p(4)}},"\u5173\u6ce8"),c.a.createElement("li",{onClick:function(){return p(5)}},"\u6536\u85cf")),c.a.createElement("div",{className:"user-main-flag",style:{left:o+"px"}}),a&&c.a.createElement(Vt,{active:d})),a&&c.a.createElement(Fe,null))}function Vt(e){var t=Object(n.useState)(D.getState()||{}),a=Object(i.a)(t,2),r=a[0],l=a[1],o=r.userInfo,s=void 0===o?{}:o;return Object(n.useEffect)(function(){var e=D.subscribe(function(){return l(D.getState())});return function(){return e()}},[]),c.a.createElement("div",{className:"dynamicList"},4!==e.active&&5!==e.active&&c.a.createElement("div",{className:"dynamic-head"},c.a.createElement("span",null,s.name===r.cookieUser?c.a.createElement("span",null,"\u6211\u7684",["\u52a8\u6001","\u56de\u7b54","\u63d0\u95ee","\u8d5e\u540c"][e.active]):c.a.createElement("span",null,"man"===s.sex?"\u4ed6":"\u5979","\u7684",["\u52a8\u6001","\u56de\u7b54","\u63d0\u95ee","\u8d5e\u540c"][e.active]))),c.a.createElement("div",null,c.a.createElement(Xt,{active:e.active})))}function Xt(e){var t=e.active,a=Object(n.useState)(D.getState()),r=Object(i.a)(a,2),l=r[0],o=r[1],s=l.attentionDynamic,m=void 0===s?[]:s,u=l.commentDynamic,d=void 0===u?[]:u,f=l.likeDynamic,p=void 0===f?[]:f,E=l.postDynamic,v=void 0===E?[]:E,b=l.collectComment,g=void 0===b?[]:b,y=l.collectQues,h=void 0===y?[]:y,O=Object(n.useState)(!0),j=Object(i.a)(O,2),k=j[0],C=j[1],N=[].concat(Object(ht.a)(m),Object(ht.a)(d),Object(ht.a)(p),Object(ht.a)(v),Object(ht.a)(g),Object(ht.a)(h)),I=[d,v,p,m,[].concat(Object(ht.a)(g),Object(ht.a)(h))];Object(n.useEffect)(function(){(l.attentionDynamic||l.commentDynamic||l.likeDynamic)&&C(!1)},[l]),Object(n.useEffect)(function(){var e=D.subscribe(function(){return o(D.getState())});return function(){return e()}},[]);var S=k?new Array(6).fill(""):[];k||0!==t?k||0===t||(S=na(I[t-1])):S=na(N);var A=-1;return c.a.createElement(c.a.Fragment,null,4===t?c.a.createElement(Qt,{dynamicList:S,state:l}):c.a.createElement(c.a.Fragment,null,5===t&&c.a.createElement(Wt,{dynamicList:S,state:l}),4!==t&&5!==t&&c.a.createElement("ul",{className:"posts user-Dynamic"},S.map(function(e,t){return"delete"!==e.status?(A++,c.a.createElement(De.a,{key:t,loading:k},"comment"===e.style&&c.a.createElement(Zt,{item:e,state:l,idx:A}),"post"===e.style&&c.a.createElement(ea,{item:e,state:l,idx:A}),"likeComment"===e.style&&c.a.createElement(ta,{item:e,state:l,idx:A}),"attention"===e.style&&c.a.createElement(aa,{item:e,state:l,idx:A}),"collect"===e.style&&c.a.createElement(c.a.Fragment,null,"question"===e.type&&c.a.createElement(Jt,{item:e,state:l,idx:A}),"comment"===e.type&&c.a.createElement(Gt,{item:e,state:l,idx:A})))):""}))))}function Zt(e){var t=e.idx,a=e.state||{},n=a.userInfo,r=void 0===n?{}:n,l=e.item,o=r.avatar,i=1*(l.likeAt||l.createdAt),s=G()(i).endOf().fromNow(!0)+"\u524d",m=G()(1*l.createdAt).endOf().fromNow(!0)+"\u524d";return c.a.createElement("li",{key:l.likeAt||l.createdAt},c.a.createElement("div",{className:"dynamicList-header"},c.a.createElement("span",null,"\u56de\u7b54\u4e86\u95ee\u9898"),c.a.createElement("span",null,1*parseInt(s)>1&&/\u5929/g.test(s)?new Date(i).toLocaleDateString().slice(5):s)),c.a.createElement("div",{className:"content-div",name:"content"},c.a.createElement(_.b,{className:"post-title",to:"/post-page/".concat(l.postId)},l.title)),c.a.createElement("div",{className:"commenter-info dynamic-comment"},c.a.createElement("i",{className:"commenter-avatar",style:{backgroundImage:"url(".concat(o,")")}}),c.a.createElement("div",{className:"commenter-flag"},c.a.createElement(_.b,{className:"commenter-name",to:"."},r.name),c.a.createElement("span",{className:"commenter-sign"},r.sign),c.a.createElement(Ue,{state:a,post:l,type:"comment"}))),c.a.createElement("div",{className:"content-div",name:"content"},c.a.createElement("p",null,c.a.createElement("span",null,l.content)),c.a.createElement("span",{className:"answerAt"},"\u53d1\u5e03\u4e8e \xa0",1*parseInt(m)>=1&&/\u5929/g.test(m)?G()(1*l.createdAt).format("YYYY-MM-DD HH:mm:ss"):m),c.a.createElement("div",{className:"commenter-footer"},c.a.createElement(xe,{type:"comment",comment:l,idx:t,state:a}))))}function ea(e){var t=e.idx,a=e.state||{},n=e.item,r=1*(n.likeAt||n.createdAt),l=G()(r).endOf().fromNow(!0)+"\u524d";return c.a.createElement("li",{key:n.likeAt||n.createdAt},c.a.createElement("div",{className:"dynamicList-header User-post-time"},c.a.createElement("span",null,"\u53d1\u5e03\u4e86\u95ee\u9898"),c.a.createElement("span",null,"\xa0\xa0:\xa0",1*parseInt(l)>1&&/\u5929/g.test(l)?G()(1*n.createdAt).format("YYYY-MM-DD HH:mm:ss"):l),c.a.createElement(Ue,{state:a,post:n,type:"post"})),c.a.createElement("div",{className:"content-div",name:"content"},c.a.createElement(_.b,{className:"post-title",to:"/post-page/".concat(n.postId)},n.title),c.a.createElement("p",{className:"post-content"},c.a.createElement("span",null,n.content))),c.a.createElement(xe,{type:"question",post:n,idx:t,state:a}))}function ta(e){var t=e.idx,a=e.state||{},n=e.item,r=n.avatar,l=1*(n.likeAt||n.createdAt),o=G()(l).endOf().fromNow(!0)+"\u524d",i=G()(1*n.createdAt).endOf().fromNow(!0)+"\u524d";return c.a.createElement("li",{key:n.likeAt||n.createdAt},c.a.createElement("div",{className:"dynamicList-header"},c.a.createElement("span",null,"\u8d5e\u540c\u4e86\u56de\u7b54"),c.a.createElement("span",null,1*parseInt(o)>1&&/\u5929/g.test(o)?new Date(l).toLocaleDateString().slice(5):o)),c.a.createElement("div",{className:"content-div",name:"content"},c.a.createElement(_.b,{className:"post-title",to:"/post-page/".concat(n.postId)},n.title)),c.a.createElement("div",{className:"commenter-info dynamic-comment"},c.a.createElement("i",{className:"commenter-avatar",style:{backgroundImage:"url(".concat(r,")")}}),c.a.createElement("div",{className:"commenter-flag"},c.a.createElement(_.b,{className:"commenter-name",to:"/user/".concat(n.commenterId)},n.name),c.a.createElement("span",{className:"commenter-sign"},n.sign),c.a.createElement(Ue,{state:a,post:n,type:"comment"}))),c.a.createElement("div",{className:"content-div",name:"content"},c.a.createElement("p",null,c.a.createElement("span",null,n.content)),c.a.createElement("span",{className:"answerAt"},"\u53d1\u5e03\u4e8e  \xa0",1*parseInt(i)>=1&&/\u5929/g.test(i)?G()(1*n.createdAt).format("YYYY-MM-DD HH:mm:ss"):i),c.a.createElement("div",{className:"commenter-footer"},c.a.createElement(xe,{type:"comment",comment:n,idx:t,state:a}))))}function aa(e){var t=e.idx,a=e.state||{},n=e.item,r=1*(n.likeAt||n.createdAt),l=G()(r).endOf().fromNow(!0)+"\u524d";return c.a.createElement("li",{key:n.likeAt||n.createdAt},c.a.createElement("div",{className:"dynamicList-header"},c.a.createElement("span",null,"\u5173\u6ce8\u4e86\u95ee\u9898"),c.a.createElement("span",null,1*parseInt(l)>1&&/\u5929/g.test(l)?new Date(r).toLocaleDateString().slice(5):l)),c.a.createElement("div",{className:"content-div",name:"content"},c.a.createElement(_.b,{className:"post-title",to:"/post-page/".concat(n.postId)},n.title),c.a.createElement("p",{className:"post-content"},c.a.createElement("span",null,n.content))),c.a.createElement(xe,{type:"question",post:n,idx:t,state:a}))}function na(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.from(e).sort(function(e,t){return(t.likeAt?1*t.likeAt:1*t.createdAt)-(e.likeAt?1*e.likeAt:1*e.createdAt)})}var ca=function(){var e=Object(P.g)().id,t=Object(n.useState)(A.getState()),a=Object(i.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)(function(){var e=A.subscribe(function(){var e=A.getState(),t=e.posts,a=void 0===t?[]:t;l(e),D.dispatch({type:"getInitial",attention:e.attention,poors:e.poors,favoriteQues:e.favoriteQues,collect_quesActive:e.collect_quesActive,attentionDynamic:a.filter(function(e){return"attention"===e.style}),postDynamic:a.filter(function(e){return"post"===e.style}),collectQues:a.filter(function(e){return"collect"===e.style})})});return function(){return e()}},[e]),Object(n.useEffect)(function(){if("undefined"!==e){j.a.get("/api/user-data/".concat(e)).then(function(e){var t=e.data;D.dispatch(Object(o.a)({type:"getInitial"},t)),A.dispatch(Object(o.a)(Object(o.a)({type:"getData"},t),{},{posts:[].concat(Object(ht.a)(t.postDynamic),Object(ht.a)(t.attentionDynamic),Object(ht.a)(t.collectQues))})),L.dispatch(Object(o.a)(Object(o.a)({type:"getInitial"},t),{},{commenterInfo:[].concat(Object(ht.a)(t.likeDynamic),Object(ht.a)(t.commentDynamic),Object(ht.a)(t.collectComment))}))});var t=L.subscribe(function(){var e=L.getState();D.dispatch(Object(o.a)(Object(o.a)({type:"getInitial"},e),{},{favoriteComment:e.favoriteComment,collect_commActive:e.collect_commActive,likeDynamic:e.commenterInfo.filter(function(e){return"likeComment"===e.style}),commentDynamic:e.commenterInfo.filter(function(e){return"comment"===e.style}),collectComment:e.commenterInfo.filter(function(e){return"collect"===e.style})}))});return function(){return t()}}window.location.replace("/")},[e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(le,{page:"user"},c.a.createElement(ra,null)),r.question&&c.a.createElement(Ee,null),c.a.createElement(Ht,null),c.a.createElement(Kt,null))};function ra(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],r=t[1],l=a.userInfo||{};Object(n.useEffect)(function(){var e=D.subscribe(function(){return r(D.getState())});return function(){return e()}},[]);var o=Object(n.useCallback)(function(){D.dispatch({type:"editState",edit:!0})},[]);return c.a.createElement("div",{className:"user-ndv-slider"},c.a.createElement($t,{dynamic:!1}),a.cookieUser===l.name?c.a.createElement("div",{className:"user-editing",onClick:o},"\u7f16\u8f91\u4e2a\u4eba\u8d44\u6599"):c.a.createElement("div",{className:"other-user"},c.a.createElement(te,{careInfo:a.userInfo})))}var la=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(_.a,null,c.a.createElement(P.d,null,c.a.createElement(P.b,{exact:!0,path:"/"},c.a.createElement(Je,null)),c.a.createElement(P.b,{path:"/index"},c.a.createElement(Je,null)),c.a.createElement(P.b,{path:"/sign"},c.a.createElement(Xe,null)),c.a.createElement(P.b,{path:"/sign_up"},c.a.createElement(ce,null)),c.a.createElement(P.b,{path:"/post-page/:id"},c.a.createElement(yt,null)),c.a.createElement(P.b,{path:"/user/:id"},c.a.createElement(ca,null)),c.a.createElement(P.a,{to:"/"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(301);var oa=a(160),ia=a(15);G.a.locale("zh-cn"),l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(ia.a,{locale:oa.a},c.a.createElement(la,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})},76:function(e,t,a){}},[[163,1,2]]]);
//# sourceMappingURL=main.726b2172.chunk.js.map